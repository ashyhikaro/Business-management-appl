"use strict";(self.webpackChunkfirebase_test=self.webpackChunkfirebase_test||[]).push([[420],{1420:function(e,t,a){a.r(t);var n=a(1413),l=a(2982),s=a(885),i=(a(4129),a(2375),a(9573)),r=a(1996),c=a(5125),o=(a(1052),a(2791)),d=a(6048),u=a.n(d),m=a(4778),h=a(184),p=(0,o.lazy)((function(){return Promise.all([a.e(769),a.e(794),a.e(250)]).then(a.bind(a,5250))})),_=(0,o.lazy)((function(){return Promise.all([a.e(794),a.e(258)]).then(a.bind(a,7258))}));t.default=function(e){var t=e.userData,a=(0,o.useState)([]),d=(0,s.Z)(a,2),b=d[0],f=d[1],v=(0,o.useState)("create"),x=(0,s.Z)(v,2),g=x[0],N=x[1],j=(0,o.useState)(),A=(0,s.Z)(j,2),y=A[0],S=A[1],C=(0,o.useState)(""),D=(0,s.Z)(C,2),k=D[0],F=D[1],P=(0,o.useState)(""),V=(0,s.Z)(P,2),O=V[0],L=V[1],Z=(0,o.useState)(""),w=(0,s.Z)(Z,2),I=w[0],M=w[1],q=(0,o.useState)(""),E=(0,s.Z)(q,2),T=E[0],Y=E[1],R=(0,o.useState)(""),U=(0,s.Z)(R,2),B=U[0],z=U[1],G=(0,o.useState)(0),H=(0,s.Z)(G,2),X=H[0],J=H[1],K=X+10,Q=b?Math.ceil(b.length/10):null,W=b?b.slice(X,K):null;function $(e){document.querySelector(".sort_panel_loans").classList.toggle("sort_panel_non_active"),"edit"!==g||document.querySelector("form").classList.contains("form_hiden")||(N("create"),document.querySelector("form").classList.add("form_hiden"),document.querySelector(".sort_panel").classList.add("sort_panel_non_active")),"back"===e?(document.querySelector("form").classList.add("form_hiden"),document.querySelector(".sort_panel").classList.remove("sort_panel_non_active")):document.querySelector("form").classList.toggle("form_hiden")}function ee(e){N("edit"),"create"===g&&document.querySelector(".finance__form").classList.contains("form_hiden")&&$(),S(e.target.getAttribute("itemID").toString())}function te(e,t,a){return(0,l.Z)(e).sort((function(e,n){if("sum"===t){var l=0,s=0,i=e.Currency,r=n.Currency;switch(i){case"USD":case"EUR":l=40*parseFloat(e.Value);break;case"GBP":l=44*parseFloat(e.Value);break;case"JPY":l=.3*parseFloat(e.Value);break;case"CNY":l=5.4*parseFloat(e.Value);break;default:l=parseFloat(e.Value)}switch(r){case"USD":case"EUR":s=40*parseFloat(n.Value);break;case"GBP":s=44*parseFloat(n.Value);break;case"JPY":s=.3*parseFloat(n.Value);break;case"CNY":s=5.4*parseFloat(n.Value);break;default:s=parseFloat(n.Value)}return"top"===a?(F("sum/top"),l>s?1:l<s?-1:0):(F("sum/bottom"),l<s?1:l>s?-1:0)}if("date"===t){var c=+e.Date.split("-").reverse().join(""),o=+n.Date.split("-").reverse().join("");return"top"===a?(F("date/top"),c>o?1:c<o?-1:0):(F("date/bottom"),c<o?1:c>o?-1:0)}}))}function ae(e){var t=(0,l.Z)(e);return k&&("sum"===k.split("/")[0]?t="top"===k.split("/")[1]?te(e,"sum","top"):te(e,"sum","bottom"):"date"===k.split("/")[0]&&(t="top"===k.split("/")[1]?te(e,"date","top"):te(e,"date","bottom"))),O&&(t=t.filter((function(e){return e.Type===O}))),I&&(t=t.filter((function(e){return e.Name.trim().toLowerCase().includes(I.trim().toLowerCase())}))),T&&(t=t.filter((function(e){return e.Currency===T}))),B&&(t="\u0421\u043f\u043b\u0430\u0447\u0435\u043d\u043e"===B?t.filter((function(e){return!0===e.PaidOut})):t.filter((function(e){return!1===e.PaidOut}))),t}function ne(e){var a=e.target.id,l=e.target.getAttribute("itemID").toString();m.db.ref("loans").child(a).child(l).remove(),1===W.length&&J(0);var s=[];m.db.ref("loans").child(t.id).on("value",(function(e){var t=e.val();for(var a in t)"1"!==a&&s.push((0,n.Z)({id:a},t[a]))})),s=ae(s),f(s)}function le(e){var a=e.target.id,l=e.target.getAttribute("itemID").toString();"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438"===e.target.innerHTML?m.db.ref("loans").child(a).child(l).update({PaidOut:!1}):m.db.ref("loans").child(a).child(l).update({PaidOut:!0});var s=[];m.db.ref("loans").child(t.id).on("value",(function(e){var t=e.val();for(var a in t)"1"!==a&&s.push((0,n.Z)({id:a},t[a]))})),s=ae(s),f(s)}return(0,o.useEffect)((function(){document.querySelector(".menu_small_screen").classList.contains("hidden")||(document.querySelector(".menu_small_screen").classList.add("hidden"),document.querySelector(".burger_btn_img").src=i)}),[]),(0,o.useEffect)((function(){m.db.ref("loans").child(t.id).on("value",(function(e){var t=e.val(),a=[];for(var l in t)"1"!==l&&a.push((0,n.Z)({id:l},t[l]));f(a)})),J(0)}),[]),(0,o.useEffect)((function(){k||m.db.ref("loans").child(t.id).on("value",(function(e){var t=e.val(),a=[];for(var l in t)"1"!==l&&a.push((0,n.Z)({id:l},t[l]));f(a)}))}),[k]),(0,h.jsxs)("div",{className:"loan_page page",children:[(0,h.jsxs)("div",{className:"loan_page__header",children:[(0,h.jsx)("h1",{className:"loan_page__title title",children:"\u0414\u0435\u043f\u043e\u0437\u0438\u0442\u0438"}),(0,h.jsx)("button",{className:"add_loan_btn",onClick:$,children:"\u271b"})]}),(0,h.jsxs)("div",{className:"finance_main",children:[(0,h.jsx)(p,{openForm:$,userData:t,mode:g,usersNoteId:y}),(0,h.jsxs)("div",{className:"finance_table_container",children:[(0,h.jsxs)("div",{className:"table",children:[(0,h.jsxs)("div",{className:"table_titles",children:[(0,h.jsx)("p",{className:"table_title",children:"\u0406\u043c'\u044f / \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u044f"}),(0,h.jsx)("p",{className:"table_title",children:"\u041a\u0440\u0435\u0434\u0438\u0442"}),(0,h.jsx)("p",{className:"table_title",children:"\u0414\u0435\u0431\u0435\u0442"}),(0,h.jsx)("p",{className:"table_title",children:"\u041c\u0456\u0441\u044f\u0447\u043d\u0430 \u0441\u043f\u043b\u0430\u0442\u0430"}),(0,h.jsx)("p",{className:"table_title",children:"\u0414\u0435\u043d\u044c \u043e\u043f\u043b\u0430\u0442\u0438"}),(0,h.jsx)("p",{className:"table_title",children:"\u041a\u0456\u043d\u0446\u0435\u0432\u0430 \u043e\u043f\u043b\u0430\u0442\u0430"}),(0,h.jsx)("p",{className:"table_title",children:"\u041a\u0435\u0440\u0443\u0432\u0430\u043d\u043d\u044f"})]}),(0,h.jsx)("div",{className:"table_rows",children:W.map((function(e,a){return(0,h.jsxs)("div",{className:"table_row",children:[(0,h.jsxs)("div",{className:"item_name table_col",children:[e.PaidOut?(0,h.jsx)("p",{className:"break_text name loan_paid_out",children:e.Name}):(0,h.jsx)("p",{className:"break_text name",children:e.Name}),(0,h.jsx)("p",{className:"date_of_creation",children:e.DateOfCreation})]}),(0,h.jsxs)("div",{className:"item_value table_col",children:[e.PaidOut?(0,h.jsx)("p",{className:"break_text value costValue loan_paid_out",children:"\u041a\u0440\u0435\u0434\u0438\u0442"===e.Type?e.Value:"0"}):(0,h.jsx)("p",{className:"break_text value costValue",children:"\u041a\u0440\u0435\u0434\u0438\u0442"===e.Type?e.Value:"0"}),(0,h.jsx)("p",{className:"value_currency",children:"\u041a\u0440\u0435\u0434\u0438\u0442"===e.Type?e.Currency:""})]}),(0,h.jsxs)("div",{className:"item_value table_col",children:[e.PaidOut?(0,h.jsx)("p",{className:"break_text value incomeValue loan_paid_out",children:"\u0414\u0435\u0431\u0435\u0442"===e.Type?e.Value:"0"}):(0,h.jsx)("p",{className:"break_text value incomeValue",children:"\u0414\u0435\u0431\u0435\u0442"===e.Type?e.Value:"0"}),(0,h.jsx)("p",{className:"value_currency",children:"\u0414\u0435\u0431\u0435\u0442"===e.Type?e.Currency:""})]}),(0,h.jsx)("div",{className:"item_value table_col",children:e.PaidOut?(0,h.jsx)("p",{className:"break_text value loan_paid_out",children:e.ValueMonth}):(0,h.jsx)("p",{className:"break_text value",children:e.ValueMonth})}),(0,h.jsx)("div",{className:"item_date table_col",children:e.PaidOut?(0,h.jsx)("p",{className:"date loan_paid_out",children:e.DateMonth}):(0,h.jsx)("p",{className:"date",children:e.DateMonth})}),(0,h.jsx)("div",{className:"item_date table_col",children:e.PaidOut?(0,h.jsx)("p",{className:"date date_end loan_paid_out",children:e.Date}):(0,h.jsx)("p",{className:"date date_end",children:e.Date})}),(0,h.jsxs)("div",{className:"item_panel table_col",children:[(0,h.jsxs)("div",{className:"btns_container",children:[e.PaidOut?(0,h.jsx)("button",{className:"receipt_btn btn",onClick:le,id:t.id,itemID:e.id,children:"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0438"}):(0,h.jsx)("button",{className:"receipt_btn btn",onClick:le,id:t.id,itemID:e.id,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),(0,h.jsx)("br",{}),(0,h.jsx)("button",{className:"edit_btn btn",onClick:ee,id:t.id,itemID:e.id,children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})]}),(0,h.jsxs)("div",{className:"btns_container",children:[(0,h.jsx)("button",{className:"receipt_btn btn",onClick:function(e){return function(e){var t,a=e.id,n=e.getAttribute("itemID"),l=new Date,s=String(l.getDay()).length>1?String(l.getDay()):"0"+String(l.getDay()),i=String(l.getMonth()).length>1?String(l.getMonth()):"0"+String(l.getMonth()),o=String(l.getFullYear());m.db.ref("loans").child(a).child(n).once("value",(function(e){t=e.val()}));var d=new c.default("landscape","pt","a4");d.addFont(r,"CyrillicFont","normal"),d.setFont("CyrillicFont"),d.setFontSize(26),d.text(40,50,"\u0417\u0432\u0456\u0442 \u043f\u0440\u043e \u043f\u043e\u0437\u0438\u043a\u0443");var u="CyrillicFont",h={font:u,fontSize:14},p={font:u,fontSize:12};d.autoTable({head:[["\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0438\u0441\u0443","\u0406\u043c'\u044f / \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u044f","\u0422\u0438\u043f \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0443","\u0421\u0443\u043c\u0430","\u041c\u0456\u0441\u044f\u0447\u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0430","\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u0438","\u041a\u0456\u043d\u0446\u0435\u0432\u0430 \u0432\u0438\u043f\u043b\u0430\u0442\u0430","\u0421\u0442\u0430\u0442\u0443\u0441"]],body:[[t.DateOfCreation,t.Name,t.Type,"".concat(t.Value+" "+t.Currency),t.ValueMonth,t.DateMonth,t.Date,"".concat(t.PaidOut?"\u0417\u0430\u043a\u0440\u0438\u0442\u0430":"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0430")]],startY:80,headStyles:h,bodyStyles:p}),d.setFont("CyrillicFont"),d.setFontSize(14),d.text(40,200,"\u0414\u0430\u0442\u0430:"),d.setFont("helvetica","italic"),d.text(80,200,"".concat(s+"-"+i+"-"+o)),d.save("Loan_report")}(e.target)},id:t.id,itemID:e.id,children:"PDF-\u0437\u0432\u0456\u0442"}),(0,h.jsx)("br",{}),(0,h.jsx)("button",{className:"delete_btn btn",onClick:ne,id:t.id,itemID:e.id,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]})]},a)}))})]}),0===W.length||b.length<=10?null:(0,h.jsx)(u(),{breakLabel:"...",nextLabel:"\u0414\u0430\u043b\u0456 >",onPageChange:function(e){var t;t=10*e.selected%b.length,J(t)},pageRangeDisplayed:5,pageCount:Q,previousLabel:"< \u041d\u0430\u0437\u0430\u0434",renderOnZeroPageCount:null,className:"pagination_list"})]}),(0,h.jsx)(_,{finalSort:ae,setSortRegime:F,userData:t,category:O,setCategory:L,nameOfParty:I,setNameOfParty:M,currency:T,setCurrency:Y,setLoans:f,loans:b,paidOutStatus:B,setPaidOutStatus:z})]})]})}},4129:function(){},2375:function(){},1996:function(e,t,a){e.exports=a.p+"static/media/FreeSans.028215fb03f453e38eed.ttf"},9573:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nO3RAQ0AMAgEsfdvmrkYBFoHl0sAgEFquAholvUHALithouAZll/AIDbargIaJb1BwCA/PMAXDx46rGiKioAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=420.305e99e1.chunk.js.map