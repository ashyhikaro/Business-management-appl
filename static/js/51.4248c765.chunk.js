"use strict";(self.webpackChunkfirebase_test=self.webpackChunkfirebase_test||[]).push([[51],{2051:function(e,t,a){a.r(t);var s=a(2982),n=a(1413),r=a(885),c=(a(5319),a(2375),a(1996)),i=a(9573),l=a(2791),o=a(6048),u=a.n(o),d=a(5125),m=(a(1052),a(4778)),f=a(184),p=(0,l.lazy)((function(){return Promise.all([a.e(769),a.e(794),a.e(479)]).then(a.bind(a,3479))})),h=(0,l.lazy)((function(){return Promise.all([a.e(794),a.e(923)]).then(a.bind(a,9923))}));function _(e){var t=e.currentItems,a=e.regime,s=e.userData,n=e.openForm,r=e.handlePageClick,i=e.pageCount,l=e.deleteItem,o=e.incomes,_=e.costs,g=e.setIncomes,b=e.setCosts,v=e.finalSort,x=e.setSortRegime,j=e.category,A=e.setCategory,N=e.projectName,y=e.setProjectName,S=e.currency,F=e.setCurrency,C=e.mode,D=e.setMode,V=e.usersNoteId,k=e.setUsersNoteId;function I(e){D("edit"),"create"===C&&document.querySelector(".finance__form").classList.contains("form_hiden")&&n(),k(e.target.getAttribute("itemID").toString())}return(0,f.jsxs)("div",{className:"finance_main",children:[(0,f.jsx)(p,{regime:a,userData:s,openForm:n,mode:C,usersNoteId:V}),(0,f.jsxs)("div",{className:"finance_table_container",children:[(0,f.jsxs)("div",{className:"table",children:[(0,f.jsxs)("div",{className:"table_titles",children:[(0,f.jsx)("p",{className:"table_title",children:"\u0414\u0430\u0442\u0430"}),(0,f.jsx)("p",{className:"table_title",children:"\u0421\u0443\u043c\u0430"}),(0,f.jsx)("p",{className:"table_title",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f"}),(0,f.jsx)("p",{className:"table_title",children:"\u041f\u0440\u043e\u0454\u043a\u0442"}),(0,f.jsx)("p",{className:"table_title",children:"\u041f\u0430\u043d\u0435\u043b\u044c \u043a\u0435\u0440\u0443\u0432\u0430\u043d\u043d\u044f"})]}),(0,f.jsx)("div",{className:"table_rows",children:t.map((function(e,t){return(0,f.jsxs)("div",{className:"table_row",children:[(0,f.jsxs)("div",{className:"item_date table_col",children:[(0,f.jsx)("p",{className:"date",children:e.Date}),(0,f.jsx)("p",{className:"date_of_creation",children:e.DateOfCreation})]}),(0,f.jsxs)("div",{className:"item_value table_col",children:["income"===a?(0,f.jsxs)("p",{className:"break_text value incomeValue",children:["+ ",e.Value]}):(0,f.jsxs)("p",{className:"break_text value costValue",children:["- ",e.Value]}),(0,f.jsx)("p",{className:"value_currency",children:e.Currency})]}),(0,f.jsx)("div",{className:"item_type table_col",children:(0,f.jsx)("p",{className:"type",children:e.Type})}),(0,f.jsx)("div",{className:"item_project table_col",children:(0,f.jsx)("p",{className:"break_text project",children:e.Project})}),(0,f.jsxs)("div",{className:"item_panel table_col",children:[(0,f.jsx)("button",{className:"receipt_btn btn",onClick:function(e){return function(e){var t,s=e.id,n=e.getAttribute("itemID"),r=new Date,i=String(r.getDay()).length>1?String(r.getDay()):"0"+String(r.getDay()),l=String(r.getMonth()).length>1?String(r.getMonth()):"0"+String(r.getMonth()),o=String(r.getFullYear());m.db.ref(a).child(s).child(n).once("value",(function(e){t=e.val()}));var u=new d.default("landscape","pt","a4");u.addFont(c,"CyrillicFont","normal"),u.setFont("CyrillicFont"),u.setFontSize(26),"income"===a?u.text(40,50,"\u0417\u0432\u0456\u0442 \u043f\u0440\u043e \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f \u043f\u0440\u0438\u0431\u0443\u0442\u043a\u0443"):u.text(40,50,"\u0417\u0432\u0456\u0442 \u043f\u0440\u043e \u0432\u0438\u0442\u0440\u0430\u0442\u0438");var f="CyrillicFont",p={font:f,fontSize:14},h={font:f,fontSize:12};u.autoTable({head:[["\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0438\u0441\u0443","\u0414\u0430\u0442\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0456\u0457","\u041f\u0440\u043e\u0454\u043a\u0442","\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f","\u0421\u0443\u043c\u0430"]],body:[[t.DateOfCreation,t.Date,t.Project,t.Type,"".concat(t.Value+" "+t.Currency)]],startY:80,headStyles:p,bodyStyles:h}),u.setFont("CyrillicFont"),u.setFontSize(14),u.text(40,200,"\u0414\u0430\u0442\u0430:"),u.setFont("helvetica","italic"),u.text(80,200,"".concat(i+"-"+l+"-"+o)),"income"===a?u.save("Income_report"):u.save("Expense_report")}(e.target)},id:s.id,itemID:e.id,children:"PDF-\u0437\u0432\u0456\u0442"}),(0,f.jsx)("br",{}),(0,f.jsx)("button",{className:"edit_btn btn",onClick:I,id:s.id,itemID:e.id,children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,f.jsx)("br",{}),(0,f.jsx)("button",{className:"delete_btn btn",onClick:l,id:s.id,itemID:e.id,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]},t)}))})]}),"income"===a&&(0===t.length||o.length<=10)||"costs"===a&&(0===t.length||_.length<=10)?null:(0,f.jsx)(u(),{breakLabel:"...",nextLabel:"\u0414\u0430\u043b\u0456 >",onPageChange:r,pageRangeDisplayed:5,pageCount:i,previousLabel:"< \u041d\u0430\u0437\u0430\u0434",renderOnZeroPageCount:null,className:"pagination_list"})]}),(0,f.jsx)(h,{regime:a,incomes:o,costs:_,setIncomes:g,setCosts:b,finalSort:v,setSortRegime:x,userData:s,category:j,setCategory:A,projectName:N,setProjectName:y,currency:S,setCurrency:F})]})}t.default=function(e){var t=e.userData,a=e.amountOfIncome,c=e.setAmountOfIncome,o=e.amountOfExpenses,u=e.setAmountOfExpenses,d=(0,l.useState)("income"),p=(0,r.Z)(d,2),h=p[0],g=p[1],b=(0,l.useState)("create"),v=(0,r.Z)(b,2),x=v[0],j=v[1],A=(0,l.useState)([]),N=(0,r.Z)(A,2),y=N[0],S=N[1],F=(0,l.useState)([]),C=(0,r.Z)(F,2),D=C[0],V=C[1],k=(0,l.useState)(),I=(0,r.Z)(k,2),L=I[0],P=I[1],Z=(0,l.useState)(""),w=(0,r.Z)(Z,2),E=w[0],U=w[1],q=(0,l.useState)(""),Y=(0,r.Z)(q,2),M=Y[0],R=Y[1],O=(0,l.useState)(""),B=(0,r.Z)(O,2),H=B[0],T=B[1],z=(0,l.useState)(""),G=(0,r.Z)(z,2),J=G[0],X=G[1],K=(0,l.useState)(0),Q=(0,r.Z)(K,2),W=Q[0],$=Q[1],ee=W+10,te="income"===h?Math.ceil(y.length/10):Math.ceil(D.length/10),ae="income"===h?y.slice(W,ee):D.slice(W,ee);(0,l.useEffect)((function(){m.db.ref(h).child(t.id).on("value",(function(e){var t=e.val(),a=[];if("income"===h){for(var s in t)"1"!==s&&a.push((0,n.Z)({id:s},t[s]));S(a),c(a.reduce((function(e,t){switch(t.Currency){case"USD":case"EUR":return parseFloat(e)+40*parseFloat(t.Value);case"GBP":return parseFloat(e)+44*parseFloat(t.Value);case"JPY":return parseFloat(e)+.3*parseFloat(t.Value);case"CNY":return parseFloat(e)+5.4*parseFloat(t.Value);default:return parseFloat(e)+parseFloat(t.Value)}}),0))}else{for(var r in t)"1"!==r&&a.push((0,n.Z)({id:r},t[r]));V(a),u(a.reduce((function(e,t){switch(t.Currency){case"USD":case"EUR":return parseFloat(e)+40*parseFloat(t.Value);case"GBP":return parseFloat(e)+44*parseFloat(t.Value);case"JPY":return parseFloat(e)+.3*parseFloat(t.Value);case"CNY":return parseFloat(e)+5.4*parseFloat(t.Value);default:return parseFloat(e)+parseFloat(t.Value)}}),0))}})),$(0)}),[h]),(0,l.useEffect)((function(){E||m.db.ref(h).child(t.id).on("value",(function(e){var t=e.val(),a=[];if("income"===h){for(var s in t)"1"!==s&&a.push((0,n.Z)({id:s},t[s]));S(a)}else{for(var r in t)"1"!==r&&a.push((0,n.Z)({id:r},t[r]));V(a)}}))}),[E]);var se=function(e){if(j("create"),document.querySelector(".finance__form").classList.contains("form_hiden")||ne(),"income"===h&&"\u0414\u043e\u0445\u043e\u0434\u0438"!==e.target.innerHTML)g("costs");else{if("income"===h&&"\u0414\u043e\u0445\u043e\u0434\u0438"===e.target.innerHTML)return;if("costs"!==h||"\u0412\u0438\u0442\u0440\u0430\u0442\u0438"===e.target.innerHTML)return;g("income")}document.querySelectorAll(".finance_header__title").forEach((function(e){return e.classList.remove("active")})),e.target.classList.toggle("active")};function ne(e){document.querySelector(".sort_panel_finances").classList.toggle("sort_panel_non_active"),"edit"!==x||document.querySelector("form").classList.contains("form_hiden")||(j("create"),document.querySelector("form").classList.add("form_hiden"),document.querySelector(".sort_panel_finances").classList.add("sort_panel_non_active")),"back"===e?(document.querySelector("form").classList.add("form_hiden"),document.querySelector(".sort_panel_finances").classList.remove("sort_panel_non_active")):document.querySelector("form").classList.toggle("form_hiden")}function re(e,t,a){return(0,s.Z)(e).sort((function(e,s){if("sum"===t){var n=0,r=0;switch(e.Currency){case"USD":case"EUR":n=40*parseFloat(e.Value);break;case"GBP":n=44*parseFloat(e.Value);break;case"JPY":n=.3*parseFloat(e.Value);break;case"CNY":n=5.4*parseFloat(e.Value);break;default:n=parseFloat(e.Value)}switch(s.Currency){case"USD":case"EUR":r=40*parseFloat(s.Value);break;case"GBP":r=44*parseFloat(s.Value);break;case"JPY":r=.3*parseFloat(s.Value);break;case"CNY":r=5.4*parseFloat(s.Value);break;default:r=parseFloat(s.Value)}return"top"===a?(U("sum/top"),n>r?1:n<r?-1:0):(U("sum/bottom"),n<r?1:n>r?-1:0)}if("date"===t){var c=+e.Date.split("-").reverse().join(""),i=+s.Date.split("-").reverse().join("");return"top"===a?(U("date/top"),c>i?1:c<i?-1:0):(U("date/bottom"),c<i?1:c>i?-1:0)}}))}function ce(e){var t=(0,s.Z)(e);return E&&("sum"===E.split("/")[0]?t="top"===E.split("/")[1]?re(e,"sum","top"):re(e,"sum","bottom"):"date"===E.split("/")[0]&&(t="top"===E.split("/")[1]?re(e,"date","top"):re(e,"date","bottom"))),M&&(t=t.filter((function(e){return e.Type===M}))),H&&(t=t.filter((function(e){return e.Project.trim().toLowerCase().includes(H.trim().toLowerCase())}))),J&&(t=t.filter((function(e){return e.Currency===J}))),t}return(0,l.useEffect)((function(){document.querySelector(".menu_small_screen").classList.contains("hidden")||(document.querySelector(".menu_small_screen").classList.add("hidden"),document.querySelector(".burger_btn_img").src=i)}),[]),(0,f.jsxs)("div",{className:"finance_page page",children:[(0,f.jsx)("h2",{className:"finance_page__title title",children:"\u0424\u0456\u043d\u0430\u043d\u0441\u0438"}),(0,f.jsxs)("div",{className:"finance_header",children:[(0,f.jsxs)("div",{className:"header_switcher",children:[(0,f.jsx)("h3",{onClick:se,className:"finance_header__title active",children:"\u0414\u043e\u0445\u043e\u0434\u0438"}),(0,f.jsx)("h3",{onClick:se,className:"finance_header__title",children:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438"}),(0,f.jsx)("button",{onClick:ne,className:"add_finance_btn",children:" \u271b"})]}),(0,f.jsx)("div",{className:"header_amounts",children:"income"===h?(0,f.jsxs)("p",{className:"amount_of_income",children:["\u0414\u043e\u0445\u043e\u0434\u0438: ",a," UAH"]}):(0,f.jsxs)("p",{className:"amount_of_income",children:["\u0412\u0438\u0442\u0440\u0430\u0442\u0438: ",o," UAH"]})})]}),(0,f.jsx)(_,{currentItems:ae,regime:h,userData:t,openForm:ne,handlePageClick:function(e){var t;t="income"===h?10*e.selected%y.length:10*e.selected%D.length,$(t)},pageCount:te,deleteItem:function(e){var a=e.target.id,s=e.target.getAttribute("itemID").toString();m.db.ref(h).child(a).child(s).remove(),1===ae.length&&$(0);var r=[];m.db.ref(h).child(t.id).on("value",(function(e){var t=e.val();if("income"===h)for(var a in t)"1"!==a&&r.push((0,n.Z)({id:a},t[a]));else for(var s in t)"1"!==s&&r.push((0,n.Z)({id:s},t[s]))})),r=ce(r),"income"===h?S(r):V(r)},incomes:y,costs:D,setIncomes:S,setCosts:V,finalSort:ce,setSortRegime:U,category:M,setCategory:R,projectName:H,setProjectName:T,currency:J,setCurrency:X,mode:x,setMode:j,usersNoteId:L,setUsersNoteId:P})]})}},5319:function(){},2375:function(){},1996:function(e,t,a){e.exports=a.p+"static/media/FreeSans.028215fb03f453e38eed.ttf"},9573:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nO3RAQ0AMAgEsfdvmrkYBFoHl0sAgEFquAholvUHALithouAZll/AIDbargIaJb1BwCA/PMAXDx46rGiKioAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=51.4248c765.chunk.js.map