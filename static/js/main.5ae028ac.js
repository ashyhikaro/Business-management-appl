/*! For license information please see main.5ae028ac.js.LICENSE.txt */
!function(){"use strict";var e={4778:function(e,t,n){n.d(t,{db:function(){return Fx}});var r=n(2791),i=n(1250),a=n(4165),o=n(4942),u=n(1413),s=n(5861),c=n(885),l=n(7689),h=n(6905),f=n(184),d=(0,r.lazy)((function(){return Promise.all([n.e(769),n.e(634),n.e(293)]).then(n.bind(n,3293))})),v=(0,r.lazy)((function(){return n.e(915).then(n.bind(n,2915))})),p=(0,r.lazy)((function(){return n.e(379).then(n.bind(n,379))})),y=(0,r.lazy)((function(){return Promise.all([n.e(769),n.e(444)]).then(n.bind(n,2444))})),m=(0,r.lazy)((function(){return Promise.all([n.e(769),n.e(634),n.e(878)]).then(n.bind(n,1878))})),g=(0,r.lazy)((function(){return Promise.all([n.e(769),n.e(634),n.e(486)]).then(n.bind(n,3486))})),k=(0,r.lazy)((function(){return Promise.all([n.e(52),n.e(48),n.e(51)]).then(n.bind(n,2051))})),_=(0,r.lazy)((function(){return Promise.all([n.e(794),n.e(171)]).then(n.bind(n,1171))})),w=(0,r.lazy)((function(){return Promise.all([n.e(52),n.e(48),n.e(420)]).then(n.bind(n,1420))})),b=(0,r.lazy)((function(){return Promise.all([n.e(769),n.e(794),n.e(52),n.e(449)]).then(n.bind(n,3449))})),x=(0,r.lazy)((function(){return n.e(577).then(n.bind(n,9577))}));var I=function(){var e=(0,l.s0)(),t=(0,h.v0)(),n=t.currentUser,i=(0,r.useState)(!1),I=(0,c.Z)(i,2),E=I[0],S=I[1],T=(0,r.useState)(!1),C=(0,c.Z)(T,2),Z=C[0],N=C[1],D=(0,r.useState)(),A=(0,c.Z)(D,2),P=A[0],R=A[1],O=(0,r.useState)(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null),L=(0,c.Z)(O,2),M=L[0],F=L[1],U=(0,r.useState)(0),V=(0,c.Z)(U,2),q=V[0],B=V[1],j=(0,r.useState)(0),z=(0,c.Z)(j,2),W=z[0],K=z[1],H=function(){localStorage.clear(),(0,h.w7)(t),F(null)};function G(){return(G=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new h.hJ).addScope("email"),e.prev=2,e.next=5,(0,h.rh)(t,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function Q(){return(Q=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.e5)(t,n.email,n.password);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message),R(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Y(){return(Y=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,r.startTransition)((function(){N(!0)})),localStorage.setItem("user",JSON.stringify((0,u.Z)({},n))),e.prev=2,e.next=5,(0,h.Xb)(t,n.email,n.password);case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(2),localStorage.removeItem("user"),console.log(e.t0.message),R(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function $(e,t){Fx.ref(t).on("value",(function(n){e in n.val()||Fx.ref(t).update((0,o.Z)({},e,{1:"plug"}))}))}function X(e){localStorage.getItem("user")?(S(!0),F((function(t){var n={};for(var r in e)""===e[r]?n[r]=t[r]:n[r]=e[r];return(0,u.Z)((0,u.Z)({},n),{},{email:t.email,id:t.id})}))):(0,r.startTransition)((function(){F((0,u.Z)((0,u.Z)({},e),{},{email:n.email,id:n.uid}))}))}return(0,r.useEffect)((function(){!function(){var t;M&&(t=n?(0,u.Z)((0,u.Z)({},M),{},{id:n.uid}):M,Fx.ref("users").update((0,o.Z)({},t.id,{email:t.email,firstname:t.firstname,lastname:t.lastname,age:t.age,phone:t.phone,country:t.country,region:t.region})),!0===E&&(S(!1),e("/user-profile")),!0===Z&&(N(!1),e("/")),localStorage.setItem("user",JSON.stringify(t)))}()}),[M]),(0,r.useEffect)((function(){(0,h.Aj)(t,(function(t){t&&(R(""),"google.com"===t.providerData[0].providerId?(localStorage.getItem("user")||Fx.ref("users").on("value",(function(n){t.uid in n.val()?Fx.ref("users").child(t.uid).on("value",(function(n){F((0,u.Z)((0,u.Z)({},n.val()),{},{id:t.uid})),e("/")})):e("/user-settings")})),$(t.uid,"income"),$(t.uid,"costs"),$(t.uid,"loans")):(localStorage.getItem("user")?(console.log(1),F((0,u.Z)((0,u.Z)({},JSON.parse(localStorage.getItem("user"))),{},{id:t.uid}))):localStorage.getItem("user")||(console.log(2),Fx.ref("users").child(t.uid).on("value",(function(n){console.log(n.val()),F((0,u.Z)((0,u.Z)({},n.val()),{},{id:t.uid})),e("/")}))),$(t.uid,"income"),$(t.uid,"costs"),$(t.uid,"loans")))}))}),[]),(0,f.jsxs)(f.Fragment,{children:[localStorage.getItem("user")||M?(0,f.jsx)(v,{handleLogout:H}):null,(0,f.jsx)(r.Suspense,{fallback:(0,f.jsx)("h1",{className:"loading_title",children:"Loading..."}),children:(0,f.jsx)(l.Z5,{children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.AW,{path:"/registration",element:(0,f.jsx)(d,{createAccount:function(e){return Y.apply(this,arguments)},setUserData:F,customError:P,setCustomError:R})}),(0,f.jsx)(l.AW,{path:"/resset-password",element:(0,f.jsx)(x,{auth:t})}),(0,f.jsx)(l.AW,{path:"/",element:M?(0,f.jsx)(p,{userData:M,amountOfIncome:q,amountOfExpenses:W}):(0,f.jsx)(y,{authorAccount:function(e){return Q.apply(this,arguments)},signInWithGoogle:function(){return G.apply(this,arguments)},customError:P,setCustomError:R})}),(0,f.jsx)(l.AW,{path:"/user-settings",element:(0,f.jsx)(m,{setUserSettings:X,handleLogout:H})}),(0,f.jsx)(l.AW,{path:"/user-profile",element:(0,f.jsx)(g,{handleLogout:H,userData:M,setUserSettings:X})}),(0,f.jsx)(l.AW,{path:"/finances",element:(0,f.jsx)(k,{userData:M,amountOfIncome:q,setAmountOfIncome:B,amountOfExpenses:W,setAmountOfExpenses:K})}),(0,f.jsx)(l.AW,{path:"/cash-flow",element:(0,f.jsx)(_,{userData:M})}),(0,f.jsx)(l.AW,{path:"/loans",element:(0,f.jsx)(w,{userData:M})}),(0,f.jsx)(l.AW,{path:"/reports",element:(0,f.jsx)(b,{userData:M})})]})})})]})},E=n(1087);var S,T=function(){return(0,f.jsx)(E.UT,{children:(0,f.jsx)(I,{})})},C=n(5671),Z=n(3144),N=n(5854),D=n(3258),A=n(3450),P=n(6781),R=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this._delegate=t,this.firebase=n,(0,A._addComponent)(t,new D.wA("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,Z.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),(0,A.deleteApp)(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,A._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,A._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),O=(S={},(0,o.Z)(S,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,o.Z)(S,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),S),L=new N.LL("app-compat","Firebase",O);var M=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=A.initializeApp(r,i);if((0,N.r3)(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:r,registerVersion:A.registerVersion,setLogLevel:A.setLogLevel,onLog:A.onLog,apps:null,SDK_VERSION:A.SDK_VERSION,INTERNAL:{registerComponent:function(t){var i=t.name,a=i.replace("-compat","");if(A._registerComponent(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[a])throw L.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&(0,N.ZB)(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,i),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:A}};function r(e){if(e=e||A._DEFAULT_ENTRY_NAME,!(0,N.r3)(t,e))throw L.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),r.App=e,n}(R);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,N.ZB)(t,e)},createSubscribe:N.ne,ErrorFactory:N.LL,deepExtend:N.ZB}),t}(),F=new P.Yd("@firebase/app-compat");if((0,N.jU)()&&void 0!==self.firebase){F.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var U=self.firebase.SDK_VERSION;U&&U.indexOf("LITE")>=0&&F.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var V,q=M;(0,A.registerVersion)("@firebase/app-compat","0.1.37",V);q.registerVersion("firebase","9.12.1","app-compat");var B,j=n(5647),z=n(136),W=n(9388),K=n(7762),H=n(1752),G=n(1120),Q=n(2982),Y="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$={},X=X||{},J=Y||self;function ee(){}function te(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ne(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var re="closure_uid_"+(1e9*Math.random()>>>0),ie=0;function ae(e,t,n){return e.call.apply(e.bind,arguments)}function oe(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ue(e,t,n){return(ue=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ae:oe).apply(null,arguments)}function se(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ce(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function le(){this.s=this.s,this.o=this.o}var he={};le.prototype.s=!1,le.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,re)&&e[re]||(e[re]=++ie)}(this);delete he[e]}},le.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var fe=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function de(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ve(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(te(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function pe(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{J.addEventListener("test",ee,t),J.removeEventListener("test",ee,t)}catch(n){}return e}();function me(e){return/^[\s\xa0]*$/.test(e)}var ge=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ke(e,t){return e<t?-1:e>t?1:0}function _e(){var e=J.navigator;return e&&(e=e.userAgent)?e:""}function we(e){return-1!=_e().indexOf(e)}function be(e){return be[" "](e),e}be[" "]=ee;var xe,Ie=we("Opera"),Ee=we("Trident")||we("MSIE"),Se=we("Edge"),Te=Se||Ee,Ce=we("Gecko")&&!(-1!=_e().toLowerCase().indexOf("webkit")&&!we("Edge"))&&!(we("Trident")||we("MSIE"))&&!we("Edge"),Ze=-1!=_e().toLowerCase().indexOf("webkit")&&!we("Edge");function Ne(){var e=J.document;return e?e.documentMode:void 0}e:{var De="",Ae=function(){var e=_e();return Ce?/rv:([^\);]+)(\)|;)/.exec(e):Se?/Edge\/([\d\.]+)/.exec(e):Ee?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ze?/WebKit\/(\S+)/.exec(e):Ie?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ae&&(De=Ae?Ae[1]:""),Ee){var Pe=Ne();if(null!=Pe&&Pe>parseFloat(De)){xe=String(Pe);break e}}xe=De}var Re,Oe={};function Le(){return function(e){var t=Oe;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ge(String(xe)).split("."),n=ge("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ke(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ke(0==a[2].length,0==o[2].length)||ke(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(J.document&&Ee){var Me=Ne();Re=Me||(parseInt(xe,10)||void 0)}else Re=void 0;var Fe=Re;function Ue(e,t){if(pe.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ce){e:{try{be(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ve[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ue.X.h.call(this)}}ce(Ue,pe);var Ve={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function je(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Be,this.ba=this.ea=!1}function ze(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function We(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ke(e){var t={};for(var n in e)t[n]=e[n];return t}var He="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<He.length;a++)n=He[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qe(e){this.src=e,this.g={},this.h=0}function Ye(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=fe(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ze(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $e(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Qe.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=$e(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new je(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Xe="closure_lm_"+(1e6*Math.random()|0),Je={};function et(e,t,n,r,i){if(r&&r.once)return nt(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)et(e,t[a],n,r,i);return null}return n=ct(n),e&&e[qe]?e.N(t,n,ne(r)?!!r.capture:!!r,i):tt(e,t,n,!1,r,i)}function tt(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ne(i)?!!i.capture:!!i,u=ut(e);if(u||(e[Xe]=u=new Qe(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ot;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ye||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(at(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function nt(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)nt(e,t[a],n,r,i);return null}return n=ct(n),e&&e[qe]?e.O(t,n,ne(r)?!!r.capture:!!r,i):tt(e,t,n,!0,r,i)}function rt(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)rt(e,t[a],n,r,i);else r=ne(r)?!!r.capture:!!r,n=ct(n),e&&e[qe]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$e(a=e.g[t],n,r,i))&&(ze(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ut(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$e(t,n,r,i)),(n=-1<e?t[e]:null)&&it(n))}function it(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[qe])Ye(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(at(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ut(t))?(Ye(n,e),0==n.h&&(n.src=null,t[Xe]=null)):ze(e)}}}function at(e){return e in Je?Je[e]:Je[e]="on"+e}function ot(e,t){if(e.ba)e=!0;else{t=new Ue(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&it(e),e=n.call(r,t)}return e}function ut(e){return(e=e[Xe])instanceof Qe?e:null}var st="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(e){return"function"===typeof e?e:(e[st]||(e[st]=function(t){return e.handleEvent(t)}),e[st])}function lt(){le.call(this),this.i=new Qe(this),this.P=this,this.I=null}function ht(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new pe(t,e);else if(t instanceof pe)t.target=t.target||e;else{var i=t;Ge(t=new pe(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ft(o,r,!0,t)&&i}if(i=ft(o=t.g=e,r,!0,t)&&i,i=ft(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ft(o=t.g=n[a],r,!1,t)&&i}function ft(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Ye(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ce(lt,le),lt.prototype[qe]=!0,lt.prototype.removeEventListener=function(e,t,n,r){rt(this,e,t,n,r)},lt.prototype.M=function(){if(lt.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ze(n[r]);delete t.g[e],t.h--}}this.I=null},lt.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},lt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var dt=J.JSON.stringify;function vt(){var e=bt,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var pt,yt=function(){function e(){(0,C.Z)(this,e),this.h=this.g=null}return(0,Z.Z)(e,[{key:"add",value:function(e,t){var n=mt.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),mt=new(function(){function e(t,n){(0,C.Z)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,Z.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new gt}),(function(e){return e.reset()})),gt=function(){function e(){(0,C.Z)(this,e),this.next=this.g=this.h=null}return(0,Z.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function kt(e){J.setTimeout((function(){throw e}),0)}function _t(e,t){pt||function(){var e=J.Promise.resolve(void 0);pt=function(){e.then(xt)}}(),wt||(pt(),wt=!0),bt.add(e,t)}var wt=!1,bt=new yt;function xt(){for(var e;e=vt();){try{e.h.call(e.g)}catch(n){kt(n)}var t=mt;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}wt=!1}function It(e,t){lt.call(this),this.h=e||1,this.g=t||J,this.j=ue(this.lb,this),this.l=Date.now()}function Et(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function St(e,t,n){if("function"===typeof e)n&&(e=ue(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ue(e.handleEvent,e)}return 2147483647<Number(t)?-1:J.setTimeout(e,t||0)}function Tt(e){e.g=St((function(){e.g=null,e.i&&(e.i=!1,Tt(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ce(It,lt),(B=It.prototype).ca=!1,B.R=null,B.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ht(this,"tick"),this.ca&&(Et(this),this.start()))}},B.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},B.M=function(){It.X.M.call(this),Et(this),delete this.g};var Ct=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,Z.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Tt(this)}},{key:"M",value:function(){(0,H.Z)((0,G.Z)(n.prototype),"M",this).call(this),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(le);function Zt(e){le.call(this),this.h=e,this.g={}}ce(Zt,le);var Nt=[];function Dt(e,t,n,r){Array.isArray(n)||(n&&(Nt[0]=n.toString()),n=Nt);for(var i=0;i<n.length;i++){var a=et(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function At(e){We(e.g,(function(e,t){this.g.hasOwnProperty(t)&&it(e)}),e),e.g={}}function Pt(){this.g=!0}function Rt(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return dt(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Zt.prototype.M=function(){Zt.X.M.call(this),At(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pt.prototype.Aa=function(){this.g=!1},Pt.prototype.info=function(){};var Ot={},Lt=null;function Mt(){return Lt=Lt||new lt}function Ft(e){pe.call(this,Ot.Pa,e)}function Ut(e){var t=Mt();ht(t,new Ft(t,e))}function Vt(e,t){pe.call(this,Ot.STAT_EVENT,e),this.stat=t}function qt(e){var t=Mt();ht(t,new Vt(t,e))}function Bt(e,t){pe.call(this,Ot.Qa,e),this.size=t}function jt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return J.setTimeout((function(){e()}),t)}Ot.Pa="serverreachability",ce(Ft,pe),Ot.STAT_EVENT="statevent",ce(Vt,pe),Ot.Qa="timingevent",ce(Bt,pe);var zt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Wt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Kt(){}function Ht(e){return e.h||(e.h=e.i())}function Gt(){}Kt.prototype.h=null;var Qt,Yt={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function $t(){pe.call(this,"d")}function Xt(){pe.call(this,"c")}function Jt(){}function en(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Zt(this),this.O=nn,e=Te?125:void 0,this.T=new It(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new tn}function tn(){this.i=null,this.g="",this.h=!1}ce($t,pe),ce(Xt,pe),ce(Jt,Kt),Jt.prototype.g=function(){return new XMLHttpRequest},Jt.prototype.i=function(){return{}},Qt=new Jt;var nn=45e3,rn={},an={};function on(e,t,n){e.K=1,e.v=En(_n(t)),e.s=n,e.P=!0,un(e,null)}function un(e,t){e.F=Date.now(),hn(e),e.A=_n(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Fn(n.i,"t",r),e.C=0,n=e.l.H,e.h=new tn,e.g=Ur(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Ct(ue(e.La,e,e.g),e.N)),Dt(e.S,e.g,"readystatechange",e.ib),t=e.H?Ke(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Ut(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function sn(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function cn(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ln(e,n))==an){4==t&&(e.o=4,qt(14),i=!1),Rt(e.j,e.m,null,"[Incomplete Response]");break}if(r==rn){e.o=4,qt(15),Rt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Rt(e.j,e.m,r,null),yn(e,r)}sn(e)&&r!=an&&r!=rn&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,qt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Dr(t),t.K=!0,qt(11))):(Rt(e.j,e.m,n,"[Invalid Chunked Response]"),pn(e),vn(e))}function ln(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?an:(n=Number(t.substring(n,r)),isNaN(n)?rn:(r+=1)+n>t.length?an:(t=t.substr(r,n),e.C=r+n,t))}function hn(e){e.V=Date.now()+e.O,fn(e,e.O)}function fn(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=jt(ue(e.gb,e),t)}function dn(e){e.B&&(J.clearTimeout(e.B),e.B=null)}function vn(e){0==e.l.G||e.I||Rr(e.l,e)}function pn(e){dn(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Et(e.T),At(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function yn(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Kn(n.h,e)))if(!e.J&&Kn(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Pr(n),xr(n)}Nr(n),qt(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=jt(ue(n.cb,n),6e3));if(1>=Wn(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Lr(n,11)}else if((e.J||n.g==e)&&Pr(n),!me(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Hn(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,In(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Fr(r,r.H?r.ka:null,r.V),d.J){Gn(r.h,d);var v=d,p=r.J;p&&v.setTimeout(p),v.B&&(dn(v),hn(v)),r.g=d}else Zr(r);0<n.i.length&&Er(n)}else"stop"!=a[0]&&"close"!=a[0]||Lr(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Lr(n,7):br(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Ut(4)}catch(a){}}function mn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(te(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(te(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(te(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(B=en.prototype).setTimeout=function(e){this.O=e},B.ib=function(e){e=e.target;var t=this.L;t&&3==yr(e)?t.l():this.La(e)},B.La=function(e){try{if(e==this.g)e:{var t=yr(this.g),n=this.g.Ea(),r=this.g.aa();if(!(3>t)&&(3!=t||Te||this.g&&(this.h.h||this.g.fa()||mr(this.g)))){this.I||4!=t||7==n||Ut(8==n||0>=r?3:2),dn(this);var i=this.g.aa();this.Y=i;t:if(sn(this)){var a=mr(this.g);e="";var o=a.length,u=4==yr(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){pn(this),vn(this);var s="";break t}this.h.i=new J.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,qt(12),pn(this),vn(this);break e}Rt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yn(this,i)}this.P?(cn(this,t,s),Te&&this.i&&3==t&&(Dt(this.S,this.T,"tick",this.hb),this.T.start())):(Rt(this.j,this.m,s,null),yn(this,s)),4==t&&pn(this),this.i&&!this.I&&(4==t?Rr(this.l,this):(this.i=!1,hn(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,qt(12)):(this.o=0,qt(13)),pn(this),vn(this)}}}catch(t){}},B.hb=function(){if(this.g){var e=yr(this.g),t=this.g.fa();this.C<t.length&&(dn(this),cn(this,e,t),this.i&&4!=e&&hn(this))}},B.cancel=function(){this.I=!0,pn(this)},B.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ut(3),qt(17)),pn(this),this.o=2,vn(this)):fn(this,this.V-e)};var gn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kn(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kn){this.h=void 0!==t?t:e.h,wn(this,e.j),this.s=e.s,this.g=e.g,bn(this,e.m),this.l=e.l,t=e.i;var n=new Rn;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xn(this,n),this.o=e.o}else e&&(n=String(e).match(gn))?(this.h=!!t,wn(this,n[1]||"",!0),this.s=Sn(n[2]||""),this.g=Sn(n[3]||"",!0),bn(this,n[4]),this.l=Sn(n[5]||"",!0),xn(this,n[6]||"",!0),this.o=Sn(n[7]||"")):(this.h=!!t,this.i=new Rn(null,this.h))}function _n(e){return new kn(e)}function wn(e,t,n){e.j=n?Sn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xn(e,t,n){t instanceof Rn?(e.i=t,function(e,t){t&&!e.j&&(On(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ln(this,t),Fn(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Tn(t,An)),e.i=new Rn(t,e.h))}function In(e,t,n){e.i.set(t,n)}function En(e){return In(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Tn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Cn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Cn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Tn(t,Zn,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Tn(t,Zn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Tn(n,"/"==n.charAt(0)?Dn:Nn,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Tn(n,Pn)),e.join("")};var Zn=/[#\/\?@]/g,Nn=/[#\?:]/g,Dn=/[#\?]/g,An=/[#\?@]/g,Pn=/#/g;function Rn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function On(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ln(e,t){On(e),t=Un(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Mn(e,t){return On(e),t=Un(e,t),e.g.has(t)}function Fn(e,t,n){Ln(e,t),0<n.length&&(e.i=null,e.g.set(Un(e,t),de(n)),e.h+=n.length)}function Un(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(B=Rn.prototype).add=function(e,t){On(this),this.i=null,e=Un(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},B.forEach=function(e,t){On(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},B.oa=function(){On(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},B.W=function(e){On(this);var t=[];if("string"===typeof e)Mn(this,e)&&(t=t.concat(this.g.get(Un(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},B.set=function(e,t){return On(this),this.i=null,Mn(this,e=Un(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},B.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},B.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Vn=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.h=t,this.g=n}));function qn(e){this.l=e||jn,J.PerformanceNavigationTiming?e=0<(e=J.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(J.g&&J.g.Ga&&J.g.Ga()&&J.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bn,jn=10;function zn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wn(e){return e.h?1:e.g?e.g.size:0}function Kn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hn(e,t){e.g?e.g.add(t):e.h=t}function Gn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Qn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=(0,K.Z)(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return de(e.i)}function Yn(){}function $n(){this.g=new Yn}function Xn(e,t,n){var r=n||"";try{mn(e,(function(e,n){var i=e;ne(e)&&(i=dt(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function er(e){this.l=e.ac||null,this.j=e.jb||!1}function tr(e,t){lt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=nr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qn.prototype.cancel=function(){if(this.i=Qn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=(0,K.Z)(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Yn.prototype.stringify=function(e){return J.JSON.stringify(e,void 0)},Yn.prototype.parse=function(e){return J.JSON.parse(e,void 0)},ce(er,Kt),er.prototype.g=function(){return new tr(this.l,this.j)},er.prototype.i=(Bn={},function(){return Bn}),ce(tr,lt);var nr=0;function rr(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function ir(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ar(e)}function ar(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(B=tr.prototype).open=function(e,t){if(this.readyState!=nr)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ar(this)},B.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||J).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ir(this)),this.readyState=nr},B.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ar(this)),this.g&&(this.readyState=3,ar(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof J.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rr(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},B.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ir(this):ar(this),3==this.readyState&&rr(this)}},B.Va=function(e){this.g&&(this.response=this.responseText=e,ir(this))},B.Ua=function(e){this.g&&(this.response=e,ir(this))},B.ga=function(){this.g&&ir(this)},B.setRequestHeader=function(e,t){this.v.append(e,t)},B.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},B.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var or=J.JSON.parse;function ur(e){lt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sr,this.K=this.L=!1}ce(ur,lt);var sr="",cr=/^https?$/i,lr=["POST","PUT"];function hr(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fr(e),vr(e)}function fr(e){e.D||(e.D=!0,ht(e,"complete"),ht(e,"error"))}function dr(e){if(e.h&&"undefined"!=typeof X&&(!e.C[1]||4!=yr(e)||2!=e.aa()))if(e.v&&4==yr(e))St(e.Ha,0,e);else if(ht(e,"readystatechange"),4==yr(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(gn)[1]||null;if(!a&&J.self&&J.self.location){var o=J.self.location.protocol;a=o.substr(0,o.length-1)}i=!cr.test(a?a.toLowerCase():"")}t=i}if(t)ht(e,"complete"),ht(e,"success");else{e.m=6;try{var u=2<yr(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",fr(e)}}finally{vr(e)}}}function vr(e,t){if(e.g){pr(e);var n=e.g,r=e.C[0]?ee:null;e.g=null,e.C=null,t||ht(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pr(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(J.clearTimeout(e.A),e.A=null)}function yr(e){return e.g?e.g.readyState:0}function mr(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case sr:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ti){return null}}function gr(e){var t="";return We(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function kr(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gr(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):In(e,t,n))}function _r(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function wr(e){this.Ca=0,this.i=[],this.j=new Pt,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=_r("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=_r("baseRetryDelayMs",5e3,e),this.bb=_r("retryDelaySeedMs",1e4,e),this.$a=_r("forwardChannelMaxRetries",2,e),this.ta=_r("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new qn(e&&e.concurrentRequestLimit),this.Fa=new $n,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function br(e){if(Ir(e),3==e.G){var t=e.U++,n=_n(e.F);In(n,"SID",e.I),In(n,"RID",t),In(n,"TYPE","terminate"),Tr(e,n),(t=new en(e,e.j,t,void 0)).K=2,t.v=En(_n(n)),n=!1,J.navigator&&J.navigator.sendBeacon&&(n=J.navigator.sendBeacon(t.v.toString(),"")),!n&&J.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ur(t.l,null),t.g.da(t.v)),t.F=Date.now(),hn(t)}Mr(e)}function xr(e){e.g&&(Dr(e),e.g.cancel(),e.g=null)}function Ir(e){xr(e),e.u&&(J.clearTimeout(e.u),e.u=null),Pr(e),e.h.cancel(),e.m&&("number"===typeof e.m&&J.clearTimeout(e.m),e.m=null)}function Er(e){zn(e.h)||e.m||(e.m=!0,_t(e.Ja,e),e.C=0)}function Sr(e,t){var n;n=t?t.m:e.U++;var r=_n(e.F);In(r,"SID",e.I),In(r,"RID",n),In(r,"AID",e.T),Tr(e,r),e.o&&e.s&&kr(r,e.o,e.s),n=new en(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Cr(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Hn(e.h,n),on(n,r,t)}function Tr(e,t){e.ia&&We(e.ia,(function(e,n){In(t,n,e)})),e.l&&mn({},(function(e,n){In(t,n,e)}))}function Cr(e,t,n){n=Math.min(e.i.length,n);var r=e.l?ue(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Xn(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Zr(e){e.g||e.u||(e.Z=1,_t(e.Ia,e),e.A=0)}function Nr(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=jt(ue(e.Ia,e),Or(e,e.A)),e.A++,!0)}function Dr(e){null!=e.B&&(J.clearTimeout(e.B),e.B=null)}function Ar(e){e.g=new en(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=_n(e.sa);In(t,"RID","rpc"),In(t,"SID",e.I),In(t,"CI",e.L?"0":"1"),In(t,"AID",e.T),In(t,"TYPE","xmlhttp"),Tr(e,t),e.o&&e.s&&kr(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=En(_n(t)),n.s=null,n.P=!0,un(n,e)}function Pr(e){null!=e.v&&(J.clearTimeout(e.v),e.v=null)}function Rr(e,t){var n=null;if(e.g==t){Pr(e),Dr(e),e.g=null;var r=2}else{if(!Kn(e.h,t))return;n=t.D,Gn(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ht(r=Mt(),new Bt(r,n,t,i)),Er(e)}else Zr(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Wn(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=jt(ue(e.Ja,e,t),Or(e,e.C)),e.C++,!0))}(e,t)||2==r&&Nr(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Lr(e,5);break;case 4:Lr(e,10);break;case 3:Lr(e,6);break;default:Lr(e,2)}}function Or(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Lr(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=ue(e.kb,e);n||(n=new kn("//www.google.com/images/cleardot.gif"),J.location&&"http"==J.location.protocol||wn(n,"https"),En(n)),function(e,t){var n=new Pt;if(J.Image){var r=new Image;r.onload=se(Jn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=se(Jn,n,r,"TestLoadImage: error",!1,t),r.onabort=se(Jn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=se(Jn,n,r,"TestLoadImage: timeout",!1,t),J.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qt(2);e.G=0,e.l&&e.l.va(t),Mr(e),Ir(e)}function Mr(e){if(e.G=0,e.la=[],e.l){var t=Qn(e.h);0==t.length&&0==e.i.length||(ve(e.la,t),ve(e.la,e.i),e.h.i.length=0,de(e.i),e.i.length=0),e.l.ua()}}function Fr(e,t,n){var r=n instanceof kn?_n(n):new kn(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),bn(r,r.m);else{var i=J.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new kn(null,void 0);r&&wn(a,r),t&&(a.g=t),i&&bn(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&In(r,n,t),In(r,"VER",e.ma),Tr(e,r),r}function Ur(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new ur(new er({jb:!0})):new ur(e.ra)).Ka(e.H),t}function Vr(){}function qr(){if(Ee&&!(10<=Number(Fe)))throw Error("Environmental error: no available transport.")}function Br(e,t){lt.call(this),this.g=new wr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!me(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!me(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wr(this)}function jr(e){$t.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zr(){Xt.call(this),this.status=1}function Wr(e){this.g=e}(B=ur.prototype).Ka=function(e){this.L=e},B.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qt.g(),this.C=this.u?Ht(this.u):Ht(Qt),this.g.onreadystatechange=ue(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void hr(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=(0,K.Z)(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=J.FormData&&e instanceof J.FormData,!(0<=fe(lr,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=(0,K.Z)(n);try{for(l.s();!(s=l.n()).done;){var h=(0,c.Z)(s.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(v){l.e(v)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pr(this),0<this.B&&((this.K=function(e){return Ee&&Le()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ue(this.qa,this)):this.A=St(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){hr(this,u)}},B.qa=function(){"undefined"!=typeof X&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ht(this,"timeout"),this.abort(8))},B.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ht(this,"complete"),ht(this,"abort"),vr(this))},B.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vr(this,!0)),ur.X.M.call(this)},B.Ha=function(){this.s||(this.F||this.v||this.l?dr(this):this.fb())},B.fb=function(){dr(this)},B.aa=function(){try{return 2<yr(this)?this.g.status:-1}catch(Bn){return-1}},B.fa=function(){try{return this.g?this.g.responseText:""}catch(Bn){return""}},B.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),or(t)}},B.Ea=function(){return this.m},B.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(B=wr.prototype).ma=8,B.G=1,B.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new en(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Ge(n=Ke(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Cr(this,t,r),In(i=_n(this.F),"RID",e),In(i,"CVER",22),this.D&&In(i,"X-HTTP-Session-Id",this.D),Tr(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(gr(n)))+"&"+r:this.o&&kr(i,this.o,n)),Hn(this.h,t),this.Ya&&In(i,"TYPE","init"),this.O?(In(i,"$req",r),In(i,"SID","null"),t.Z=!0,on(t,i,null)):on(t,i,r),this.G=2}}else 3==this.G&&(e?Sr(this,e):0==this.i.length||zn(this.h)||Sr(this))},B.Ia=function(){if(this.u=null,Ar(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=jt(ue(this.eb,this),e)}},B.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,qt(10),xr(this),Ar(this))},B.cb=function(){null!=this.v&&(this.v=null,xr(this),Nr(this),qt(19))},B.kb=function(e){e?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))},(B=Vr.prototype).xa=function(){},B.wa=function(){},B.va=function(){},B.ua=function(){},B.Ra=function(){},qr.prototype.g=function(e,t){return new Br(e,t)},ce(Br,lt),Br.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;qt(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Fr(e,null,e.V),Er(e)},Br.prototype.close=function(){br(this.g)},Br.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=dt(e),e=n);t.i.push(new Vn(t.ab++,e)),3==t.G&&Er(t)},Br.prototype.M=function(){this.g.l=null,delete this.j,br(this.g),delete this.g,Br.X.M.call(this)},ce(jr,$t),ce(zr,Xt),ce(Wr,Vr),Wr.prototype.xa=function(){ht(this.g,"a")},Wr.prototype.wa=function(e){ht(this.g,new jr(e))},Wr.prototype.va=function(e){ht(this.g,new zr(e))},Wr.prototype.ua=function(){ht(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,Br.prototype.send=Br.prototype.u,Br.prototype.open=Br.prototype.m,Br.prototype.close=Br.prototype.close,zt.NO_ERROR=0,zt.TIMEOUT=8,zt.HTTP_ERROR=6,Wt.COMPLETE="complete",Gt.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",lt.prototype.listen=lt.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.Oa,ur.prototype.getLastErrorCode=ur.prototype.Ea,ur.prototype.getStatus=ur.prototype.aa,ur.prototype.getResponseJson=ur.prototype.Sa,ur.prototype.getResponseText=ur.prototype.fa,ur.prototype.send=ur.prototype.da,ur.prototype.setWithCredentials=ur.prototype.Ka;var Kr=$.createWebChannelTransport=function(){return new qr},Hr=$.getStatEventTarget=function(){return Mt()},Gr=$.ErrorCode=zt,Qr=$.EventType=Wt,Yr=$.Event=Ot,$r=$.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xr=$.FetchXmlHttpFactory=er,Jr=$.WebChannel=Gt,ei=$.XhrIo=ur,ti="@firebase/firestore",ni=function(){function e(t){(0,C.Z)(this,e),this.uid=t}return(0,Z.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");var ri="9.12.1",ii=new P.Yd("@firebase/firestore");function ai(){return ii.logLevel}function oi(e){if(ii.logLevel<=P.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ci);ii.debug.apply(ii,["Firestore (".concat(ri,"): ").concat(e)].concat((0,Q.Z)(i)))}}function ui(e){if(ii.logLevel<=P.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ci);ii.error.apply(ii,["Firestore (".concat(ri,"): ").concat(e)].concat((0,Q.Z)(i)))}}function si(e){if(ii.logLevel<=P.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ci);ii.warn.apply(ii,["Firestore (".concat(ri,"): ").concat(e)].concat((0,Q.Z)(i)))}}function ci(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ri,") INTERNAL ASSERTION FAILED: ")+e;throw ui(t),new Error(t)}function hi(e,t){e||li()}function fi(e,t){return e}var di={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},vi=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,Z.Z)(n)}(N.ZR),pi=(0,Z.Z)((function e(){var t=this;(0,C.Z)(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),yi=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),mi=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ni.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),gi=function(){function e(t){(0,C.Z)(this,e),this.token=t,this.changeListener=null}return(0,Z.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ki=function(){function e(t){(0,C.Z)(this,e),this.t=t,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,Z.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new pi;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new pi,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=o;e.enqueueRetryable((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){oi("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(oi("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pi)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(oi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(hi("string"==typeof n.accessToken),new yi(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return hi(null===e||"string"==typeof e),new ni(e)}}]),e}(),_i=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.p=new Map}return(0,Z.Z)(e,[{key:"I",value:function(){return this.g?this.g():(hi(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),wi=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return(0,Z.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new _i(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ni.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bi=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),xi=function(){function e(t){(0,C.Z)(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return(0,Z.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&oi("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,oi("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){oi("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):oi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(hi("string"==typeof t.token),e.A=t.token,new bi(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Ii(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ei=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ii(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Si(e,t){return e<t?-1:e>t?1:0}function Ti(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ci(e){return e+"\0"}var Zi=function(){function e(t,n){if((0,C.Z)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new vi(di.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vi(di.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new vi(di.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vi(di.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,Z.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Si(this.nanoseconds,e.nanoseconds):Si(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ni=function(){function e(t){(0,C.Z)(this,e),this.timestamp=t}return(0,Z.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Zi(0,0))}},{key:"max",value:function(){return new e(new Zi(253402300799,999999999))}}]),e}(),Di=function(){function e(t,n,r){(0,C.Z)(this,e),void 0===n?n=0:n>t.length&&li(),void 0===r?r=t.length-n:r>t.length-n&&li(),this.segments=t,this.offset=n,this.len=r}return(0,Z.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ai=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new vi(di.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,Q.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Di),Pi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ri=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Pi.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new vi(di.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new vi(di.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new vi(di.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new vi(di.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Di),Oi=function(){function e(t){(0,C.Z)(this,e),this.path=t}return(0,Z.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ai.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ai.fromString(t))}},{key:"fromName",value:function(t){return new e(Ai.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ai.emptyPath())}},{key:"comparator",value:function(e,t){return Ai.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ai(t.slice()))}}]),e}(),Li=(0,Z.Z)((function e(t,n,r,i){(0,C.Z)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Mi(e){return e.fields.find((function(e){return 2===e.kind}))}function Fi(e){return e.fields.filter((function(e){return 2!==e.kind}))}Li.UNKNOWN_ID=-1;var Ui=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.fieldPath=t,this.kind=n}));var Vi=function(){function e(t,n){(0,C.Z)(this,e),this.sequenceNumber=t,this.offset=n}return(0,Z.Z)(e,null,[{key:"empty",value:function(){return new e(0,ji.min())}}]),e}();function qi(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ni.fromTimestamp(1e9===r?new Zi(n+1,0):new Zi(n,r));return new ji(i,Oi.empty(),t)}function Bi(e){return new ji(e.readTime,e.key,-1)}var ji=function(){function e(t,n,r){(0,C.Z)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,Z.Z)(e,null,[{key:"min",value:function(){return new e(Ni.min(),Oi.empty(),-1)}},{key:"max",value:function(){return new e(Ni.max(),Oi.empty(),-1)}}]),e}();function zi(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Oi.comparator(e.documentKey,t.documentKey))?n:Si(e.largestBatchId,t.largestBatchId)}var Wi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ki=function(){function e(){(0,C.Z)(this,e),this.onCommittedListeners=[]}return(0,Z.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Hi(e){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===di.FAILED_PRECONDITION&&t.message===Wi){e.next=2;break}throw t;case 2:oi("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}var Qi=function(){function e(t){var n=this;(0,C.Z)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,Z.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&li(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=(0,K.Z)(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Yi=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new pi,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Ji(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=ia(e.target.error);r.P.reject(new Ji(t,n))}}return(0,Z.Z)(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(oi("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ta(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ji(n,t)}}}]),e}(),$i=function(){function e(t,n,r){(0,C.Z)(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D((0,N.z$)())&&ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,Z.Z)(e,[{key:"F",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return oi("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ji(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new vi(di.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new vi(di.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ji(t,n))},i.onupgradeneeded=function(e){oi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){oi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,u,s,c,l,h=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,u=0;case 2:return++u,e.prev=3,e.delegateYield((0,a.Z)().mark((function e(){var n,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.F(t);case 2:return h.db=e.sent,n=Yi.open(h.db,t,o?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Qi.reject(e)})).toPromise(),u.catch((function(){})),e.next=7,n.v;case 7:return e.t0=u,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),c=e.t1,l="FirebaseError"!==c.name&&u<3,oi("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),l){e.next=15;break}return e.abrupt("return",Promise.reject(c));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return oi("SimpleDb","Removing database:",e),na(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!(0,N.hl)())return!1;if(e.N())return!0;var t=(0,N.z$)(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Business-management-appl",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Xi=function(){function e(t){(0,C.Z)(this,e),this.U=t,this.q=!1,this.K=null}return(0,Z.Z)(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return na(this.U.delete())}}]),e}(),Ji=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,di.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return(0,Z.Z)(n)}(vi);function ea(e){return"IndexedDbTransactionError"===e.name}var ta=function(){function e(t){(0,C.Z)(this,e),this.store=t}return(0,Z.Z)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(oi("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(oi("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),na(n)}},{key:"add",value:function(e){return oi("SimpleDb","ADD",this.store.name,e,e),na(this.store.add(e))}},{key:"get",value:function(e){var t=this;return na(this.store.get(e)).next((function(n){return void 0===n&&(n=null),oi("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return oi("SimpleDb","DELETE",this.store.name,e),na(this.store.delete(e))}},{key:"count",value:function(){return oi("SimpleDb","COUNT",this.store.name),na(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Qi((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Qi((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){oi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Qi((function(n,r){t.onerror=function(e){var t=ia(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Qi((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Xi(i),o=t(i.primaryKey,i.value,a);if(o instanceof Qi){var u=o.catch((function(e){return a.done(),Qi.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Qi.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function na(e){return new Qi((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ia(e.target.error);n(t)}}))}var ra=!1;function ia(e){var t=$i.D((0,N.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new vi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ra||(ra=!0,setTimeout((function(){throw r}),0)),r}}return e}var aa=function(){function e(t,n){(0,C.Z)(this,e),this.asyncQueue=t,this.et=n,this.task=null}return(0,Z.Z)(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;oi("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=oi,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!ea(e.t4)){e.next=17;break}oi("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Hi(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),oa=function(){function e(t,n){(0,C.Z)(this,e),this.localStore=t,this.persistence=n}return(0,Z.Z)(e,[{key:"st",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n=this,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Qi.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return oi("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return oi("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Bi(t);zi(r,n)>0&&(n=r)})),new ji(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ua=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return(0,Z.Z)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function sa(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ca(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function la(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}ua.at=-1;var ha=function(){function e(t,n){(0,C.Z)(this,e),this.comparator=t,this.root=n||da.EMPTY}return(0,Z.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,da.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,da.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new fa(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new fa(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new fa(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new fa(this.root,e,this.comparator,!0)}}]),e}(),fa=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,Z.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),da=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,Z.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw li();if(this.right.isRed())throw li();var e=this.left.check();if(e!==this.right.check())throw li();return e+(this.isRed()?0:1)}}]),e}();da.EMPTY=null,da.RED=!0,da.BLACK=!1,da.EMPTY=new(function(){function e(){(0,C.Z)(this,e),this.size=0}return(0,Z.Z)(e,[{key:"key",get:function(){throw li()}},{key:"value",get:function(){throw li()}},{key:"color",get:function(){throw li()}},{key:"left",get:function(){throw li()}},{key:"right",get:function(){throw li()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new da(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var va=function(){function e(t){(0,C.Z)(this,e),this.comparator=t,this.data=new ha(this.comparator)}return(0,Z.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new pa(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new pa(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),pa=function(){function e(t){(0,C.Z)(this,e),this.iter=t}return(0,Z.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ya(e){return e.hasNext()?e.getNext():void 0}var ma=function(){function e(t){(0,C.Z)(this,e),this.fields=t,t.sort(Ri.comparator)}return(0,Z.Z)(e,[{key:"unionWith",value:function(t){var n,r=new va(Ri.comparator),i=(0,K.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=(0,K.Z)(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=(0,K.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ti(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var ga=function(e){function t(e){(0,C.Z)(this,t),this.binaryString=e}return(0,Z.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Si(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);ga.EMPTY_BYTE_STRING=new ga("");var ka=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(e){if(hi(!!e),"string"==typeof e){var t=0,n=ka.exec(e);if(hi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wa(e.seconds),nanos:wa(e.nanos)}}function wa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ba(e){return"string"==typeof e?ga.fromBase64String(e):ga.fromUint8Array(e)}function xa(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ia(e){var t=e.mapValue.fields.__previous_value__;return xa(t)?Ia(t):t}function Ea(e){var t=_a(e.mapValue.fields.__local_write_time__.timestampValue);return new Zi(t.seconds,t.nanos)}var Sa=(0,Z.Z)((function e(t,n,r,i,a,o,u,s){(0,C.Z)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ta=function(){function e(t,n){(0,C.Z)(this,e),this.projectId=t,this.database=n||"(default)"}return(0,Z.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ca(e){return null==e}function Za(e){return 0===e&&1/e==-1/0}function Na(e){return"number"==typeof e&&Number.isInteger(e)&&!Za(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Da={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Aa={nullValue:"NULL_VALUE"};function Pa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xa(e)?4:Ha(e)?9007199254740991:10:li()}function Ra(e,t){if(e===t)return!0;var n=Pa(e);if(n!==Pa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ea(e).isEqual(Ea(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=_a(e.timestampValue),r=_a(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ba(e.bytesValue).isEqual(ba(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wa(e.geoPointValue.latitude)===wa(t.geoPointValue.latitude)&&wa(e.geoPointValue.longitude)===wa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wa(e.integerValue)===wa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=wa(e.doubleValue),r=wa(t.doubleValue);return n===r?Za(n)===Za(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ti(e.arrayValue.values||[],t.arrayValue.values||[],Ra);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sa(n)!==sa(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ra(n[i],r[i])))return!1;return!0}(e,t);default:return li()}}function Oa(e,t){return void 0!==(e.values||[]).find((function(e){return Ra(e,t)}))}function La(e,t){if(e===t)return 0;var n=Pa(e),r=Pa(t);if(n!==r)return Si(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Si(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=wa(e.integerValue||e.doubleValue),r=wa(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ma(e.timestampValue,t.timestampValue);case 4:return Ma(Ea(e),Ea(t));case 5:return Si(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ba(e),r=ba(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Si(n[i],r[i]);if(0!==a)return a}return Si(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Si(wa(e.latitude),wa(t.latitude));return 0!==n?n:Si(wa(e.longitude),wa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=La(n[i],r[i]);if(a)return a}return Si(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Da.mapValue&&t===Da.mapValue)return 0;if(e===Da.mapValue)return 1;if(t===Da.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Si(r[o],a[o]);if(0!==u)return u;var s=La(n[r[o]],i[a[o]]);if(0!==s)return s}return Si(r.length,a.length)}(e.mapValue,t.mapValue);default:throw li()}}function Ma(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Si(e,t);var n=_a(e),r=_a(t),i=Si(n.seconds,r.seconds);return 0!==i?i:Si(n.nanos,r.nanos)}function Fa(e){return Ua(e)}function Ua(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=_a(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ba(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Oi.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=(0,K.Z)(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ua(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n=Object.keys(e.fields||{}).sort(),r="{",i=!0,a=(0,K.Z)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;i?i=!1:r+=",",r+="".concat(o,":").concat(Ua(e.fields[o]))}}catch(u){a.e(u)}finally{a.f()}return r+"}"}(e.mapValue):li();var t,n}function Va(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function qa(e){return!!e&&"integerValue"in e}function Ba(e){return!!e&&"arrayValue"in e}function ja(e){return!!e&&"nullValue"in e}function za(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wa(e){return!!e&&"mapValue"in e}function Ka(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ca(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ka(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ka(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ha(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ga(e){return"nullValue"in e?Aa:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Va(Ta.empty(),Oi.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:li()}function Qa(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Va(Ta.empty(),Oi.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Da:li()}function Ya(e,t){var n=La(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function $a(e,t){var n=La(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Xa=function(){function e(t){(0,C.Z)(this,e),this.value=t}return(0,Z.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Wa(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}},{key:"setAll",value:function(e){var t=this,n=Ri.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ka(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Wa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ra(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Wa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ca(t,(function(t,n){return e[t]=n}));var r,i=(0,K.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ka(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ja(e){var t=[];return ca(e.fields,(function(e,n){var r=new Ri([e]);if(Wa(n)){var i=Ja(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=(0,K.Z)(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ma(t)}var eo=function(){function e(t,n,r,i,a,o){(0,C.Z)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return(0,Z.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Xa.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Xa.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ni.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ni.min(),Ni.min(),Xa.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ni.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ni.min(),Xa.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ni.min(),Xa.empty(),2)}}]),e}(),to=(0,Z.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,C.Z)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function no(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new to(e,t,n,r,i,a,o)}function ro(e){var t=fi(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Fa(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ca(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Fa(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Fa(e)})).join(",")),t.ht=n}return t.ht}function io(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!wo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ra(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xo(e.startAt,t.startAt)&&xo(e.endAt,t.endAt)}function ao(e){return Oi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function oo(e,t){return e.filters.filter((function(e){return e instanceof co&&e.field.isEqual(t)}))}function uo(e,t,n){var r,i=Aa,a=!0,o=(0,K.Z)(oo(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Aa,c=!0;switch(u.op){case"<":case"<=":s=Ga(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Aa}Ya({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Ya({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function so(e,t,n){var r,i=Da,a=!0,o=(0,K.Z)(oo(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Da,c=!0;switch(u.op){case">=":case">":s=Qa(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Da}$a({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];$a({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var co=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return(0,Z.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(La(t,this.value)):null!==t&&Pa(this.value)===Pa(t)&&this.ft(La(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return li()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new lo(e,t,r):"array-contains"===t?new po(e,r):"in"===t?new yo(e,r):"not-in"===t?new mo(e,r):"array-contains-any"===t?new go(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new ho(e,n):new fo(e,n)}}]),n}(function(){return(0,Z.Z)((function e(){(0,C.Z)(this,e)}))}()),lo=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this,e,r,i)).key=Oi.fromName(i.referenceValue),a}return(0,Z.Z)(n,[{key:"matches",value:function(e){var t=Oi.comparator(e.key,this.key);return this.ft(t)}}]),n}(co),ho=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,"in",r)).keys=vo("in",r),i}return(0,Z.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(co),fo=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,"not-in",r)).keys=vo("not-in",r),i}return(0,Z.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(co);function vo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Oi.fromName(e.referenceValue)}))}var po=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){return(0,C.Z)(this,n),t.call(this,e,"array-contains",r)}return(0,Z.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ba(t)&&Oa(t.arrayValue,this.value)}}]),n}(co),yo=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){return(0,C.Z)(this,n),t.call(this,e,"in",r)}return(0,Z.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Oa(this.value.arrayValue,t)}}]),n}(co),mo=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){return(0,C.Z)(this,n),t.call(this,e,"not-in",r)}return(0,Z.Z)(n,[{key:"matches",value:function(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Oa(this.value.arrayValue,t)}}]),n}(co),go=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){return(0,C.Z)(this,n),t.call(this,e,"array-contains-any",r)}return(0,Z.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ba(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Oa(t.value.arrayValue,e)}))}}]),n}(co),ko=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.position=t,this.inclusive=n})),_o=(0,Z.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,C.Z)(this,e),this.field=t,this.dir=n}));function wo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function bo(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Oi.comparator(Oi.fromName(o.referenceValue),n.key):La(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function xo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ra(e.position[n],t.position[n]))return!1;return!0}var Io=(0,Z.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,C.Z)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function Eo(e,t,n,r,i,a,o,u){return new Io(e,t,n,r,i,a,o,u)}function So(e){return new Io(e)}function To(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Co(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Zo(e){var t,n=(0,K.Z)(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function No(e){return null!==e.collectionGroup}function Do(e){var t=fi(e);if(null===t._t){t._t=[];var n=Zo(t),r=Co(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new _o(n)),t._t.push(new _o(Ri.keyField(),"asc"));else{var i,a=!1,o=(0,K.Z)(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new _o(Ri.keyField(),s))}}}return t._t}function Ao(e){var t=fi(e);if(!t.wt)if("F"===t.limitType)t.wt=no(t.path,t.collectionGroup,Do(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=(0,K.Z)(Do(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new _o(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ko(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ko(t.startAt.position,t.startAt.inclusive):null;t.wt=no(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Po(e,t,n){return new Io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ro(e,t){return io(Ao(e),Ao(t))&&e.limitType===t.limitType}function Oo(e){return"".concat(ro(Ao(e)),"|lt:").concat(e.limitType)}function Lo(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Fa(t.value));var t})).join(", "),"]")),Ca(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Fa(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Fa(e)})).join(",")),"Target(".concat(t,")")}(Ao(e)),"; limitType=").concat(e.limitType,")")}function Mo(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Oi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=(0,K.Z)(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=(0,K.Z)(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=bo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Do(e),t))&&!(e.endAt&&!function(e,t,n){var r=bo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Do(e),t))}(e,t)}function Fo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Uo(e){return function(t,n){var r,i=!1,a=(0,K.Z)(Do(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Vo(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Vo(e,t,n){var r=e.field.isKeyField()?Oi.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?La(r,i):li()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return li()}}function qo(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Za(t)?"-0":t}}function Bo(e){return{integerValue:""+e}}function jo(e,t){return Na(t)?Bo(t):qo(e,t)}var zo=(0,Z.Z)((function e(){(0,C.Z)(this,e),this._=void 0}));function Wo(e,t,n){return e instanceof Go?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qo?Yo(e,t):e instanceof $o?Xo(e,t):function(e,t){var n=Ho(e,t),r=eu(n)+eu(e.yt);return qa(n)&&qa(e.yt)?Bo(r):qo(e.It,r)}(e,t)}function Ko(e,t,n){return e instanceof Qo?Yo(e,t):e instanceof $o?Xo(e,t):n}function Ho(e,t){return e instanceof Jo?qa(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Go=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n)}(zo),Qo=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,Z.Z)(n)}(zo);function Yo(e,t){var n,r=tu(t),i=(0,K.Z)(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ra(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $o=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).elements=e,r}return(0,Z.Z)(n)}(zo);function Xo(e,t){var n,r=tu(t),i=(0,K.Z)(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ra(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Jo=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).It=e,i.yt=r,i}return(0,Z.Z)(n)}(zo);function eu(e){return wa(e.integerValue||e.doubleValue)}function tu(e){return Ba(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var nu=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.field=t,this.transform=n}));var ru=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.version=t,this.transformResults=n})),iu=function(){function e(t,n){(0,C.Z)(this,e),this.updateTime=t,this.exists=n}return(0,Z.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function au(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ou=(0,Z.Z)((function e(){(0,C.Z)(this,e)}));function uu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ku(e.key,iu.none()):new fu(e.key,e.data,iu.none());var n,r=e.data,i=Xa.empty(),a=new va(Ri.comparator),o=(0,K.Z)(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new du(e.key,i,new ma(a.toArray()),iu.none())}function su(e,t,n){e instanceof fu?function(e,t,n){var r=e.value.clone(),i=pu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof du?function(e,t,n){if(au(e.precondition,t)){var r=pu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function cu(e,t,n,r){return e instanceof fu?function(e,t,n,r){if(!au(e.precondition,t))return n;var i=e.value.clone(),a=yu(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof du?function(e,t,n,r){if(!au(e.precondition,t))return n;var i=yu(e.fieldTransforms,r,t),a=t.data;return a.setAll(vu(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return au(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function lu(e,t){var n,r=null,i=(0,K.Z)(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ho(a.transform,o||null);null!=u&&(null===r&&(r=Xa.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function hu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ti(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qo&&t instanceof Qo||e instanceof $o&&t instanceof $o?Ti(e.elements,t.elements,Ra):e instanceof Jo&&t instanceof Jo?Ra(e.yt,t.yt):e instanceof Go&&t instanceof Go}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var fu=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,C.Z)(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,Z.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ou),du=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,C.Z)(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return(0,Z.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ou);function vu(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function pu(e,t,n){var r=new Map;hi(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ko(o,u,n[i]))}return r}function yu(e,t,n){var r,i=new Map,a=(0,K.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Wo(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var mu,gu,ku=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,Z.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ou),_u=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,Z.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ou),wu=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.count=t}));function bu(e){switch(e){default:return li();case di.CANCELLED:case di.UNKNOWN:case di.DEADLINE_EXCEEDED:case di.RESOURCE_EXHAUSTED:case di.INTERNAL:case di.UNAVAILABLE:case di.UNAUTHENTICATED:return!1;case di.INVALID_ARGUMENT:case di.NOT_FOUND:case di.ALREADY_EXISTS:case di.PERMISSION_DENIED:case di.FAILED_PRECONDITION:case di.ABORTED:case di.OUT_OF_RANGE:case di.UNIMPLEMENTED:case di.DATA_LOSS:return!0}}function xu(e){if(void 0===e)return ui("GRPC error has no .code"),di.UNKNOWN;switch(e){case mu.OK:return di.OK;case mu.CANCELLED:return di.CANCELLED;case mu.UNKNOWN:return di.UNKNOWN;case mu.DEADLINE_EXCEEDED:return di.DEADLINE_EXCEEDED;case mu.RESOURCE_EXHAUSTED:return di.RESOURCE_EXHAUSTED;case mu.INTERNAL:return di.INTERNAL;case mu.UNAVAILABLE:return di.UNAVAILABLE;case mu.UNAUTHENTICATED:return di.UNAUTHENTICATED;case mu.INVALID_ARGUMENT:return di.INVALID_ARGUMENT;case mu.NOT_FOUND:return di.NOT_FOUND;case mu.ALREADY_EXISTS:return di.ALREADY_EXISTS;case mu.PERMISSION_DENIED:return di.PERMISSION_DENIED;case mu.FAILED_PRECONDITION:return di.FAILED_PRECONDITION;case mu.ABORTED:return di.ABORTED;case mu.OUT_OF_RANGE:return di.OUT_OF_RANGE;case mu.UNIMPLEMENTED:return di.UNIMPLEMENTED;case mu.DATA_LOSS:return di.DATA_LOSS;default:return li()}}(gu=mu||(mu={}))[gu.OK=0]="OK",gu[gu.CANCELLED=1]="CANCELLED",gu[gu.UNKNOWN=2]="UNKNOWN",gu[gu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gu[gu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gu[gu.NOT_FOUND=5]="NOT_FOUND",gu[gu.ALREADY_EXISTS=6]="ALREADY_EXISTS",gu[gu.PERMISSION_DENIED=7]="PERMISSION_DENIED",gu[gu.UNAUTHENTICATED=16]="UNAUTHENTICATED",gu[gu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gu[gu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gu[gu.ABORTED=10]="ABORTED",gu[gu.OUT_OF_RANGE=11]="OUT_OF_RANGE",gu[gu.UNIMPLEMENTED=12]="UNIMPLEMENTED",gu[gu.INTERNAL=13]="INTERNAL",gu[gu.UNAVAILABLE=14]="UNAVAILABLE",gu[gu.DATA_LOSS=15]="DATA_LOSS";var Iu=function(){function e(t,n){(0,C.Z)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,Z.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=(0,K.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=(0,c.Z)(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ca(this.inner,(function(t,n){var r,i=(0,K.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=(0,c.Z)(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return la(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Eu=new ha(Oi.comparator);function Su(){return Eu}var Tu=new ha(Oi.comparator);function Cu(){for(var e=Tu,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Zu(e){var t=Tu;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Nu(){return Au()}function Du(){return Au()}function Au(){return new Iu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Pu=new ha(Oi.comparator),Ru=new va(Oi.comparator);function Ou(){for(var e=Ru,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Lu=new va(Si);function Mu(){return Lu}var Fu=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,Z.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Uu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Ni.min(),i,Mu(),Su(),Ou())}}]),e}(),Uu=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,Z.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Ou(),Ou(),Ou())}}]),e}(),Vu=(0,Z.Z)((function e(t,n,r,i){(0,C.Z)(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),qu=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.targetId=t,this.At=n})),Bu=(0,Z.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ga.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,C.Z)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ju=function(){function e(){(0,C.Z)(this,e),this.Rt=0,this.bt=Ku(),this.Pt=ga.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return(0,Z.Z)(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=Ou(),t=Ou(),n=Ou();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:li()}})),new Uu(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=Ku()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),zu=function(){function e(t){(0,C.Z)(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Su(),this.qt=Wu(),this.Kt=new va(Si)}return(0,Z.Z)(e,[{key:"Gt",value:function(e){var t,n=(0,K.Z)(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=(0,K.Z)(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:li()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(ao(i))if(0===n){var a=new Oi(i.path);this.jt(t,a,eo.newNoDocument(a,Ni.min()))}else hi(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&ao(a.target)){var o=new Oi(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,eo.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=Ou();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Fu(e,n,this.Kt,this.Ut,r);return this.Ut=Su(),this.qt=Wu(),this.Kt=new va(Si),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new ju,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new va(Si),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||oi("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new ju),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Wu(){return new ha(Oi.comparator)}function Ku(){return new ha(Oi.comparator)}var Hu={asc:"ASCENDING",desc:"DESCENDING"},Gu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qu=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.databaseId=t,this.gt=n}));function Yu(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function $u(e,t){return e.gt?t.toBase64():t.toUint8Array()}function Xu(e,t){return Yu(e,t.toTimestamp())}function Ju(e){return hi(!!e),Ni.fromTimestamp(function(e){var t=_a(e);return new Zi(t.seconds,t.nanos)}(e))}function es(e,t){return function(e){return new Ai(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ts(e){var t=Ai.fromString(e);return hi(Is(t)),t}function ns(e,t){return es(e.databaseId,t.path)}function rs(e,t){var n=ts(t);if(n.get(1)!==e.databaseId.projectId)throw new vi(di.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vi(di.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Oi(us(n))}function is(e,t){return es(e.databaseId,t)}function as(e){var t=ts(e);return 4===t.length?Ai.emptyPath():us(t)}function os(e){return new Ai(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function us(e){return hi(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ss(e,t,n){return{name:ns(e,t),fields:n.value.mapValue.fields}}function cs(e,t,n){var r=rs(e,t.name),i=Ju(t.updateTime),a=new Xa({mapValue:{fields:t.fields}}),o=eo.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ls(e,t){return"found"in t?function(e,t){hi(!!t.found),t.found.name,t.found.updateTime;var n=rs(e,t.found.name),r=Ju(t.found.updateTime),i=new Xa({mapValue:{fields:t.found.fields}});return eo.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){hi(!!t.missing),hi(!!t.readTime);var n=rs(e,t.missing),r=Ju(t.readTime);return eo.newNoDocument(n,r)}(e,t):li()}function hs(e,t){var n;if(t instanceof fu)n={update:ss(e,t.key,t.value)};else if(t instanceof ku)n={delete:ns(e,t.key)};else if(t instanceof du)n={update:ss(e,t.key,t.data),updateMask:xs(t.fieldMask)};else{if(!(t instanceof _u))return li();n={verify:ns(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Go)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $o)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jo)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw li()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:li()}(e,t.precondition)),n}function fs(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?iu.updateTime(Ju(e.updateTime)):void 0!==e.exists?iu.exists(e.exists):iu.none()}(t.currentDocument):iu.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)hi("REQUEST_TIME"===t.setToServerValue),n=new Go;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Qo(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new $o(i)}else"increment"in t?n=new Jo(e,t.increment):li();var a=Ri.fromServerFormat(t.fieldPath);return new nu(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=rs(e,t.update.name),a=new Xa({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ma(t.map((function(e){return Ri.fromServerFormat(e)})))}(t.updateMask);return new du(i,a,o,n,r)}return new fu(i,a,n,r)}if(t.delete){var u=rs(e,t.delete);return new ku(u,n)}if(t.verify){var s=rs(e,t.verify);return new _u(s,n)}return li()}function ds(e,t){return{documents:[is(e,t.path)]}}function vs(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=is(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=is(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(za(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NAN"}};if(ja(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(za(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NOT_NAN"}};if(ja(e.value))return{unaryFilter:{field:ks(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(e.field),op:gs(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ks(e.field),direction:ms(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||Ca(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ps(e){var t=as(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hi(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=ys(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new _o(_s(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ca(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ko(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ko(n,t)}(n.endAt)),Eo(t,i,u,o,s,"F",c,l)}function ys(e){return e?void 0!==e.unaryFilter?[bs(e)]:void 0!==e.fieldFilter?[ws(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return ys(e)})).reduce((function(e,t){return e.concat(t)})):li():[]}function ms(e){return Hu[e]}function gs(e){return Gu[e]}function ks(e){return{fieldPath:e.canonicalString()}}function _s(e){return Ri.fromServerFormat(e.fieldPath)}function ws(e){return co.create(_s(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return li()}}(e.fieldFilter.op),e.fieldFilter.value)}function bs(e){switch(e.unaryFilter.op){case"IS_NAN":var t=_s(e.unaryFilter.field);return co.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=_s(e.unaryFilter.field);return co.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_s(e.unaryFilter.field);return co.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_s(e.unaryFilter.field);return co.create(i,"!=",{nullValue:"NULL_VALUE"});default:return li()}}function xs(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Is(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Es(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ts(t)),t=Ss(e.get(n),t);return Ts(t)}function Ss(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Ts(e){return e+"\x01\x01"}function Cs(e){var t=e.length;if(hi(t>=2),2===t)return hi("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ai.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&li(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:li()}a=o+2}return new Ai(r)}var Zs=["userId","batchId"];function Ns(e,t){return[e,Es(t)]}function Ds(e,t,n){return[e,Es(t),n]}var As={},Ps=["prefixPath","collectionGroup","readTime","documentId"],Rs=["prefixPath","collectionGroup","documentId"],Os=["collectionGroup","readTime","prefixPath","documentId"],Ls=["canonicalId","targetId"],Ms=["targetId","path"],Fs=["path","targetId"],Us=["collectionId","parent"],Vs=["indexId","uid"],qs=["uid","sequenceNumber"],Bs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],js=["indexId","uid","orderedDocumentKey"],zs=["userId","collectionPath","documentId"],Ws=["userId","collectionPath","largestBatchId"],Ks=["userId","collectionGroup","largestBatchId"],Hs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Gs=[].concat((0,Q.Z)(Hs),["documentOverlays"]),Qs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ys=Qs,$s=[].concat(Ys,["indexConfiguration","indexState","indexEntries"]),Xs=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return(0,Z.Z)(n)}(Ki);function Js(e,t){var n=fi(e);return $i.M(n.ie,t)}var ec=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,Z.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&su(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=(0,K.Z)(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=cu(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=(0,K.Z)(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=cu(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Du();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=uu(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Ni.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ou())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(function(e,t){return hu(e,t)}))&&Ti(this.baseMutations,e.baseMutations,(function(e,t){return hu(e,t)}))}}]),e}(),tc=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,Z.Z)(e,null,[{key:"from",value:function(t,n,r){hi(t.mutations.length===r.length);for(var i=Pu,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),nc=function(){function e(t,n){(0,C.Z)(this,e),this.largestBatchId=t,this.mutation=n}return(0,Z.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ni.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ni.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ga.EMPTY_BYTE_STRING;(0,C.Z)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return(0,Z.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ic=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.re=t}));function ac(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oc(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ns(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Yu(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:uc(t.version)};else{if(!t.isUnknownDocument())return li();r.unknownDocument={path:n.path.toArray(),version:uc(t.version)}}return r}function oc(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function uc(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sc(e){var t=new Zi(e.seconds,e.nanoseconds);return Ni.fromTimestamp(t)}function cc(e,t){for(var n=(t.baseMutations||[]).map((function(t){return fs(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return fs(e.re,t)})),u=Zi.fromMillis(t.localWriteTimeMs);return new ec(t.batchId,u,n,o)}function lc(e){var t,n,r=sc(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?sc(e.lastLimboFreeSnapshotVersion):Ni.min();return void 0!==e.query.documents?(hi(1===(n=e.query).documents.length),t=Ao(So(as(n.documents[0])))):t=function(e){return Ao(ps(e))}(e.query),new rc(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ga.fromBase64String(e.resumeToken))}function hc(e,t){var n,r=uc(t.snapshotVersion),i=uc(t.lastLimboFreeSnapshotVersion);n=ao(t.target)?ds(e.re,t.target):vs(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ro(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function fc(e){var t=ps({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Po(t,t.limit,"L"):t}function dc(e,t){return new nc(t.largestBatchId,fs(e.re,t.overlayMutation))}function vc(e,t){var n=t.path.lastSegment();return[e,Es(t.path.popLast()),n]}function pc(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:uc(r.readTime),documentKey:Es(r.documentKey.path),largestBatchId:r.largestBatchId}}var yc=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return mc(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:sc(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return mc(e).put({bundleId:(n=t).id,createTime:uc(Ju(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return gc(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:fc(t.bundledQuery),readTime:sc(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return gc(e).put(function(e){return{name:e.name,readTime:uc(Ju(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function mc(e){return Js(e,"bundles")}function gc(e){return Js(e,"namedQueries")}var kc=function(){function e(t,n){(0,C.Z)(this,e),this.It=t,this.userId=n}return(0,Z.Z)(e,[{key:"getOverlay",value:function(e,t){var n=this;return _c(e).get(vc(this.userId,t)).next((function(e){return e?dc(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nu();return Qi.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new nc(t,a);i.push(r.ue(e,o))})),Qi.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Es(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(_c(e).Y("collectionPathOverlayIndex",i))})),Qi.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Nu(),a=Es(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return _c(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=(0,K.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=dc(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Nu(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _c(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=dc(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return _c(e).put(function(e,t,n){var r=vc(t,n.mutation.key),i=(0,c.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:hs(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function _c(e){return Js(e,"documentOverlays")}var wc=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(wa(e.integerValue));else if("doubleValue"in e){var n=wa(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Za(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ba(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Ha(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):li()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=(0,K.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),Oi.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function bc(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function xc(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=bc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}wc.Te=new wc;var Ic=function(){function e(){(0,C.Z)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return(0,Z.Z)(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=(0,K.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=(0,K.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=xc(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=xc(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ec=function(){function e(t){(0,C.Z)(this,e),this.Be=t}return(0,Z.Z)(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Sc=function(){function e(t){(0,C.Z)(this,e),this.Be=t}return(0,Z.Z)(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),Tc=function(){function e(){(0,C.Z)(this,e),this.Be=new Ic,this.Le=new Ec(this.Be),this.Ue=new Sc(this.Be)}return(0,Z.Z)(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),Cc=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return(0,Z.Z)(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Zc(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Nc(e.arrayValue,t.arrayValue))?n:0!==(n=Nc(e.directionalValue,t.directionalValue))?n:Oi.comparator(e.documentKey,t.documentKey)}function Nc(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Dc=function(){function e(t){(0,C.Z)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=(0,K.Z)(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return(0,Z.Z)(e,[{key:"We",value:function(e){var t=Mi(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Fi(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=(0,K.Z)(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Ac=function(){function e(){(0,C.Z)(this,e),this.Ye=new Pc}return(0,Z.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Qi.resolve()}},{key:"getCollectionParents",value:function(e,t){return Qi.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Qi.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Qi.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Qi.resolve(null)}},{key:"getIndexType",value:function(e,t){return Qi.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Qi.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Qi.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Qi.resolve(ji.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Qi.resolve(ji.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Qi.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Qi.resolve()}}]),e}(),Pc=function(){function e(){(0,C.Z)(this,e),this.index={}}return(0,Z.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new va(Ai.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new va(Ai.comparator)).toArray()}}]),e}(),Rc=new Uint8Array(0),Oc=function(){function e(t,n){(0,C.Z)(this,e),this.user=t,this.databaseId=n,this.Xe=new Pc,this.Ze=new Iu((function(e){return ro(e)}),(function(e,t){return io(e,t)})),this.uid=t.uid||""}return(0,Z.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Es(i)};return Lc(e).put(a)}return Qi.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ci(t),""],!1,!0);return Lc(e).W(r).next((function(e){var r,i=(0,K.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Cs(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Fc(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Uc(e);return a.next((function(e){o.put(pc(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Fc(e),r=Uc(e),i=Mc(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Mc(e),i=!0,a=new Map;return Qi.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ou(),o=[];return Qi.forEach(a,(function(i,a){var u;oi("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ro(t)));var s=function(e,t){var n=Mi(t);if(void 0===n)return null;var r,i=(0,K.Z)(oo(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=(0,K.Z)(Fi(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=(0,K.Z)(oo(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=(0,K.Z)(Fi(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?uo(e,o.fieldPath,e.startAt):so(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ko(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=(0,K.Z)(Fi(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?so(e,o.fieldPath,e.endAt):uo(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ko(r,i)}(a,i),f=n.nn(i,a,l),d=n.nn(i,a,h),v=n.sn(i,a,c),p=n.rn(i.indexId,s,f,l.inclusive,d,h.inclusive,v);return Qi.forEach(p,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Oi.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Qi.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.on(t[s/c]):Rc,f=u.un(e,h,n[s%c],r),d=u.cn(e,h,i[s%c],a),v=o.map((function(t){return u.un(e,h,t,!0)}));l.push.apply(l,(0,Q.Z)(u.createRange(f,d,v)))},f=0;f<s;++f)h(f);return l}},{key:"un",value:function(e,t,n,r){var i=new Cc(e,Oi.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new Cc(e,Oi.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Dc(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=(0,K.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Qi.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new va(Ri.comparator),r=!1,i=(0,K.Z)(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=(0,K.Z)(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Tc,i=(0,K.Z)(Fi(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);wc.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Tc;return wc.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Tc;return wc.Te.ce(Va(this.databaseId,t),n.qe(function(e){var t=Fi(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Tc);var i,a=0,o=(0,K.Z)(Fi(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=(0,K.Z)(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.ln(t,s.fieldPath)&&Ba(c))r=this.fn(r,s,c);else{var f=h.qe(s.kind);wc.Te.ce(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=(0,Q.Z)(e),a=[],o=(0,K.Z)(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=(0,K.Z)(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new Tc;h.seed(l.$e()),wc.Te.ce(s,h.qe(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof co&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Fc(e),i=Uc(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Qi.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Vi(t.sequenceNumber,new ji(sc(t.readTime),new Oi(Cs(t.documentKey)),t.largestBatchId)):Vi.empty(),r=e.fields.map((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return new Ui(Ri.fromServerFormat(n),r)}));return new Li(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Si(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Fc(e),a=Uc(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Qi.forEach(t,(function(t){return a.put(pc(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Qi.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Qi.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Qi.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Qi.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return Mc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return Mc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=Mc(e),i=new va(Zc);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new Cc(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new va(Zc),r=this.an(t,e);if(null==r)return n;var i=Mi(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Ba(a)){var o,u=(0,K.Z)(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Cc(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Cc(t.indexId,e.key,Rc,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;oi("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ya(a),s=ya(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ya(o)):l?(i(u),u=ya(a)):(u=ya(a),s=ya(o))}}(r,i,Zc,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Qi.waitFor(o)}},{key:"_n",value:function(e){var t=1;return Uc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Zc(e,t)})).filter((function(e,t,n){return!t||0!==Zc(e,n[t-1])}));var r=[];r.push(e);var i,a=(0,K.Z)(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Zc(o,e),s=Zc(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Rc,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Rc,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Vc)}},{key:"getMinOffset",value:function(e,t){var n=this;return Qi.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||li()}))})).next(Vc)}}]),e}();function Lc(e){return Js(e,"collectionParents")}function Mc(e){return Js(e,"indexEntries")}function Fc(e){return Js(e,"indexConfiguration")}function Uc(e){return Js(e,"indexState")}function Vc(e){hi(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zi(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ji(t.readTime,t.documentKey,n)}var qc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bc=function(){function e(t,n,r){(0,C.Z)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,Z.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function jc(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){hi(1===u)})));var c,l=[],h=(0,K.Z)(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Ds(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(v){h.e(v)}finally{h.f()}return Qi.waitFor(a).next((function(){return l}))}function zc(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw li();t=e.noDocument}return JSON.stringify(t).length}Bc.DEFAULT_COLLECTION_PERCENTILE=10,Bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bc.DEFAULT=new Bc(41943040,Bc.DEFAULT_COLLECTION_PERCENTILE,Bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bc.DISABLED=new Bc(-1,0,0);var Wc=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return(0,Z.Z)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Gc(e),o=Hc(e);return o.add({}).next((function(u){hi("number"==typeof u);var s,c=new ec(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return hs(e.re,t)})),i=n.mutations.map((function(t){return hs(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),h=[],f=new va((function(e,t){return Si(e.canonicalString(),t.canonicalString())})),d=(0,K.Z)(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=Ds(i.userId,v.key.path,u);f=f.add(v.key.path.popLast()),h.push(o.put(l)),h.push(a.put(p,As))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Qi.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Hc(e).get(t).next((function(e){return e?(hi(e.userId===n.userId),cc(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Qi.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Hc(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(hi(t.batchId>=r),a=cc(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Hc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return cc(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ns(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Gc(e).Z({range:i},(function(r,i,o){var u=(0,c.Z)(r,3),s=u[0],l=u[1],h=u[2],f=Cs(l);if(s===n.userId&&t.path.isEqual(f))return Hc(e).get(h).next((function(e){if(!e)throw li();hi(e.userId===n.userId),a.push(cc(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new va(Si),i=[];return t.forEach((function(t){var a=Ns(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Gc(e).Z({range:o},(function(e,i,a){var o=(0,c.Z)(e,3),u=o[0],s=o[1],l=o[2],h=Cs(s);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),Qi.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ns(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new va(Si);return Gc(e).Z({range:o},(function(e,t,a){var o=(0,c.Z)(e,3),s=o[0],l=o[1],h=o[2],f=Cs(l);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Hc(e).get(t).next((function(e){if(null===e)throw li();hi(e.userId===n.userId),r.push(cc(n.It,e))})))})),Qi.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return jc(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Qi.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Qi.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Gc(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Cs(e[1]);i.push(a)}else r.done()})).next((function(){hi(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Kc(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Qc(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return hi(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Kc(e,t,n){var r=Ns(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Gc(e).Z({range:a,X:!0},(function(e,n,r){var a=(0,c.Z)(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Hc(e){return Js(e,"mutations")}function Gc(e){return Js(e,"documentMutations")}function Qc(e){return Js(e,"mutationQueues")}var Yc=function(){function e(t){(0,C.Z)(this,e),this.bn=t}return(0,Z.Z)(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),$c=function(){function e(t,n){(0,C.Z)(this,e),this.referenceDelegate=t,this.It=n}return(0,Z.Z)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Yc(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Ni.fromTimestamp(new Zi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Xc(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return hi(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Xc(e).Z((function(o,u){var s=lc(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Qi.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Xc(e).Z((function(e,n){var r=lc(n);t(r)}))}},{key:"Vn",value:function(e){return Jc(e).get("targetGlobalKey").next((function(e){return hi(null!==e),e}))}},{key:"Sn",value:function(e,t){return Jc(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Xc(e).put(hc(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ro(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Xc(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=lc(n);io(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=el(e);return t.forEach((function(t){var o=Es(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Qi.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=el(e);return Qi.forEach(t,(function(t){var a=Es(t.path);return Qi.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=el(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=el(e),i=Ou();return r.Z({range:n,X:!0},(function(e,t,n){var r=Cs(e[1]),a=new Oi(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Es(t.path),r=IDBKeyRange.bound([n],[Ci(n)],!1,!0),i=0;return el(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=(0,c.Z)(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return Xc(e).get(t).next((function(e){return e?lc(e):null}))}}]),e}();function Xc(e){return Js(e,"targets")}function Jc(e){return Js(e,"targetGlobal")}function el(e){return Js(e,"targetDocuments")}function tl(e,t){var n=(0,c.Z)(e,2),r=n[0],i=n[1],a=(0,c.Z)(t,2),o=a[0],u=a[1],s=Si(r,o);return 0===s?Si(i,u):s}var nl=function(){function e(t){(0,C.Z)(this,e),this.xn=t,this.buffer=new va(tl),this.Nn=0}return(0,Z.Z)(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();tl(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),rl=function(){function e(t,n,r){(0,C.Z)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return(0,Z.Z)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;oi("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!ea(e.t0)){e.next=12;break}oi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Hi(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),il=function(){function e(t,n){(0,C.Z)(this,e),this.$n=t,this.params=n}return(0,Z.Z)(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Qi.resolve(ua.at);var r=new nl(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(oi("LruGarbageCollector","Garbage collection skipped; disabled"),Qi.resolve(qc)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(oi("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),qc):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(oi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ai()<=P.in.DEBUG&&oi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Qi.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),al=function(){function e(t,n){(0,C.Z)(this,e),this.db=t,this.garbageCollector=function(e,t){return new il(e,t)}(this,n)}return(0,Z.Z)(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ol(e,n)}},{key:"removeReference",value:function(e,t,n){return ol(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ol(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Qc(e).tt((function(r){return Kc(e,r,t).next((function(e){return e&&(n=!0),Qi.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ni.min()),el(e).delete([0,Es(o.path)])}))}));i.push(s)}})).next((function(){return Qi.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ol(e,t)}},{key:"Kn",value:function(e,t){var n,r=el(e),i=ua.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=(0,c.Z)(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ua.at&&t(new Oi(Cs(n)),i),i=s,n=u):i=ua.at})).next((function(){i!==ua.at&&t(new Oi(Cs(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ol(e,t){return el(e).put(function(e,t){return{targetId:0,path:Es(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ul=function(){function e(){(0,C.Z)(this,e),this.changes=new Iu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,Z.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,eo.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Qi.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),sl=function(){function e(t){(0,C.Z)(this,e),this.It=t}return(0,Z.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return fl(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return fl(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],oc(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=eo.newInvalidDocument(t);return fl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(dl(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:eo.newInvalidDocument(t)};return fl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(dl(t))},(function(e,i){r={document:n.jn(t,i),size:zc(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Su();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Su(),i=new ha(Oi.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,zc(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Qi.resolve();var r=new va(pl);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(dl(r.first()),dl(r.last())),a=r.getIterator(),o=a.getNext();return fl(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Oi.fromSegments([].concat((0,Q.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&pl(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(dl(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),oc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fl(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Su(),i=(0,K.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(Oi.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Su(),o=vl(t,n),u=vl(t,ji.max());return fl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Oi.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ll(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return hl(e).get("remoteDocumentGlobalKey").next((function(e){return hi(!!e),e}))}},{key:"Qn",value:function(e,t){return hl(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=cs(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Oi.fromSegments(t.noDocument.path),i=sc(t.noDocument.readTime);n=eo.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return li();var a=Oi.fromSegments(t.unknownDocument.path),o=sc(t.unknownDocument.version);n=eo.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Zi(e[0],e[1]);return Ni.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(Ni.min()))return n}return eo.newInvalidDocument(e)}}]),e}();function cl(e){return new sl(e)}var ll=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new Iu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return(0,Z.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new va((function(e,t){return Si(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=ac(t.Yn.It,o);i=i.add(a.path.popLast());var c=zc(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=ac(t.Yn.It,o.convertToNoDocument(Ni.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Qi.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ul);function hl(e){return Js(e,"remoteDocumentGlobal")}function fl(e){return Js(e,"remoteDocumentsV14")}function dl(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function vl(e,t){var n=t.documentKey.path.toArray();return[e,oc(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pl(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Si(n[a],r[a]))return i;return(i=Si(n.length,r.length))||((i=Si(n[n.length-2],r[r.length-2]))||Si(n[n.length-1],r[r.length-1]))}var yl=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ml=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,Z.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&cu(r.mutation,e,ma.empty(),Zi.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Ou()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ou(),i=Nu();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Cu();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Nu();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Ou())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Su(),a=Au(),o=Au();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof du)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),cu(o.mutation,t,o.mutation.getFieldMask(),Zi.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new yl(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Au(),i=new ha((function(e,t){return e-t})),a=Ou();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=(0,K.Z)(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ma.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Ou()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Du();c.forEach((function(e){if(!a.has(e)){var n=uu(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Qi.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Oi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):No(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Qi.resolve(Nu()),u=-1,s=a;return o.next((function(t){return Qi.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Qi.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Ou())})).next((function(e){return{batchId:u,changes:Zu(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Oi(t)).next((function(e){var t=Cu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Cu();return this.indexManager.getCollectionParents(e,i).next((function(o){return Qi.forEach(o,(function(o){var u=function(e,t){return new Io(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,eo.newInvalidDocument(n)))}));var n=Cu();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&cu(a.mutation,i,ma.empty(),Zi.now()),Mo(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Qi.resolve(eo.newInvalidDocument(t))}}]),e}(),gl=function(){function e(t){(0,C.Z)(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return(0,Z.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Qi.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ju(n.createTime)}),Qi.resolve()}},{key:"getNamedQuery",value:function(e,t){return Qi.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:fc(e.bundledQuery),readTime:Ju(e.readTime)}}(t)),Qi.resolve()}}]),e}(),kl=function(){function e(){(0,C.Z)(this,e),this.overlays=new ha(Oi.comparator),this.es=new Map}return(0,Z.Z)(e,[{key:"getOverlay",value:function(e,t){return Qi.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nu();return Qi.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Qi.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Qi.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Nu(),i=t.length+1,a=new Oi(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Qi.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ha((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Nu(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Nu(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Qi.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new nc(t,n));var a=this.es.get(t);void 0===a&&(a=Ou(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),_l=function(){function e(){(0,C.Z)(this,e),this.ns=new va(wl.ss),this.rs=new va(wl.os)}return(0,Z.Z)(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new wl(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new wl(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Oi(new Ai([])),r=new wl(n,e),i=new wl(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Oi(new Ai([])),n=new wl(t,e),r=new wl(t,e+1),i=Ou();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new wl(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),wl=function(){function e(t,n){(0,C.Z)(this,e),this.key=t,this._s=n}return(0,Z.Z)(e,null,[{key:"ss",value:function(e,t){return Oi.comparator(e.key,t.key)||Si(e._s,t._s)}},{key:"os",value:function(e,t){return Si(e._s,t._s)||Oi.comparator(e.key,t.key)}}]),e}(),bl=function(){function e(t,n){(0,C.Z)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new va(wl.ss)}return(0,Z.Z)(e,[{key:"checkEmpty",value:function(e){return Qi.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ec(i,t,n,r);this.mutationQueue.push(a);var o,u=(0,K.Z)(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new wl(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Qi.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Qi.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Qi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Qi.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Qi.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new wl(t,0),i=new wl(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Qi.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new va(Si);return t.forEach((function(e){var t=new wl(e,0),i=new wl(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Qi.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Oi.isDocumentKey(i)||(i=i.child(""));var a=new wl(new Oi(i),0),o=new va(Si);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Qi.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;hi(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Qi.forEach(t.mutations,(function(i){var a=new wl(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new wl(t,0),r=this.gs.firstAfterOrEqual(n);return Qi.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Qi.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),xl=function(){function e(t){(0,C.Z)(this,e),this.Es=t,this.docs=new ha(Oi.comparator),this.size=0}return(0,Z.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Qi.resolve(n?n.document.mutableCopy():eo.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Su();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():eo.newInvalidDocument(e))})),Qi.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Su(),i=new Oi(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||zi(Bi(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Qi.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){li()}},{key:"As",value:function(e,t){return Qi.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Il(this)}},{key:"getSize",value:function(e){return Qi.resolve(this.size)}}]),e}(),Il=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).Yn=e,r}return(0,Z.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Qi.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(ul),El=function(){function e(t){(0,C.Z)(this,e),this.persistence=t,this.Rs=new Iu((function(e){return ro(e)}),io),this.lastRemoteSnapshotVersion=Ni.min(),this.highestTargetId=0,this.bs=0,this.Ps=new _l,this.targetCount=0,this.vs=Yc.Pn()}return(0,Z.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Qi.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Qi.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Qi.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Qi.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Qi.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Yc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Qi.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Qi.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Qi.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Qi.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Qi.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Qi.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Qi.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Qi.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Qi.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Qi.resolve(n)}},{key:"containsKey",value:function(e,t){return Qi.resolve(this.Ps.containsKey(t))}}]),e}(),Sl=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this.Vs={},this.overlays={},this.Ss=new ua(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new El(this),this.indexManager=new Ac,this.remoteDocumentCache=new xl((function(e){return r.referenceDelegate.xs(e)})),this.It=new ic(n),this.Ns=new gl(this.It)}return(0,Z.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new kl,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new bl(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;oi("MemoryPersistence","Starting transaction:",e);var i=new Tl(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Qi.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Tl=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,Z.Z)(n)}(Ki),Cl=function(){function e(t){(0,C.Z)(this,e),this.persistence=t,this.Fs=new _l,this.$s=null}return(0,Z.Z)(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw li()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Qi.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Qi.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Qi.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qi.forEach(this.Ls,(function(r){var i=Oi.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,Ni.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Qi.or([function(){return Qi.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Zl=function(){function e(t){(0,C.Z)(this,e),this.It=t}return(0,Z.Z)(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Yi("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zs,{unique:!0}),e.createObjectStore("documentMutations")}(e),Nl(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Qi.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Nl(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ni.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zs,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Qi.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:zs});t.createIndex("collectionPathOverlayIndex",Ws,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ks,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ps});t.createIndex("documentKeyIndex",Rs),t.createIndex("collectionGroupIndex",Os)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Vs}).createIndex("sequenceNumberIndex",qs,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Bs}).createIndex("documentKeyIndex",js,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=zc(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Qi.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Qi.forEach(r,(function(r){hi(r.userId===n.userId);var i=cc(t.It,r);return jc(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Ai(n),o=function(e){return[0,Es(e)]}(a);r.push(t.get(o).next((function(n){return n?Qi.resolve():function(n){return t.put({targetId:0,path:Es(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Qi.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Us});var n=t.store("collectionParents"),r=new Pc,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Es(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Ai(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=(0,c.Z)(e,3),r=(n[0],n[1]),a=(n[2],Cs(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=lc(r),a=hc(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Oi(Ai.fromString(i.document.name).popFirst(5)):i.noDocument?Oi.fromSegments(i.noDocument.path):i.unknownDocument?Oi.fromSegments(i.unknownDocument.path):li()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Qi.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=cl(this.It),a=new Sl(Cl.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Ou();cc(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Qi.forEach(r,(function(e,r){var o=new ni(r),u=kc.oe(n.It,o),s=a.getIndexManager(o),c=Wc.oe(o,n.It,s,a.referenceDelegate);return new ml(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Xs(t,ua.at),e).next()}))}))}}]),e}();function Nl(e){e.createObjectStore("targetDocuments",{keyPath:Ms}).createIndex("documentTargetsIndex",Fs,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ls,{unique:!0}),e.createObjectStore("targetGlobal")}var Dl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Al=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if((0,C.Z)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new vi(di.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new al(this,i),this.ii=n+"main",this.It=new ic(s),this.ri=new $i(this.ii,this.Xs,new Zl(this.It)),this.Cs=new $c(this.referenceDelegate,this.It),this.remoteDocumentCache=cl(this.It),this.Ns=new yc,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,Z.Z)(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new vi(di.FAILED_PRECONDITION,Dl);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new ua(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(r){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Rl(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(ea(t))return oi("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return oi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Pl(e).get("owner").next((function(e){return Qi.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Rl(e).delete(this.clientId)}},{key:"yi",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Js(e,"clientMetadata");return t.W().next((function(e){var n=o.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Qi.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=(0,K.Z)(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Qi.resolve(!0):Pl(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new vi(di.FAILED_PRECONDITION,Dl);return!1}}return!(!t.networkEnabled||!t.inForeground)||Rl(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&oi("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Xs(e,ua.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Rl(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Wc.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Oc(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return kc.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;oi("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?$s:14===i?Ys:13===i?Qs:12===i?Gs:11===i?Hs:void li();return this.ri.runTransaction(e,o,u,(function(i){return a=new Xs(i,r.Ss?r.Ss.next():ua.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw ui("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new vi(di.FAILED_PRECONDITION,Wi);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Pl(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new vi(di.FAILED_PRECONDITION,Dl)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pl(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Pl(e);return n.get("owner").next((function(e){return t.mi(e)?(oi("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Qi.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ui("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return oi("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ui("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(ce){ui("Failed to set zombie client id.",ce)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(ce){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return $i.C()}}]),e}();function Pl(e){return Js(e,"owner")}function Rl(e){return Js(e,"clientMetadata")}function Ol(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ll=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return(0,Z.Z)(e,null,[{key:"Ci",value:function(t,n){var r,i=Ou(),a=Ou(),o=(0,K.Z)(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ml=function(){function e(){(0,C.Z)(this,e),this.xi=!1}return(0,Z.Z)(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(To(t))return Qi.resolve(null);var r=Ao(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Po(t,null,"F"),r=Ao(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Ou.apply(void 0,(0,Q.Z)(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Po(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return To(t)||r.isEqual(Ni.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(ai()<=P.in.DEBUG&&oi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lo(t)),i.Bi(e,o,t,qi(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new va(Uo(e));return t.forEach((function(t,r){Mo(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return ai()<=P.in.DEBUG&&oi("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.Ni.getDocumentsMatchingQuery(e,t,ji.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Fl=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new ha(Si),this.qi=new Iu((function(e){return ro(e)}),io),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return(0,Z.Z)(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ml(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function Ul(e,t,n,r){return new Fl(e,t,n,r)}function Vl(e,t){return ql.apply(this,arguments)}function ql(){return ql=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Ou(),s=(0,K.Z)(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=(0,K.Z)(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=(0,K.Z)(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=(0,K.Z)(p.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}function Bl(e,t){var n=fi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Qi.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);hi(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Ou(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function jl(e){var t=fi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function zl(e,t){var n=fi(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(ga.EMPTY_BYTE_STRING,Ni.min()).withLastLimboFreeSnapshotVersion(Ni.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Su(),s=Ou();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Wl(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Ni.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Qi.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function Wl(e,t,n){var r=Ou(),i=Ou();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Su();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ni.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):oi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Kl(e,t){var n=fi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Hl(e,t){var n=fi(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Qi.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new rc(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Gl(e,t,n){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fi(t),o=i.Ui.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ea(e.t1)){e.next=12;break}throw e.t1;case 12:oi("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ql.apply(this,arguments)}function Yl(e,t,n){var r=fi(e),i=Ni.min(),a=Ou();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=fi(e),i=r.qi.get(n);return void 0!==i?Qi.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Ao(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Ni.min(),n?a:Ou())})).next((function(e){return Jl(r,Fo(t),e),{documents:e,Hi:a}}))}))}function $l(e,t){var n=fi(e),r=fi(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function Xl(e,t){var n=fi(e),r=n.Ki.get(t)||Ni.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,qi(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Jl(n,t,e),e}))}function Jl(e,t,n){var r=e.Ki.get(t)||Ni.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function eh(e,t,n,r){return th.apply(this,arguments)}function th(){return th=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,u,s,c,l,h,f,d,v,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=fi(t),u=Ou(),s=Su(),c=(0,K.Z)(r);try{for(c.s();!(l=c.n()).done;)h=l.value,f=n.Ji(h.metadata.name),h.document&&(u=u.add(f)),(d=n.Yi(h)).setReadTime(n.Xi(h.metadata.readTime)),s=s.insert(f,d)}catch(a){c.e(a)}finally{c.f()}return v=o.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,Hl(o,function(e){return Ao(So(Ai.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Wl(e,v,s).next((function(t){return v.apply(e),t})).next((function(t){return o.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.Cs.addMatchingKeys(e,u,p.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),th.apply(this,arguments)}function nh(e,t){return rh.apply(this,arguments)}function rh(){return rh=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Ou(),e.next=3,Hl(t,Ao(fc(n.bundledQuery)));case 3:return i=e.sent,o=fi(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ju(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ns.saveNamedQuery(e,n);var a=i.withResumeToken(ga.EMPTY_BYTE_STRING,t);return o.Ui=o.Ui.insert(a.targetId,a),o.Cs.updateTargetData(e,a).next((function(){return o.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),rh.apply(this,arguments)}function ih(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ah(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function oh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var uh=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return(0,Z.Z)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new vi(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ui("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),sh=function(){function e(t,n,r){(0,C.Z)(this,e),this.targetId=t,this.state=n,this.error=r}return(0,Z.Z)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new vi(i.error.code,i.error.message))),a?new e(t,i.state,r):(ui("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ch=function(){function e(t,n){(0,C.Z)(this,e),this.clientId=t,this.activeTargetIds=n}return(0,Z.Z)(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Mu(),o=0;i&&o<r.activeTargetIds.length;++o)i=Na(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ui("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),lh=function(){function e(t,n){(0,C.Z)(this,e),this.clientId=t,this.onlineState=n}return(0,Z.Z)(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ui("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),hh=function(){function e(){(0,C.Z)(this,e),this.activeTargetIds=Mu()}return(0,Z.Z)(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fh=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ha(Si),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=ih(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new hh),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return(0,Z.Z)(e,[{key:"start",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,u,s,c,l,h,f,d=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=(0,K.Z)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(ih(this.persistenceKey,i)))&&(u=ch.Zi(i,o))&&(this.ur=this.ur.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(s=this.storage.getItem(this.wr))&&(c=this.yr(s))&&this.pr(c),l=(0,K.Z)(this.cr);try{for(l.s();!(h=l.n()).done;)f=h.value,this.rr(f)}catch(a){l.e(a)}finally{l.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(oh(this.persistenceKey,e));if(n){var r=sh.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(oh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return oi("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){oi("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){oi("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(oi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,s.Z)((0,a.Z)().mark((function e(){var r,i,o,u,s,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(o));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(u));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(s));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}c=function(e){var t=ua.at;if(null!=e)try{var n=JSON.parse(e);hi("number"==typeof n),t=n}catch(e){ui("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==ua.at&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return l=t.Or(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new uh(this.currentUser,e,t,n),i=ah(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=ah(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=oh(this.persistenceKey,e),i=new sh(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return ch.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return uh.Zi(new ni(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return sh.Zi(r,t)}},{key:"yr",value:function(e){return lh.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:oi("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=Mu();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),dh=function(){function e(){(0,C.Z)(this,e),this.Lr=new hh,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,Z.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new hh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),vh=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ph=function(){function e(){var t=this;(0,C.Z)(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return(0,Z.Z)(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){oi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=(0,K.Z)(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){oi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=(0,K.Z)(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),yh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},mh=function(){function e(t){(0,C.Z)(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return(0,Z.Z)(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),gh=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return(0,Z.Z)(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ei;o.setWithCredentials(!0),o.listenOnce(Qr.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Gr.NO_ERROR:var t=o.getResponseJson();oi("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Gr.TIMEOUT:oi("Connection",'RPC "'+e+'" timed out'),a(new vi(di.DEADLINE_EXCEEDED,"Request time out"));break;case Gr.HTTP_ERROR:var n=o.getStatus();if(oi("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(di).indexOf(t)>=0?t:di.UNKNOWN}(r.status);a(new vi(u,r.message))}else a(new vi(di.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new vi(di.UNAVAILABLE,"Connection failed."));break;default:li()}}finally{oi("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Kr(),a=Hr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Xr({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");oi("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new mh({Hr:function(e){l?oi("Connection","Not sending because WebChannel is closed:",e):(c||(oi("Connection","Opening WebChannel transport."),s.open(),c=!0),oi("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,Jr.EventType.OPEN,(function(){l||oi("Connection","WebChannel transport opened.")})),f(s,Jr.EventType.CLOSE,(function(){l||(l=!0,oi("Connection","WebChannel transport closed"),h.io())})),f(s,Jr.EventType.ERROR,(function(e){l||(l=!0,si("Connection","WebChannel transport errored:",e),h.io(new vi(di.UNAVAILABLE,"The operation could not be completed")))})),f(s,Jr.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];hi(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){oi("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=mu[e];if(void 0!==t)return xu(t)}(a),u=i.message;void 0===o&&(o=di.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new vi(o,u)),s.close()}else oi("Connection","WebChannel received:",n),h.ro(n)}})),f(a,Yr.STAT_EVENT,(function(e){e.stat===$r.PROXY?oi("Connection","Detected buffering proxy"):e.stat===$r.NOPROXY&&oi("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){(0,C.Z)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,Z.Z)(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);oi("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return oi("RestConnection","Received: ",e),e}),(function(t){throw si("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ri,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=yh[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function kh(){return"undefined"!=typeof window?window:null}function _h(){return"undefined"!=typeof document?document:null}function wh(e){return new Qu(e,!0)}var bh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,C.Z)(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return(0,Z.Z)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&oi("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),xh=function(){function e(t,n,r,i,a,o,u,s){(0,C.Z)(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new bh(t,n)}return(0,Z.Z)(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Oo()}},{key:"Oo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Oo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===di.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===di.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,c.Z)(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new vi(di.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.xo=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.Oo()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.No.Ro((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return oi("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.Do===e?n():(oi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Ih=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a,o,u){var s;return(0,C.Z)(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return(0,Z.Z)(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:li()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(hi(void 0===t||"string"==typeof t),ga.fromBase64String(t||"")):(hi(void 0===t||t instanceof Uint8Array),ga.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?di.UNKNOWN:xu(e.code);return new vi(t,e.message||"")}(o);n=new Bu(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=rs(e,s.document.name),l=Ju(s.document.updateTime),h=new Xa({mapValue:{fields:s.document.fields}}),f=eo.newFoundDocument(c,l,h),d=s.targetIds||[],v=s.removedTargetIds||[];n=new Vu(d,v,f.key,f)}else if("documentDelete"in t){t.documentDelete;var p=t.documentDelete;p.document;var y=rs(e,p.document),m=p.readTime?Ju(p.readTime):Ni.min(),g=eo.newNoDocument(y,m),k=p.removedTargetIds||[];n=new Vu([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=rs(e,_.document),b=_.removedTargetIds||[];n=new Vu([],b,w,null)}else{if(!("filter"in t))return li();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new wu(I),S=x.targetId;n=new qu(S,E)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return Ni.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ni.min():t.readTime?Ju(t.readTime):Ni.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=os(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=ao(r)?{documents:ds(e,r)}:{query:vs(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=$u(e,t.resumeToken):t.snapshotVersion.compareTo(Ni.min())>0&&(n.readTime=Yu(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return li()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=os(this.It),t.removeTarget=e,this.Lo(t)}}]),n}(xh),Eh=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a,o,u){var s;return(0,C.Z)(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Yo=!1,s}return(0,Z.Z)(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,(0,H.Z)((0,G.Z)(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(hi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(hi(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ju(e.updateTime):Ju(t);return n.isEqual(Ni.min())&&(n=Ju(t)),new ru(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ju(e.commitTime);return this.listener.tu(n,t)}return hi(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=os(this.It),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return hs(t.It,e)}))};this.Lo(n)}}]),n}(xh),Sh=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a){var o;return(0,C.Z)(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.It=a,o.su=!1,o}return(0,Z.Z)(n,[{key:"iu",value:function(){if(this.su)throw new vi(di.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,c.Z)(i,2),o=a[0],u=a[1];return r.So.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===di.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new vi(di.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,c.Z)(a,2),u=o[0],s=o[1];return i.So._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===di.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new vi(di.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return(0,Z.Z)((function e(){(0,C.Z)(this,e)}))}());var Th=function(){function e(t,n){(0,C.Z)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return(0,Z.Z)(e,[{key:"cu",value:function(){var e=this;0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.au("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.au("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}},{key:"au",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(ui(t),this.uu=!1):oi("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Ch=(0,Z.Z)((function e(t,n,r,i,o){var u=this;(0,C.Z)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.qr((function(e){r.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Uh(u),!e.t0){e.next=5;break}return oi("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fi(t)).wu.add(4),e.next=4,Dh(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,Zh(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new Th(r,i)}));function Zh(e){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Uh(t)){e.next=18;break}n=(0,K.Z)(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Nh.apply(this,arguments)}function Dh(e){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,K.Z)(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ah.apply(this,arguments)}function Ph(e,t){var n=fi(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Fh(n)?Mh(n):pf(n).Oo()&&Oh(n,t))}function Rh(e,t){var n=fi(e),r=pf(n);n._u.delete(t),r.Oo()&&Lh(n,t),0===n._u.size&&(r.Oo()?r.$o():Uh(n)&&n.yu.set("Unknown"))}function Oh(e,t){e.pu.Mt(t.targetId),pf(e).Ho(t)}function Lh(e,t){e.pu.Mt(t),pf(e).Jo(t)}function Mh(e){e.pu=new zu({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e._u.get(t)||null}}),pf(e).start(),e.yu.cu()}function Fh(e){return Uh(e)&&!pf(e).ko()&&e._u.size>0}function Uh(e){return 0===fi(e).wu.size}function Vh(e){e.pu=void 0}function qh(e){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Oh(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Bh.apply(this,arguments)}function jh(e,t){return zh.apply(this,arguments)}function zh(){return zh=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vh(t),Fh(t)?(t.yu.lu(n),Mh(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),zh.apply(this,arguments)}function Wh(e,t,n){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Bu&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=(0,K.Z)(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(u=o.value,e.t0=t._u.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t._u.delete(u),t.pu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),oi("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Hh(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Vu?t.pu.Gt(n):n instanceof qu?t.pu.Yt(n):t.pu.Wt(n),r.isEqual(Ni.min())){e.next=29;break}return e.prev=14,e.next=17,jl(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(ga.EMPTY_BYTE_STRING,n.snapshotVersion)),Lh(e,t);var r=new rc(n.target,t,1,n.sequenceNumber);Oh(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),oi("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Hh(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Kh.apply(this,arguments)}function Hh(e,t,n){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ea(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Dh(t);case 5:t.yu.set("Offline"),r||(r=function(){return jl(t.localStore)}),t.asyncQueue.enqueueRetryable((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,Zh(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}function Qh(e,t){return t().catch((function(n){return Hh(e,n,t)}))}function Yh(e){return $h.apply(this,arguments)}function $h(){return $h=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fi(t),r=yf(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Xh(n)){e.next=19;break}return e.prev=3,e.next=6,Kl(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=o.batchId,Jh(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Hh(n,e.t0);case 17:e.next=2;break;case 19:ef(n)&&tf(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),$h.apply(this,arguments)}function Xh(e){return Uh(e)&&e.du.length<10}function Jh(e,t){e.du.push(t);var n=yf(e);n.Oo()&&n.Xo&&n.Zo(t.mutations)}function ef(e){return Uh(e)&&!yf(e).ko()&&e.du.length>0}function tf(e){yf(e).start()}function nf(e){return rf.apply(this,arguments)}function rf(){return rf=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yf(t).nu();case 1:case"end":return e.stop()}}),e)}))),rf.apply(this,arguments)}function af(e){return of.apply(this,arguments)}function of(){return of=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yf(t),r=(0,K.Z)(t.du);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Zo(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),of.apply(this,arguments)}function uf(e,t,n){return sf.apply(this,arguments)}function sf(){return sf=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),o=tc.from(i,n,r),e.next=3,Qh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,Yh(t);case 5:case"end":return e.stop()}}),e)}))),sf.apply(this,arguments)}function cf(e,t){return lf.apply(this,arguments)}function lf(){return lf=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&yf(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bu(i=n.code)||i===di.ABORTED){e.next=7;break}return r=t.du.shift(),yf(t).Fo(),e.next=5,Qh(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Yh(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ef(t)&&tf(t);case 5:case"end":return e.stop()}}),e)}))),lf.apply(this,arguments)}function hf(e,t){return ff.apply(this,arguments)}function ff(){return ff=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=fi(t)).asyncQueue.verifyOperationInProgress(),oi("RemoteStore","RemoteStore received new credentials"),i=Uh(r),r.wu.add(3),e.next=6,Dh(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,Zh(r);case 12:case"end":return e.stop()}}),e)}))),ff.apply(this,arguments)}function df(e,t){return vf.apply(this,arguments)}function vf(){return vf=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fi(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,Zh(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Dh(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}function pf(e){return e.Iu||(e.Iu=function(e,t,n){var r=fi(e);return r.iu(),new Ih(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:qh.bind(null,e),Zr:jh.bind(null,e),zo:Wh.bind(null,e)}),e.mu.push(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Fh(e)?Mh(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Vh(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function yf(e){return e.Tu||(e.Tu=function(e,t,n){var r=fi(e);return r.iu(),new Eh(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:nf.bind(null,e),Zr:cf.bind(null,e),eu:af.bind(null,e),tu:uf.bind(null,e)}),e.mu.push(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Yh(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(oi("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var mf=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,Z.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vi(di.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function gf(e,t){if(ui("AsyncQueue","".concat(t,": ").concat(e)),ea(e))return new vi(di.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var kf=function(){function e(t){(0,C.Z)(this,e),this.comparator=t?function(e,n){return t(e,n)||Oi.comparator(e.key,n.key)}:function(e,t){return Oi.comparator(e.key,t.key)},this.keyedMap=Cu(),this.sortedSet=new ha(this.comparator)}return(0,Z.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),_f=function(){function e(){(0,C.Z)(this,e),this.Eu=new ha(Oi.comparator)}return(0,Z.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):li():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),wf=function(){function e(t,n,r,i,a,o,u,s,c){(0,C.Z)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return(0,Z.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ro(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,kf.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),bf=(0,Z.Z)((function e(){(0,C.Z)(this,e),this.Ru=void 0,this.listeners=[]})),xf=(0,Z.Z)((function e(){(0,C.Z)(this,e),this.queries=new Iu((function(e){return Oo(e)}),Ro),this.onlineState="Unknown",this.bu=new Set}));function If(e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fi(t),i=n.query,o=!1,(u=r.queries.get(i))||(o=!0,u=new bf),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=gf(e.t0,"Initialization of query '".concat(Lo(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.Pu(r.onlineState),u.Ru&&n.vu(u.Ru)&&Nf(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ef.apply(this,arguments)}function Sf(e,t){return Tf.apply(this,arguments)}function Tf(){return Tf=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fi(t),i=n.query,o=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Cf(e,t){var n,r=fi(e),i=!1,a=(0,K.Z)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=(0,K.Z)(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Ru=o}}}catch(h){a.e(h)}finally{a.f()}i&&Nf(r)}function Zf(e,t,n){var r=fi(e),i=r.queries.get(t);if(i){var a,o=(0,K.Z)(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Nf(e){e.bu.forEach((function(e){e.next()}))}var Df=function(){function e(t,n,r){(0,C.Z)(this,e),this.query=t,this.Vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return(0,Z.Z)(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=(0,K.Z)(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new wf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.Vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}]),e}(),Af=function(){function e(t,n){(0,C.Z)(this,e),this.payload=t,this.byteLength=n}return(0,Z.Z)(e,[{key:"Ou",value:function(){return"metadata"in this.payload}}]),e}(),Pf=function(){function e(t){(0,C.Z)(this,e),this.It=t}return(0,Z.Z)(e,[{key:"Ji",value:function(e){return rs(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?cs(this.It,e.document,!1):eo.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Ju(e)}}]),e}(),Rf=function(){function e(t,n,r){(0,C.Z)(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Of(t)}return(0,Z.Z)(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Ai.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Pf(this.It),i=(0,K.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=(0,K.Z)(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Ou()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eh(this.localStore,new Pf(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=(0,K.Z)(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,nh(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Of(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Lf=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.key=t})),Mf=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.key=t})),Ff=function(){function e(t,n){(0,C.Z)(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ou(),this.mutatedKeys=Ou(),this.Gu=Uo(t),this.Qu=new kf(this.Gu)}return(0,Z.Z)(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new _f,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Mo(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),v=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),v=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),v=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),v=!0):l&&!h&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return li()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new wf(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _f,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Ou(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Mf(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Lf(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=Ou();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return wf.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Uf=(0,Z.Z)((function e(t,n,r){(0,C.Z)(this,e),this.query=t,this.targetId=n,this.view=r})),Vf=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.key=t,this.nc=!1})),qf=function(){function e(t,n,r,i,a,o){(0,C.Z)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Iu((function(e){return Oo(e)}),Ro),this.rc=new Map,this.oc=new Set,this.uc=new ha(Oi.comparator),this.cc=new Map,this.ac=new _l,this.hc={},this.lc=new Map,this.fc=Yc.vn(),this.onlineState="Unknown",this.dc=void 0}return(0,Z.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Bf(e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Od(t),!(u=r.ic.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),o=u.view.ec(),e.next=15;break;case 6:return e.next=8,Hl(r.localStore,Ao(n));case 8:return s=e.sent,r.isPrimaryClient&&Ph(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,zf(r,n,i,"current"===c,s.resumeToken);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}function zf(e,t,n,r,i){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i,o){var u,c,l,h,f,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.Wu(r),e.t0=o.$i,!e.t0){e.next=6;break}return e.next=5,Yl(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,o)}));case 5:o=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,u),e.abrupt("return",(hd(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Yl(t.localStore,n,!0);case 3:return u=e.sent,c=new Ff(n,u.Hi),l=c.Wu(u.documents),h=Uu.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,o),f=c.applyChanges(l,t.isPrimaryClient,h),hd(t,r,f.Xu),d=new Uf(n,r,c),e.abrupt("return",(t.ic.set(n,d),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Kf(e,t){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fi(t),i=r.ic.get(n),!((o=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,o.filter((function(e){return!Ro(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Gl(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Rh(r.remoteStore,i.targetId),cd(r,i.targetId)})).catch(Hi);case 9:e.next=14;break;case 11:return cd(r,i.targetId),e.next=14,Gl(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Hf.apply(this,arguments)}function Gf(e,t,n){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ld(t),e.prev=1,e.next=4,function(e,t){var n,r,i=fi(e),a=Zi.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ou());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Su(),s=Ou();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=(0,K.Z)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=lu(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new du(c.key,l,Ja(l.value.mapValue),iu.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Zu(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new ha(Si)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,vd(i,o.changes);case 9:return e.next=11,Yh(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=gf(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Qf.apply(this,arguments)}function Yf(e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.prev=1,e.next=4,zl(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(hi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?hi(n.nc):e.removedDocuments.size>0&&(hi(n.nc),n.nc=!1))})),e.next=8,vd(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Hi(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),$f.apply(this,arguments)}function Xf(e,t,n){var r=fi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=fi(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=(0,K.Z)(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Nf(n)}(r.eventManager,t),i.length&&r.sc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Jf(e,t,n){return ed.apply(this,arguments)}function ed(){return ed=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u,s,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=fi(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.cc.get(n),!(u=o&&o.key)){e.next=14;break}return s=(s=new ha(Oi.comparator)).insert(u,eo.newNoDocument(u,Ni.min())),c=Ou().add(u),l=new Fu(Ni.min(),new Map,new va(Si),s,c),e.next=9,Yf(i,l);case 9:i.uc=i.uc.remove(u),i.cc.delete(n),dd(i),e.next=16;break;case 14:return e.next=16,Gl(i.localStore,n,!1).then((function(){return cd(i,n,r)})).catch(Hi);case 16:case"end":return e.stop()}}),e)}))),ed.apply(this,arguments)}function td(e,t){return nd.apply(this,arguments)}function nd(){return nd=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),i=n.batch.batchId,e.prev=1,e.next=4,Bl(r.localStore,n);case 4:return o=e.sent,sd(r,i,null),ud(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,vd(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hi(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),nd.apply(this,arguments)}function rd(e,t,n){return id.apply(this,arguments)}function id(){return id=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),e.prev=1,e.next=4,function(e,t){var n=fi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return hi(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,sd(i,n,r),ud(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,vd(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hi(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),id.apply(this,arguments)}function ad(e,t){return od.apply(this,arguments)}function od(){return od=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uh((r=fi(t)).remoteStore)||oi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=fi(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.lc.get(i)||[]).push(n),r.lc.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=gf(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),od.apply(this,arguments)}function ud(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function sd(e,t,n){var r=fi(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function cd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=(0,K.Z)(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||ld(e,t)}))}function ld(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Rh(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),dd(e))}function hd(e,t,n){var r,i=(0,K.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Lf?(e.ac.addReference(a.key,t),fd(e,a)):a instanceof Mf?(oi("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||ld(e,a.key)):li()}}catch(o){i.e(o)}finally{i.f()}}function fd(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(oi("SyncEngine","New document in limbo: "+n),e.oc.add(r),dd(e))}function dd(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Oi(Ai.fromString(t)),r=e.fc.next();e.cc.set(r,new Vf(n)),e.uc=e.uc.insert(n,r),Ph(e.remoteStore,new rc(Ao(So(n.path)),r,2,ua.at))}}function vd(e,t,n){return pd.apply(this,arguments)}function pd(){return pd=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fi(t),o=[],u=[],c=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){c.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=Ll.Ci(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.sc.zo(o),e.next=9,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u,s,c,l,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Qi.forEach(n,(function(t){return Qi.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Qi.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ea(e.t0)){e.next=10;break}throw e.t0;case 10:oi("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=(0,K.Z)(n);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.targetId,u.fromCache||(c=r.Ui.get(s),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),r.Ui=r.Ui.insert(s,h))}catch(a){i.e(a)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),pd.apply(this,arguments)}function yd(e,t){return md.apply(this,arguments)}function md(){return md=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=fi(t)).currentUser.isEqual(n)){e.next=11;break}return oi("SyncEngine","User change. New user:",n.toKey()),e.next=5,Vl(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new vi(di.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,vd(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),md.apply(this,arguments)}function gd(e,t){var n=fi(e),r=n.cc.get(t);if(r&&r.nc)return Ou().add(r.key);var i=Ou(),a=n.rc.get(t);if(!a)return i;var o,u=(0,K.Z)(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function kd(e,t){return _d.apply(this,arguments)}function _d(){return _d=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.next=3,Yl(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&hd(r,n.targetId,o.Xu),o));case 6:case"end":return e.stop()}}),e)}))),_d.apply(this,arguments)}function wd(e,t){return bd.apply(this,arguments)}function bd(){return bd=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.abrupt("return",Xl(r.localStore,n).then((function(e){return vd(r,e)})));case 2:case"end":return e.stop()}}),e)}))),bd.apply(this,arguments)}function xd(e,t,n,r){return Id.apply(this,arguments)}function Id(){return Id=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=fi(t),e.next=3,function(e,t){var n=fi(e),r=fi(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Qi.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Yh(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(sd(o,n,i||null),ud(o,n),function(e,t){fi(fi(e).mutationQueue).An(t)}(o.localStore,n)):li();case 11:return e.next=13,vd(o,u);case 13:e.next=16;break;case 15:oi("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Id.apply(this,arguments)}function Ed(e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u,s,c,l,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Od(r=fi(t)),Ld(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Td(r,i.toArray());case 5:return o=e.sent,r.dc=!0,e.next=9,df(r.remoteStore,!0);case 9:u=(0,K.Z)(o);try{for(u.s();!(s=u.n()).done;)c=s.value,Ph(r.remoteStore,c)}catch(a){u.e(a)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return l=[],h=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):h=h.then((function(){return cd(r,t),Gl(r.localStore,t,!0)})),Rh(r.remoteStore,t)})),e.next=19,h;case 19:return e.next=21,Td(r,l);case 21:return function(e){var t=fi(e);t.cc.forEach((function(e,n){Rh(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new ha(Oi.comparator)}(r),r.dc=!1,e.next=25,df(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Sd.apply(this,arguments)}function Td(e,t,n){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u,s,c,l,h,f,d,v,p,y,m,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=fi(t),o=[],u=[],s=(0,K.Z)(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,h=void 0,!(f=i.rc.get(l))||0===f.length){e.next=34;break}return e.next=11,Hl(i.localStore,Ao(f[0]));case 11:h=e.sent,d=(0,K.Z)(f),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return p=v.value,y=i.ic.get(p),e.next=20,kd(i,y);case 20:(m=e.sent).snapshot&&u.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,$l(i.localStore,l);case 36:return g=e.sent,e.next=39,Hl(i.localStore,g);case 39:return h=e.sent,e.next=42,zf(i,Zd(g),l,!1,h.resumeToken);case 42:o.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.zo(u),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Cd.apply(this,arguments)}function Zd(e){return Eo(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Nd(e){var t=fi(e);return fi(fi(t.localStore).persistence).vi()}function Dd(e,t,n,r){return Ad.apply(this,arguments)}function Ad(){return Ad=(0,s.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=fi(t)).dc){e.next=3;break}return e.abrupt("return",void oi("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=o.rc.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Xl(o.localStore,Fo(u[0]));case 10:return s=e.sent,c=Fu.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ga.EMPTY_BYTE_STRING),e.next=14,vd(o,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,Gl(o.localStore,n,!0);case 17:return cd(o,n,i),e.abrupt("break",20);case 19:li();case 20:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Pd(e,t,n){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u,s,c,l,h,f,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Od(t)).dc){e.next=45;break}o=(0,K.Z)(n),e.prev=3,o.s();case 5:if((u=o.n()).done){e.next=21;break}if(s=u.value,!i.rc.has(s)){e.next=10;break}return oi("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,$l(i.localStore,s);case 12:return c=e.sent,e.next=15,Hl(i.localStore,c);case 15:return l=e.sent,e.next=18,zf(i,Zd(c),l.targetId,!1,l.resumeToken);case 18:Ph(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:h=(0,K.Z)(r),e.prev=30,d=(0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Gl(i.localStore,t,!1).then((function(){Rh(i.remoteStore,t),cd(i,t)})).catch(Hi);case 5:case"end":return e.stop()}}),e)})),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Rd.apply(this,arguments)}function Od(e){var t=fi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jf.bind(null,t),t.sc.zo=Cf.bind(null,t.eventManager),t.sc.wc=Zf.bind(null,t.eventManager),t}function Ld(e){var t=fi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=td.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rd.bind(null,t),t}function Md(e,t,n){var r=fi(e);(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=fi(e),r=Ju(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Of(i)),o=new Rf(i,t.localStore,n.It),e.next=15,n.mc();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,o.Fu(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.mc();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return c=e.sent,e.next=31,vd(t,c.Lu,void 0);case 31:return e.next=33,function(e,t){var n=fi(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(si("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Fd=function(){function e(){(0,C.Z)(this,e),this.synchronizeTabs=!1}return(0,Z.Z)(e,[{key:"initialize",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=wh(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Ul(this.persistence,new Ml,e.initialUser,this.It)}},{key:"yc",value:function(e){return new Sl(Cl.Bs,this.It)}},{key:"gc",value:function(e){return new dh}},{key:"terminate",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ud=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return(0,Z.Z)(n,[{key:"initialize",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.Z)((0,G.Z)(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Ld(this.Ac.syncEngine);case 6:return e.next=8,Yh(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Ul(this.persistence,new Ml,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new rl(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new oa(t,this.persistence);return new aa(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Ol(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Bc.withCacheSize(this.cacheSizeBytes):Bc.DEFAULT;return new Al(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kh(),_h(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new dh}}]),n}(Fd),Vd=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,Z.Z)(n,[{key:"initialize",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.Z)((0,G.Z)(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof fh,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:xd.bind(null,r),$r:Dd.bind(null,r),Br:Pd.bind(null,r),vi:Nd.bind(null,r),Mr:wd.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ed(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=kh();if(!fh.C(t))throw new vi(di.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ol(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Ud),qd=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"initialize",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Xf(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=yd.bind(null,this.syncEngine),e.next=12,df(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new xf}},{key:"createDatastore",value:function(e){var t,n=wh(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new gh(t));return function(e,t,n,r){return new Sh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Xf(o.syncEngine,e,0)},a=ph.C()?new ph:new vh,new Ch(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new qf(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fi(t),oi("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Dh(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Bd(e,t,n){if(!n)throw new vi(di.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jd(e,t,n,r){if(!0===t&&!0===r)throw new vi(di.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function zd(e){if(!Oi.isDocumentKey(e))throw new vi(di.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wd(e){if(Oi.isDocumentKey(e))throw new vi(di.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Kd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":li()}function Hd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vi(di.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Kd(e);throw new vi(di.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Gd(e,t){if(t<=0)throw new vi(di.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Qd=new Map,Yd=function(){function e(t){var n;if((0,C.Z)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new vi(di.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new vi(di.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,jd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return(0,Z.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),$d=function(){function e(t,n,r,i){(0,C.Z)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yd({}),this._settingsFrozen=!1}return(0,Z.Z)(e,[{key:"app",get:function(){if(!this._app)throw new vi(di.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new vi(di.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new mi;switch(e.type){case"gapi":var t=e.client;return new wi(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vi(di.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Qd.get(e);t&&(oi("ComponentProvider","Removing Datastore"),Qd.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Xd(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Hd(e,$d))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&si("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ni.MOCK_USER;else{o=(0,N.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new vi(di.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ni(s)}e._authCredentials=new gi(new yi(o,u))}}var Jd=function(){function e(t,n,r){(0,C.Z)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,Z.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new tv(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ev=function(){function e(t,n,r){(0,C.Z)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,Z.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),tv=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this,e,r,So(i)))._path=i,a.type="collection",a}return(0,Z.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Jd(this.firestore,null,new Oi(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ev);function nv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,N.m9)(e),Bd("collection","path",t),e instanceof $d){var a=Ai.fromString.apply(Ai,[t].concat(r));return Wd(a),new tv(e,null,a)}if(!(e instanceof Jd||e instanceof tv))throw new vi(di.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ai.fromString.apply(Ai,[t].concat(r)));return Wd(o),new tv(e.firestore,null,o)}function rv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,N.m9)(e),1===arguments.length&&(t=Ei.R()),Bd("doc","path",t),e instanceof $d){var a=Ai.fromString.apply(Ai,[t].concat(r));return zd(a),new Jd(e,null,new Oi(a))}if(!(e instanceof Jd||e instanceof tv))throw new vi(di.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ai.fromString.apply(Ai,[t].concat(r)));return zd(o),new Jd(e.firestore,e instanceof tv?e.converter:null,new Oi(o))}function iv(e,t){return e=(0,N.m9)(e),t=(0,N.m9)(t),(e instanceof Jd||e instanceof tv)&&(t instanceof Jd||t instanceof tv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function av(e,t){return e=(0,N.m9)(e),t=(0,N.m9)(t),e instanceof ev&&t instanceof ev&&e.firestore===t.firestore&&Ro(e._query,t._query)&&e.converter===t.converter}function ov(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,s.Z)((0,a.Z)().mark((function r(){var i;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var uv=function(){function e(t){(0,C.Z)(this,e),this.observer=t,this.muted=!1}return(0,Z.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e)}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),sv=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this.Pc=t,this.It=n,this.metadata=new pi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return(0,Z.Z)(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new Af(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),cv=function(){function e(t){(0,C.Z)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,Z.Z)(e,[{key:"lookup",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new vi(di.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),i=os(r.It)+"/documents",o={documents:n.map((function(e){return ns(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,o,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=ls(r.It,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());hi(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ku(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Oi.fromPath(t);n.mutations.push(new _u(r,n.precondition(r)))})),e.next=7,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),i=os(r.It)+"/documents",o={writes:n.map((function(e){return hs(r.It,e)}))},e.next=3,r.ao("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw li();t=Ni.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new vi(di.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ni.min())?iu.exists(!1):iu.updateTime(t):iu.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ni.min()))throw new vi(di.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return iu.updateTime(t)}return iu.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),lv=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new bh(this.asyncQueue,"transaction_retry")}return(0,Z.Z)(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.No.Ro((0,s.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new cv(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Ca(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!bu(t)}return!1}}]),e}(),hv=function(){function e(t,n,r,i){var o=this;(0,C.Z)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ni.UNAUTHENTICATED,this.clientId=Ei.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return oi("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return(0,Z.Z)(e,[{key:"getConfiguration",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new vi(di.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,s.Z)((0,a.Z)().mark((function n(){var r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=gf(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function fv(e,t){return dv.apply(this,arguments)}function dv(){return dv=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),oi("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Vl(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function vv(e,t){return pv.apply(this,arguments)}function pv(){return pv=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,yv(t);case 3:return r=e.sent,oi("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return hf(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return hf(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),pv.apply(this,arguments)}function yv(e){return mv.apply(this,arguments)}function mv(){return mv=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return oi("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,fv(t,new Fd);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function gv(e){return kv.apply(this,arguments)}function kv(){return kv=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return oi("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,vv(t,new qd);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function _v(e){return yv(e).then((function(e){return e.persistence}))}function wv(e){return yv(e).then((function(e){return e.localStore}))}function bv(e){return gv(e).then((function(e){return e.remoteStore}))}function xv(e){return gv(e).then((function(e){return e.syncEngine}))}function Iv(e){return gv(e).then((function(e){return e.datastore}))}function Ev(e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Bf.bind(null,n.syncEngine),r.onUnlisten=Kf.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Tv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function i(){return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new uv({next:function(a){t.enqueueAndForget((function(){return Sf(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new vi(di.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new vi(di.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Df(So(n.path),a,{includeMetadataChanges:!0,ku:!0});return If(e,o)},i.next=3,Ev(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Cv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function i(){return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new uv({next:function(n){t.enqueueAndForget((function(){return Sf(e,o)})),n.fromCache&&"server"===r.source?i.reject(new vi(di.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Df(n,a,{includeMetadataChanges:!0,ku:!0});return If(e,o)},i.next=3,Ev(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Zv=function(){function e(){var t=this;(0,C.Z)(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new bh(this,"async_queue_retry"),this.Wc=function(){var e=_h();e&&oi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=_h();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return(0,Z.Z)(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=_h();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new pi;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ea(e.t0)){e.next=12;break}throw e.t0;case 12:oi("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.No.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ui("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=mf.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&li()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=(0,K.Z)(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=(0,K.Z)(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function Nv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=(0,K.Z)(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Dv=function(){function e(){(0,C.Z)(this,e),this._progressObserver={},this._taskCompletionResolver=new pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,Z.Z)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Av=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a){var o;return(0,C.Z)(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Zv,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,Z.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||Rv(this),this._firestoreClient.terminate()}}]),n}($d);function Pv(e){return e._firestoreClient||Rv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Rv(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Sa(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new hv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ov(e,t,n){var r=new pi;return e.asyncQueue.enqueue((0,s.Z)((0,a.Z)().mark((function i(){var o;return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,fv(e,n);case 3:return i.next=5,vv(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===di.FAILED_PRECONDITION||e.code===di.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(o=i.t0)){i.next=13;break}throw o;case 13:si("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Lv(e){return function(e){return e.asyncQueue.enqueue((0,s.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_v(e);case 2:return n=t.sent,t.next=5,bv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=fi(e);return t.wu.delete(0),Zh(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Pv(e=Hd(e,Av)))}function Mv(e){return function(e){return e.asyncQueue.enqueue((0,s.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_v(e);case 2:return n=t.sent,t.next=5,bv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fi(t)).wu.add(0),e.next=4,Dh(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Pv(e=Hd(e,Av)))}function Fv(e,t){var n=Pv(e=Hd(e,Av)),r=new Dv;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new sv(e,t)}(function(e,t){if(e instanceof Uint8Array)return ov(e,t);if(e instanceof ArrayBuffer)return ov(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,wh(t));e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Md,t.next=3,xv(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Uv(e,t){return function(e,t){return e.asyncQueue.enqueue((0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=fi(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,wv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Pv(e=Hd(e,Av)),t).then((function(t){return t?new ev(e,null,t.query):null}))}function Vv(e){if(e._initialized||e._terminated)throw new vi(di.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var qv=function(){function e(t){(0,C.Z)(this,e),this._byteString=t}return(0,Z.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ga.fromBase64String(t))}catch(t){throw new vi(di.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ga.fromUint8Array(t))}}]),e}(),Bv=function(){function e(){(0,C.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new vi(di.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ri(n)}return(0,Z.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var jv=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this._methodName=t})),zv=function(){function e(t,n){if((0,C.Z)(this,e),!isFinite(t)||t<-90||t>90)throw new vi(di.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new vi(di.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,Z.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Si(this._lat,e._lat)||Si(this._long,e._long)}}]),e}(),Wv=/^__.*__$/,Kv=function(){function e(t,n,r){(0,C.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Z.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new du(e,this.data,this.fieldMask,t,this.fieldTransforms):new fu(e,this.data,t,this.fieldTransforms)}}]),e}(),Hv=function(){function e(t,n,r){(0,C.Z)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,Z.Z)(e,[{key:"toMutation",value:function(e,t){return new du(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Gv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw li()}}var Qv=function(){function e(t,n,r,i,a,o){(0,C.Z)(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,Z.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return pp(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Gv(this.sa)&&Wv.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),Yv=function(){function e(t,n,r){(0,C.Z)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||wh(t)}return(0,Z.Z)(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Qv({sa:e,methodName:t,fa:n,path:Ri.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function $v(e){var t=e._freezeSettings(),n=wh(e._databaseId);return new Yv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Xv(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);hp("Data must be an object, but it was:",o,r);var u,s,c=cp(r,o);if(a.merge)u=new ma(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=(0,K.Z)(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=fp(t,d,n);if(!o.contains(v))throw new vi(di.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));yp(h,v)||h.push(v)}}catch(p){f.e(p)}finally{f.f()}u=new ma(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Kv(new Xa(c),u,s)}var Jv=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jv);function ep(e,t,n){return new Qv({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var tp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"_toFieldTransform",value:function(e){return new nu(e.path,new Go)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jv),np=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e))._a=r,i}return(0,Z.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=ep(this,e,!0),n=this._a.map((function(e){return sp(e,t)})),r=new Qo(n);return new nu(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jv),rp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e))._a=r,i}return(0,Z.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=ep(this,e,!0),n=this._a.map((function(e){return sp(e,t)})),r=new $o(n);return new nu(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jv),ip=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e)).wa=r,i}return(0,Z.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=new Jo(e.It,jo(e.It,this.wa));return new nu(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jv);function ap(e,t,n,r){var i=e.da(1,t,n);hp("Data must be an object, but it was:",i,r);var a=[],o=Xa.empty();ca(r,(function(e,r){var u=vp(t,e,n);r=(0,N.m9)(r);var s=i.ca(u);if(r instanceof Jv)a.push(u);else{var c=sp(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ma(a);return new Hv(o,u,i.fieldTransforms)}function op(e,t,n,r,i,a){var o=e.da(1,t,n),u=[fp(t,r,n)],s=[i];if(a.length%2!=0)throw new vi(di.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(fp(t,a[c])),s.push(a[c+1]);for(var l=[],h=Xa.empty(),f=u.length-1;f>=0;--f)if(!yp(l,u[f])){var d=u[f],v=s[f];v=(0,N.m9)(v);var p=o.ca(d);if(v instanceof Jv)l.push(d);else{var y=sp(v,p);null!=y&&(l.push(d),h.set(d,y))}}var m=new ma(l);return new Hv(h,m,o.fieldTransforms)}function up(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return sp(n,e.da(r?4:3,t))}function sp(e,t){if(lp(e=(0,N.m9)(e)))return hp("Unsupported field value:",t,e),cp(e,t);if(e instanceof jv)return function(e,t){if(!Gv(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=(0,K.Z)(e);try{for(a.s();!(n=a.n()).done;){var o=sp(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,N.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jo(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Zi.fromDate(e);return{timestampValue:Yu(t.It,n)}}if(e instanceof Zi){var r=new Zi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Yu(t.It,r)}}if(e instanceof zv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof qv)return{bytesValue:$u(t.It,e._byteString)};if(e instanceof Jd){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:es(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(Kd(e)))}(e,t)}function cp(e,t){var n={};return la(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ca(e,(function(e,r){var i=sp(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function lp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zi||e instanceof zv||e instanceof qv||e instanceof Jd||e instanceof jv)}function hp(e,t,n){if(!lp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Kd(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function fp(e,t,n){if((t=(0,N.m9)(t))instanceof Bv)return t._internalPath;if("string"==typeof t)return vp(e,t);throw pp("Field path arguments must be of type string or ",e,!1,void 0,n)}var dp=new RegExp("[~\\*/\\[\\]]");function vp(e,t,n){if(t.search(dp)>=0)throw pp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return(0,j.Z)(Bv,(0,Q.Z)(t.split(".")))._internalPath}catch(r){throw pp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pp(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new vi(di.INVALID_ARGUMENT,u+e+s)}function yp(e,t){return e.some((function(e){return e.isEqual(t)}))}var mp=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,Z.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Jd(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new gp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(kp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),gp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"data",value:function(){return(0,H.Z)((0,G.Z)(n.prototype),"data",this).call(this)}}]),n}(mp);function kp(e,t){return"string"==typeof t?vp(e,t):t instanceof Bv?t._internalPath:t._delegate._internalPath}function _p(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vi(di.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wp=(0,Z.Z)((function e(){(0,C.Z)(this,e)}));function bp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var xp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return(0,Z.Z)(n,[{key:"_apply",value:function(e){var t=$v(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new vi(di.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Rp(o,a);var s,c=[],l=(0,K.Z)(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(Pp(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Pp(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Rp(o,a),u=up(n,"where",o,"in"===a||"not-in"===a);var f=co.create(i,a,u);return function(e,t){if(t.dt()){var n=Zo(e);if(null!==n&&!n.isEqual(t.field))throw new vi(di.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Co(e);null!==r&&Op(e,t.field,r)}var i=function(e,t){var n,r=(0,K.Z)(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new vi(di.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new vi(di.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ev(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(wp);var Ip=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return(0,Z.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new vi(di.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new vi(di.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new _o(t,n);return function(e,t){if(null===Co(e)){var n=Zo(e);null!==n&&Op(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new ev(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Io(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(wp);var Ep=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return(0,Z.Z)(n,[{key:"_apply",value:function(e){return new ev(e.firestore,e.converter,Po(e._query,this.Ia,this.Ta))}}]),n}(wp);var Sp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return(0,Z.Z)(n,[{key:"_apply",value:function(e){var t=Ap(e,this.type,this.Ea,this.Aa);return new ev(e.firestore,e.converter,function(e,t){return new Io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(wp);function Tp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sp("startAt",t,!0)}function Cp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sp("startAfter",t,!1)}var Zp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i){var a;return(0,C.Z)(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return(0,Z.Z)(n,[{key:"_apply",value:function(e){var t=Ap(e,this.type,this.Ea,this.Aa);return new ev(e.firestore,e.converter,function(e,t){return new Io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(wp);function Np(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zp("endBefore",t,!1)}function Dp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zp("endAt",t,!0)}function Ap(e,t,n,r){if(n[0]=(0,N.m9)(n[0]),n[0]instanceof mp)return function(e,t,n,r,i){if(!r)throw new vi(di.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=(0,K.Z)(Do(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Va(t,r.key));else{var c=r.data.field(s.field);if(xa(c))throw new vi(di.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new vi(di.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new ko(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=$v(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new vi(di.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new vi(di.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!No(e)&&-1!==c.indexOf("/"))throw new vi(di.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ai.fromString(c));if(!Oi.isDocumentKey(l))throw new vi(di.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Oi(l);u.push(Va(t,h))}else{var f=up(n,r,c);u.push(f)}}return new ko(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Pp(e,t,n){if("string"==typeof(n=(0,N.m9)(n))){if(""===n)throw new vi(di.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!No(t)&&-1!==n.indexOf("/"))throw new vi(di.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ai.fromString(n));if(!Oi.isDocumentKey(r))throw new vi(di.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Va(e,new Oi(r))}if(n instanceof Jd)return Va(e,n._key);throw new vi(di.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Kd(n),"."))}function Rp(e,t){if(!Array.isArray(e)||0===e.length)throw new vi(di.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new vi(di.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Op(e,t,n){if(!n.isEqual(t))throw new vi(di.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Lp=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw li()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ca(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new zv(wa(e.latitude),wa(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ia(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ea(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=_a(e);return new Zi(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ai.fromString(e);hi(Is(n));var r=new Ta(n.get(1),n.get(3)),i=new Oi(n.popFirst(5));return r.isEqual(t)||ui("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Mp(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Fp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Z.Z)(n,[{key:"convertBytes",value:function(e){return new qv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jd(this.firestore,null,t)}}]),n}(Lp),Up=function(){function e(t,n){(0,C.Z)(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,Z.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Vp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a,o,u){var s;return(0,C.Z)(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,Z.Z)(n,[{key:"exists",value:function(){return(0,H.Z)((0,G.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new qp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(kp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(mp),qp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,H.Z)((0,G.Z)(n.prototype),"data",this).call(this,e)}}]),n}(Vp),Bp=function(){function e(t,n,r,i){(0,C.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Up(i.hasPendingWrites,i.fromCache),this.query=r}return(0,Z.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new qp(n._firestore,n._userDataWriter,r.key,r,new Up(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new vi(di.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new qp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Up(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new qp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Up(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:jp(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function jp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return li()}}function zp(e,t){return e instanceof Vp&&t instanceof Vp?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Bp&&t instanceof Bp&&e._firestore===t._firestore&&av(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Wp=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Z.Z)(n,[{key:"convertBytes",value:function(e){return new qv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jd(this.firestore,null,t)}}]),n}(Lp);function Kp(e){e=Hd(e,Jd);var t=Hd(e.firestore,Av),n=Pv(t),r=new Wp(t);return function(e,t){var n=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=fi(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new vi(di.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=gf(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,wv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Vp(t,r,e._key,n,new Up(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Hp(e){e=Hd(e,ev);var t=Hd(e.firestore,Av),n=Pv(t),r=new Wp(t);return function(e,t){var n=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,u,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yl(t,n,!0);case 3:i=e.sent,o=new Ff(n,i.Hi),u=o.Wu(i.documents),s=o.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=gf(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,wv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Bp(t,r,e,n)}))}function Gp(e,t,n){e=Hd(e,Jd);var r=Hd(e.firestore,Av),i=Mp(e.converter,t,n);return Xp(r,[Xv($v(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,iu.none())])}function Qp(e,t,n){e=Hd(e,Jd);for(var r=Hd(e.firestore,Av),i=$v(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Xp(r,[("string"==typeof(t=(0,N.m9)(t))||t instanceof Bv?op(i,"updateDoc",e._key,t,n,o):ap(i,"updateDoc",e._key,t)).toMutation(e._key,iu.exists(!0))])}function Yp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,u;e=(0,N.m9)(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Nv(n[l])||(c=n[l],l++);var h,f,d,v={includeMetadataChanges:c.includeMetadataChanges};if(Nv(n[l])){var p=n[l];n[l]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[l+1]=null===(o=p.error)||void 0===o?void 0:o.bind(p),n[l+2]=null===(u=p.complete)||void 0===u?void 0:u.bind(p)}if(e instanceof Jd)f=Hd(e.firestore,Av),d=So(e._key.path),h={next:function(t){n[l]&&n[l](Jp(f,e,t))},error:n[l+1],complete:n[l+2]};else{var y=Hd(e,ev);f=Hd(y.firestore,Av),d=y._query;var m=new Wp(f);h={next:function(e){n[l]&&n[l](new Bp(f,m,y,e))},error:n[l+1],complete:n[l+2]},_p(e._query)}return function(e,t,n,r){var i=new uv(r),o=new Df(t,i,n);return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=If,t.next=3,Ev(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sf,t.next=3,Ev(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Pv(f),d,v,h)}function $p(e,t){return function(e,t){var n=new uv(t);return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fi(e).bu.add(t),t.next()},t.next=3,Ev(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fi(e).bu.delete(t)},t.next=3,Ev(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Pv(e=Hd(e,Av)),Nv(t)?t:{next:t})}function Xp(e,t){return function(e,t){var n=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Gf,r.next=3,xv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Pv(e),t)}function Jp(e,t,n){var r=n.docs.get(t._key),i=new Wp(e);return new Vp(e,i,t._key,r,new Up(n.hasPendingWrites,n.fromCache),t.converter)}var ey={maxAttempts:5},ty=function(){function e(t,n){(0,C.Z)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$v(t)}return(0,Z.Z)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ny(e,this._firestore),i=Mp(r.converter,t,n),a=Xv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,iu.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ny(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=(0,N.m9)(t))||t instanceof Bv?op(this._dataReader,"WriteBatch.update",i._key,t,n,o):ap(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,iu.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ny(e,this._firestore);return this._mutations=this._mutations.concat(new ku(t._key,iu.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new vi(di.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ny(e,t){if((e=(0,N.m9)(e)).firestore!==t)throw new vi(di.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ry=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,r))._firestore=e,i}return(0,Z.Z)(n,[{key:"get",value:function(e){var t=this,r=ny(e,this._firestore),i=new Wp(this._firestore);return(0,H.Z)((0,G.Z)(n.prototype),"get",this).call(this,e).then((function(e){return new Vp(t._firestore,i,r._key,e._document,new Up(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){(0,C.Z)(this,e),this._firestore=t,this._transaction=n,this._dataReader=$v(t)}return(0,Z.Z)(e,[{key:"get",value:function(e){var t=this,n=ny(e,this._firestore),r=new Fp(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return li();var i=e[0];if(i.isFoundDocument())return new mp(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new mp(t._firestore,r,n._key,null,n.converter);throw li()}))}},{key:"set",value:function(e,t,n){var r=ny(e,this._firestore),i=Mp(r.converter,t,n),a=Xv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ny(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=(0,N.m9)(t))||t instanceof Bv?op(this._dataReader,"Transaction.update",i._key,t,n,o):ap(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ny(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function iy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new np("arrayUnion",t)}function ay(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rp("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ri=e}(A.SDK_VERSION),(0,A._registerComponent)(new D.wA("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Av(new ki(e.getProvider("auth-internal")),new xi(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vi(di.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),(0,A.registerVersion)(ti,"3.7.1",e),(0,A.registerVersion)(ti,"3.7.1","esm2017")}();function oy(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new vi("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function uy(){if("undefined"===typeof Uint8Array)throw new vi("unimplemented","Uint8Arrays are not available in this environment.")}function sy(){if("undefined"==typeof atob)throw new vi("unimplemented","Blobs are unavailable in Firestore in this environment.")}var cy=function(){function e(t){(0,C.Z)(this,e),this._delegate=t}return(0,Z.Z)(e,[{key:"toBase64",value:function(){return sy(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return uy(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return sy(),new e(qv.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return uy(),new e(qv.fromUint8Array(t))}}]),e}();function ly(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=(0,K.Z)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hy=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Vv(e=Hd(e,Av));var n=Pv(e),r=e._freezeSettings(),i=new qd;return Ov(n,i,new Ud(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Vv(e=Hd(e,Av));var t=Pv(e),n=e._freezeSettings(),r=new qd;return Ov(t,r,new Vd(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new vi(di.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new pi;return e._queue.enqueueAndForgetEvenWhileRestricted((0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($i.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,$i.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ol(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),fy=function(){function e(t,n,r){var i=this;(0,C.Z)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ta||(this._appCompat=t)}return(0,Z.Z)(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Xd(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Lv(this._delegate)}},{key:"disableNetwork",value:function(){return Mv(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&jd("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=ad,n.next=3,xv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Pv(e=Hd(e,Av)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return $p(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new vi("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Sy(this,nv(this._delegate,e))}catch(t){throw gy(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new my(this,rv(this._delegate,e))}catch(t){throw gy(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new xy(this,function(e,t){if(e=Hd(e,$d),Bd("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new vi(di.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ev(e,null,function(e){return new Io(Ai.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw gy(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Hd(e,Av);var r=Object.assign(Object.assign({},ey),n);return function(e){if(e.maxAttempts<1)throw new vi(di.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new pi;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,a.Z)().mark((function i(){var o;return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Iv(e);case 2:o=i.sent,new lv(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Pv(e),(function(n){return t(new ry(e,n))}),r)}(this._delegate,(function(n){return e(new vy(t,n))}))}},{key:"batch",value:function(){var e=this;return Pv(this._delegate),new py(new ty(this._delegate,(function(t){return Xp(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Fv(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Uv(this._delegate,e).then((function(e){return e?new xy(t,e):null}))}}]),e}(),dy=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).firestore=e,r}return(0,Z.Z)(n,[{key:"convertBytes",value:function(e){return new cy(new qv(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return my.forKey(t,this.firestore,null)}}]),n}(Lp);var vy=function(){function e(t,n){(0,C.Z)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new dy(t)}return(0,Z.Z)(e,[{key:"get",value:function(e){var t=this,n=Ty(e);return this._delegate.get(n).then((function(e){return new wy(t._firestore,new Vp(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ty(e);return n?(oy("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ty(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ty(e);return this._delegate.delete(t),this}}]),e}(),py=function(){function e(t){(0,C.Z)(this,e),this._delegate=t}return(0,Z.Z)(e,[{key:"set",value:function(e,t,n){var r=Ty(e);return n?(oy("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ty(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ty(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),yy=function(){function e(t,n,r){(0,C.Z)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return(0,Z.Z)(e,[{key:"fromFirestore",value:function(e,t){var n=new qp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new by(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new dy(t),n),i.set(n,a)),a}}]),e}();yy.INSTANCES=new WeakMap;var my=function(){function e(t,n){(0,C.Z)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new dy(t)}return(0,Z.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Sy(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Sy(this.firestore,nv(this._delegate,e))}catch(t){throw gy(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,N.m9)(e))instanceof Jd&&iv(this._delegate,e)}},{key:"set",value:function(e,t){t=oy("DocumentReference.set",t);try{return t?Gp(this._delegate,e,t):Gp(this._delegate,e)}catch(n){throw gy(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Qp(this._delegate,e):Qp.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw gy(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Xp(Hd(e.firestore,Av),[new ku(e._key,iu.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ky(n),a=_y(n,(function(t){return new wy(e.firestore,new Vp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Yp(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Kp(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Hd(e,Jd);var t=Hd(e.firestore,Av);return Tv(Pv(t),e._key,{source:"server"}).then((function(n){return Jp(t,e,n)}))}(this._delegate):function(e){e=Hd(e,Jd);var t=Hd(e.firestore,Av);return Tv(Pv(t),e._key).then((function(n){return Jp(t,e,n)}))}(this._delegate),t.then((function(e){return new wy(n.firestore,new Vp(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(yy.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new vi("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Jd(n._delegate,r,new Oi(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Jd(n._delegate,r,t))}}]),e}();function gy(e,t,n){return e.message=e.message.replace(t,n),e}function ky(e){var t,n=(0,K.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!ly(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function _y(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=ly(e[0])?e[0]:ly(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var wy=function(){function e(t,n){(0,C.Z)(this,e),this._firestore=t,this._delegate=n}return(0,Z.Z)(e,[{key:"ref",get:function(){return new my(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return zp(this._delegate,e._delegate)}}]),e}(),by=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||li()}(void 0!==t),t}}]),n}(wy),xy=function(){function e(t,n){(0,C.Z)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new dy(t)}return(0,Z.Z)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,bp(this._delegate,function(e,t,n){var r=t,i=kp("where",e);return new xp(i,r,n)}(t,n,r)))}catch(i){throw gy(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,bp(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kp("orderBy",e);return new Ip(n,t)}(t,n)))}catch(r){throw gy(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,bp(this._delegate,function(e){return Gd("limit",e),new Ep("limit",e,"F")}(t)))}catch(n){throw gy(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,bp(this._delegate,function(e){return Gd("limitToLast",e),new Ep("limitToLast",e,"L")}(t)))}catch(n){throw gy(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,bp(this._delegate,Tp.apply(void 0,arguments)))}catch(t){throw gy(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,bp(this._delegate,Cp.apply(void 0,arguments)))}catch(t){throw gy(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,bp(this._delegate,Np.apply(void 0,arguments)))}catch(t){throw gy(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,bp(this._delegate,Dp.apply(void 0,arguments)))}catch(t){throw gy(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return av(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Hp(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Hd(e,ev);var t=Hd(e.firestore,Av),n=Pv(t),r=new Wp(t);return Cv(n,e._query,{source:"server"}).then((function(n){return new Bp(t,r,e,n)}))}(this._delegate):function(e){e=Hd(e,ev);var t=Hd(e.firestore,Av),n=Pv(t),r=new Wp(t);return _p(e._query),Cv(n,e._query).then((function(n){return new Bp(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Ey(n.firestore,new Bp(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ky(n),a=_y(n,(function(t){return new Ey(e.firestore,new Bp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Yp(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(yy.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Iy=function(){function e(t,n){(0,C.Z)(this,e),this._firestore=t,this._delegate=n}return(0,Z.Z)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new by(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Ey=function(){function e(t,n){(0,C.Z)(this,e),this._firestore=t,this._delegate=n}return(0,Z.Z)(e,[{key:"query",get:function(){return new xy(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new by(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Iy(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new by(n._firestore,r))}))}},{key:"isEqual",value:function(e){return zp(this._delegate,e._delegate)}}]),e}(),Sy=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return(0,Z.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new my(this.firestore,e):null}},{key:"doc",value:function(e){try{return new my(this.firestore,void 0===e?rv(this._delegate):rv(this._delegate,e))}catch(t){throw gy(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Hd(e.firestore,Av),r=rv(e),i=Mp(e.converter,t);return Xp(n,[Xv($v(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,iu.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new my(t.firestore,e)}))}},{key:"isEqual",value:function(e){return iv(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(yy.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(xy);function Ty(e){return Hd(e,Jd)}var Cy,Zy=function(){function e(){(0,C.Z)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=(0,j.Z)(Bv,n)}return(0,Z.Z)(e,[{key:"isEqual",value:function(e){return(e=(0,N.m9)(e))instanceof Bv&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ri.keyField().canonicalString())}}]),e}(),Ny=function(){function e(t){(0,C.Z)(this,e),this._delegate=t}return(0,Z.Z)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new tp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Jv("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=iy.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ay.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new ip("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Dy={Firestore:fy,GeoPoint:zv,Timestamp:Zi,Blob:cy,Transaction:vy,WriteBatch:py,DocumentReference:my,DocumentSnapshot:wy,Query:xy,QueryDocumentSnapshot:by,QuerySnapshot:Ey,CollectionReference:Sy,FieldPath:Zy,FieldValue:Ny,setLogLevel:function(e){!function(e){ii.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new D.wA("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Dy)))})(Cy=q,(function(e,t){return new fy(e,t,new hy)})),Cy.registerVersion("@firebase/firestore-compat","0.2.1");var Ay=n(7326),Py="@firebase/database",Ry="0.13.9",Oy="";function Ly(e){Oy=e}var My=function(){function e(t){(0,C.Z)(this,e),this.domStorage_=t,this.prefix_="firebase:"}return(0,Z.Z)(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Wl)(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Fy=function(){function e(){(0,C.Z)(this,e),this.cache_={},this.isInMemoryStorage=!0}return(0,Z.Z)(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Uy=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new My(t)}}catch(n){}return new Fy},Vy=Uy("localStorage"),qy=Uy("sessionStorage"),By=new P.Yd("@firebase/database"),jy=function(){var e=1;return function(){return e++}}(),zy=function(e){var t=(0,N.dS)(e),n=new N.gQ;n.update(t);var r=n.digest();return N.US.encodeByteArray(r)},Wy=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?(0,N.Wl)(r):r,t+=" "}return t},Ky=null,Hy=!0,Gy=function(e,t){(0,N.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(By.logLevel=P.in.VERBOSE,Ky=By.log.bind(By),t&&qy.set("logging_enabled",!0)):"function"===typeof e?Ky=e:(Ky=null,qy.remove("logging_enabled"))},Qy=function(){if(!0===Hy&&(Hy=!1,null===Ky&&!0===qy.get("logging_enabled")&&Gy(!0)),Ky){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Wy.apply(null,t);Ky(r)}},Yy=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Qy.apply(void 0,[e].concat(n))}},$y=function(){var e="FIREBASE INTERNAL ERROR: "+Wy.apply(void 0,arguments);By.error(e)},Xy=function(){var e="FIREBASE FATAL ERROR: ".concat(Wy.apply(void 0,arguments));throw By.error(e),new Error(e)},Jy=function(){var e="FIREBASE WARNING: "+Wy.apply(void 0,arguments);By.warn(e)},em=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},tm="[MIN_NAME]",nm="[MAX_NAME]",rm=function(e,t){if(e===t)return 0;if(e===tm||t===nm)return-1;if(t===tm||e===nm)return 1;var n=dm(e),r=dm(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},im=function(e,t){return e===t?0:e<t?-1:1},am=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,N.Wl)(t))},om=function e(t){if("object"!==typeof t||null===t)return(0,N.Wl)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=(0,N.Wl)(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},um=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function sm(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var cm=function(e){(0,N.hu)(!em(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var lm=new RegExp("^-?(0*)\\d{1,10}$"),hm=-2147483648,fm=2147483647,dm=function(e){if(lm.test(e)){var t=Number(e);if(t>=hm&&t<=fm)return t}return null},vm=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Jy("Exception was thrown by user callback.",e),t}),Math.floor(0))}},pm=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},ym=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return(0,Z.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Jy('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),mm=function(){function e(t,n,r){var i=this;(0,C.Z)(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return(0,Z.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Qy("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jy(e)}}]),e}(),gm=function(){function e(t){(0,C.Z)(this,e),this.accessToken=t}return(0,Z.Z)(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();gm.OWNER="owner";var km="5",_m=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wm="websocket",bm="long_polling",xm=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];(0,C.Z)(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vy.get("host:"+t)||this._host}return(0,Z.Z)(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vy.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Im(e,t,n){var r;if((0,N.hu)("string"===typeof t,"typeof type must == string"),(0,N.hu)("object"===typeof n,"typeof params must == object"),t===wm)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==bm)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return sm(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Em=function(){function e(){(0,C.Z)(this,e),this.counters_={}}return(0,Z.Z)(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return(0,N.p$)(this.counters_)}}]),e}(),Sm={},Tm={};function Cm(e){var t=e.toString();return Sm[t]||(Sm[t]=new Em),Sm[t]}var Zm=function(){function e(t){(0,C.Z)(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,Z.Z)(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&vm((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Nm="start",Dm="close",Am=function(){function e(t,n,r,i,a,o,u){var s=this;(0,C.Z)(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yy(t),this.stats_=Cm(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Im(n,bm,e)}}return(0,Z.Z)(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zm(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,N.Yr)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Pm((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Nm)n.id=a,n.password=o;else{if(i!==Dm)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=km,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&_m.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=(0,N.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,N.h$)(t),r=um(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!(0,N.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=(0,N.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!(0,N.Yr)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Pm=function(){function e(t,n,r,i){if((0,C.Z)(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=jy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Qy("frame writing exception"),u.stack&&Qy(u.stack),Qy(u)}}}return(0,Z.Z)(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Qy("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Qy("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Rm=null;"undefined"!==typeof MozWebSocket?Rm=MozWebSocket:"undefined"!==typeof WebSocket&&(Rm=WebSocket);var Om=function(){function e(t,n,r,i,a,o,u){(0,C.Z)(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yy(this.connId),this.stats_=Cm(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return(0,Z.Z)(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vy.set("previous_websocket_failure",!0);try{var r;if((0,N.Yr)()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(km,"/").concat(Oy,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Business-management-appl",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Rm(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Vy.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,N.cI)(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=(0,N.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=um(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=km,!(0,N.Yr)()&&"undefined"!==typeof location&&location.hostname&&_m.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Im(e,wm,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Rm&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Vy.isInMemoryStorage||!0===Vy.get("previous_websocket_failure")}}]),e}();Om.responsesRequiredToBeHealthy=2,Om.healthyTimeout=3e4;var Lm=function(){function e(t){(0,C.Z)(this,e),this.initTransports_(t)}return(0,Z.Z)(e,[{key:"initTransports_",value:function(t){var n=Om&&Om.isAvailable(),r=n&&!Om.previouslyFailed();if(t.webSocketOnly&&(n||Jy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Om];else{var i,a=this.transports_=[],o=(0,K.Z)(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Am,Om]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Lm.globalTransportInitialized_=!1;var Mm=function(){function e(t,n,r,i,a,o,u,s,c,l){(0,C.Z)(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yy("c:"+this.id+":"),this.transportManager_=new Lm(n),this.log_("Connection created"),this.start_()}return(0,Z.Z)(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=pm((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=am("t",e),n=am("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=am("t",e),n=am("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=am("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?$y("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$y("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),km!==n&&Jy("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pm((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pm((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Fm=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Um=function(){function e(t){(0,C.Z)(this,e),this.allowedEvents_=t,this.listeners_={},(0,N.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return(0,Z.Z)(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,Q.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){(0,N.hu)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Vm=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,N.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,Z.Z)(n,[{key:"getInitialEvent",value:function(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Um),qm=function(){function e(t,n){if((0,C.Z)(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return(0,Z.Z)(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Bm(){return new qm("")}function jm(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function zm(e){return e.pieces_.length-e.pieceNum_}function Wm(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new qm(e.pieces_,t)}function Km(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Hm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Gm(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new qm(t,0)}function Qm(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof qm)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new qm(n,0)}function Ym(e){return e.pieceNum_>=e.pieces_.length}function $m(e,t){var n=jm(e),r=jm(t);if(null===n)return t;if(n===r)return $m(Wm(e),Wm(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Xm(e,t){for(var n=Hm(e,0),r=Hm(t,0),i=0;i<n.length&&i<r.length;i++){var a=rm(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Jm(e,t){if(zm(e)!==zm(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function eg(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(zm(e)>zm(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var tg=(0,Z.Z)((function e(t,n){(0,C.Z)(this,e),this.errorPrefix_=n,this.parts_=Hm(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=(0,N.ug)(this.parts_[r]);ng(this)}));function ng(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+rg(e))}function rg(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var ig=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){var e,r,i;return(0,C.Z)(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return(0,Z.Z)(n,[{key:"getInitialEvent",value:function(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Um),ag=1e3,og=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a,o,u,s,c){var l;if((0,C.Z)(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Yy("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=ag,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return ig.getInstance().on("visible",l.onVisible_,(0,Ay.Z)(l)),-1===e.host.indexOf("fblocal")&&Vm.getInstance().on("online",l.onOnline_,(0,Ay.Z)(l)),l}return(0,Z.Z)(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,N.Wl)(i)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new N.BH,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,N.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||(0,N.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,N.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,N.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+(0,N.Wl)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):$y("Unrecognized action received from server: "+(0,N.Wl)(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ag,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ag,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ag),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,i,o,u,s,l,h,f,d,v,p,y,m,g=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,u=this.lastSessionId,s=!1,l=null,h=function(){l?l.close():(s=!0,i())},f=function(e){(0,N.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:h,sendRequest:f},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:v=e.sent,p=(0,c.Z)(v,2),y=p[0],m=p[1],s?Qy("getToken() completed but was canceled"):(Qy("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,l=new Mm(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Jy(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),u)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Jy(e.t0),h());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Qy("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Qy("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ag,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return om(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new qm(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Qy("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Qy("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=(0,K.Z)(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=(0,K.Z)(r.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;this.sendListen_(a)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){t.e(c)}finally{t.f()}for(var o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){var u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";(0,N.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Oy.replace(/\./g,"-")]=1,(0,N.uI)()?e["framework.cordova"]=1:(0,N.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Vm.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&(0,N.r3)(e,"w")){var n=(0,N.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Jy("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Fm);og.nextPersistentConnectionId_=0,og.nextConnectionId_=0;var ug,sg=function(){function e(t,n){(0,C.Z)(this,e),this.name=t,this.node=n}return(0,Z.Z)(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),cg=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new sg(tm,e),r=new sg(tm,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return sg.MIN}}]),e}(),lg=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"compare",value:function(e,t){return rm(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return sg.MIN}},{key:"maxPost",value:function(){return new sg(nm,ug)}},{key:"makePost",value:function(e,t){return(0,N.hu)("string"===typeof e,"KeyIndex indexValue must always be a string."),new sg(e,ug)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return ug},set:function(e){ug=e}}]),n}(cg),hg=new lg,fg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,C.Z)(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return(0,Z.Z)(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),dg=function(){function e(t,n,r,i,a){(0,C.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:yg.EMPTY_NODE,this.right=null!=a?a:yg.EMPTY_NODE}return(0,Z.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return yg.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return yg.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();dg.RED=!0,dg.BLACK=!1;var vg,pg=function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new dg(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),yg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;(0,C.Z)(this,e),this.comparator_=t,this.root_=n}return(0,Z.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,dg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,dg.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new fg(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new fg(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new fg(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new fg(this.root_,null,this.comparator_,!0,e)}}]),e}();function mg(e,t){return rm(e.name,t.name)}function gg(e,t){return rm(e,t)}yg.EMPTY_NODE=new pg;var kg,_g,wg,bg=function(e){return"number"===typeof e?"number:"+cm(e):"string:"+e},xg=function(e){if(e.isLeafNode()){var t=e.val();(0,N.hu)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,N.r3)(t,".sv"),"Priority must be a string or number.")}else(0,N.hu)(e===vg||e.isEmpty(),"priority of unexpected type.");(0,N.hu)(e===vg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ig=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;(0,C.Z)(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,N.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),xg(this.priorityNode_)}return(0,Z.Z)(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Ym(t)?this:".priority"===jm(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=jm(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===zm(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wm(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+bg(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?cm(this.value_):this.value_,this.lazyHash_=zy(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(i>=0,"Unknown leaf type: "+n),(0,N.hu)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return kg},set:function(e){kg=e}}]),e}();Ig.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Eg,Sg,Tg=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?rm(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return sg.MIN}},{key:"maxPost",value:function(){return new sg(nm,new Ig("[PRIORITY-POST]",wg))}},{key:"makePost",value:function(e,t){var n=_g(e);return new sg(t,new Ig("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(cg),Cg=new Tg,Zg=Math.log(2),Ng=function(){function e(t){(0,C.Z)(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Zg,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return(0,Z.Z)(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Dg=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new dg(o,a.node,dg.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new dg(o,a.node,dg.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new dg(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,dg.BLACK):(u(h,dg.BLACK),u(h,dg.RED))}return a}(new Ng(e.length));return new yg(r||t,a)},Ag={},Pg=function(){function e(t,n){(0,C.Z)(this,e),this.indexes_=t,this.indexSet_=n}return(0,Z.Z)(e,[{key:"get",value:function(e){var t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yg?t:null}},{key:"hasIndex",value:function(e){return(0,N.r3)(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){(0,N.hu)(t!==hg,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(sg.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?Dg(i,t.getCompare()):Ag;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e((0,N.UI)(this.indexes_,(function(e,i){var a=(0,N.DV)(r.indexSet_,i);if((0,N.hu)(a,"Missing index implementation for "+i),e===Ag){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(sg.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),Dg(o,a.getCompare())}return Ag}var c=n.get(t.name),l=e;return c&&(l=l.remove(new sg(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e((0,N.UI)(this.indexes_,(function(e){if(e===Ag)return e;var r=n.get(t.name);return r?e.remove(new sg(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return(0,N.hu)(Ag&&Cg,"ChildrenNode.ts has not been loaded"),Eg=Eg||new e({".priority":Ag},{".priority":Cg})}}]),e}(),Rg=function(){function e(t,n,r){(0,C.Z)(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&xg(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,Z.Z)(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Sg}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Sg:t}},{key:"getChild",value:function(e){var t=jm(e);return null===t?this:this.getImmediateChild(t).getChild(Wm(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if((0,N.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new sg(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Sg:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=jm(e);if(null===n)return t;(0,N.hu)(".priority"!==jm(e)||1===zm(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Wm(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Cg,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+bg(this.getPriority().val())+":"),this.forEachChild(Cg,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":zy(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new sg(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new sg(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new sg(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,sg.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,sg.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Og?-1:0}},{key:"withIndex",value:function(t){if(t===hg||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===hg||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Cg),r=t.getIterator(Cg),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===hg?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Sg||(Sg=new e(new yg(gg),null,Pg.Default))}}]),e}();Rg.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Og=new(function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.call(this,new yg(gg),Rg.EMPTY_NODE,Pg.Default)}return(0,Z.Z)(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Rg.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Rg));Object.defineProperties(sg,{MIN:{value:new sg(tm,Rg.EMPTY_NODE)},MAX:{value:new sg(nm,Og)}}),lg.__EMPTY_NODE=Rg.EMPTY_NODE,Ig.__childrenNodeConstructor=Rg,vg=Og,function(e){wg=e}(Og);function Lg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Rg.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,N.hu)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Ig(n,Lg(t))}if(e instanceof Array){var r=Rg.EMPTY_NODE;return sm(e,(function(t,n){if((0,N.r3)(e,t)&&"."!==t.substring(0,1)){var i=Lg(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Lg(t))}var i=[],a=!1,o=e;if(sm(o,(function(e,t){if("."!==e.substring(0,1)){var n=Lg(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new sg(e,n)))}})),0===i.length)return Rg.EMPTY_NODE;var u=Dg(i,mg,(function(e){return e.name}),gg);if(a){var s=Dg(i,Cg.getCompare());return new Rg(u,Lg(t),new Pg({".priority":s},{".priority":Cg}))}return new Rg(u,Lg(t),Pg.Default)}!function(e){_g=e}(Lg);var Mg=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this)).indexPath_=e,(0,N.hu)(!Ym(e)&&".priority"!==jm(e),"Can't create PathIndex with empty path or .priority key"),r}return(0,Z.Z)(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?rm(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Lg(e),r=Rg.EMPTY_NODE.updateChild(this.indexPath_,n);return new sg(t,r)}},{key:"maxPost",value:function(){var e=Rg.EMPTY_NODE.updateChild(this.indexPath_,Og);return new sg(nm,e)}},{key:"toString",value:function(){return Hm(this.indexPath_,0).join("/")}}]),n}(cg),Fg=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?rm(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return sg.MIN}},{key:"maxPost",value:function(){return sg.MAX}},{key:"makePost",value:function(e,t){var n=Lg(e);return new sg(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(cg),Ug=new Fg,Vg="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qg=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Vg.charAt(n%64),n=Math.floor(n/64);(0,N.hu)(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Vg.charAt(t[r]);return(0,N.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),Bg=function(e){if("2147483647"===e)return"-";var t=dm(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return nm;var a=n[i],o=Vg.charAt(Vg.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},jg=function(e){if("-2147483648"===e)return tm;var t=dm(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Vg.charAt(Vg.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function zg(e){return{type:"value",snapshotNode:e}}function Wg(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Kg(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Hg(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Gg=function(){function e(t){(0,C.Z)(this,e),this.index_=t}return(0,Z.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,a){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Kg(t,o)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Wg(t,n)):a.trackChildChange(Hg(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Cg,(function(e,r){t.hasChild(e)||n.trackChildChange(Kg(e,r))})),t.isLeafNode()||t.forEachChild(Cg,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Hg(t,r,i))}else n.trackChildChange(Wg(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Rg.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Qg=function(){function e(t){(0,C.Z)(this,e),this.indexedFilter_=new Gg(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return(0,Z.Z)(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new sg(t,n))||(n=Rg.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Rg.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Rg.EMPTY_NODE);var i=this;return t.forEachChild(Cg,(function(e,t){i.matches(new sg(e,t))||(r=r.updateImmediateChild(e,Rg.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Yg=function(){function e(t){(0,C.Z)(this,e),this.rangedFilter_=new Qg(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return(0,Z.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new sg(t,n))||(n=Rg.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Rg.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Rg.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Rg.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var v=l.getNext();!d&&c(u,v)<=0&&(d=!0),d&&f<this.limit_&&c(v,s)<=0?f++:r=r.updateImmediateChild(v.name,Rg.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;(0,N.hu)(u.numChildren()===this.limit_,"");var s=new sg(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Hg(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Kg(t,h));var v=u.updateImmediateChild(t,Rg.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Wg(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(Kg(c.name,c.node)),i.trackChildChange(Wg(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,Rg.EMPTY_NODE)):e}}]),e}(),$g=function(){function e(){(0,C.Z)(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cg}return(0,Z.Z)(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tm}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nm}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Cg}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Xg(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Jg(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ek(e,t){var n=e.copy();return n.index_=t,n}function tk(e){var t,n={};return e.isDefault()||(e.index_===Cg?t="$priority":e.index_===Ug?t="$value":e.index_===hg?t="$key":((0,N.hu)(e.index_ instanceof Mg,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,N.Wl)(t),e.startSet_&&(n.startAt=(0,N.Wl)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,N.Wl)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,N.Wl)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,N.Wl)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function nk(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Cg&&(t.i=e.index_.toString()),t}var rk=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r,i,a){var o;return(0,C.Z)(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Yy("p:rest:"),o.listens_={},o}return(0,Z.Z)(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=tk(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),(0,N.DV)(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=tk(e._queryParams),r=e._path.toString(),i=new N.BH;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=(0,c.Z)(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+(0,N.xO)(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=(0,N.cI)(l.responseText)}catch(n){Jy("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Jy("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Fm),ik=function(){function e(){(0,C.Z)(this,e),this.rootNode_=Rg.EMPTY_NODE}return(0,Z.Z)(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function ak(){return{value:null,children:new Map}}function ok(e,t,n){if(Ym(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=jm(t);e.children.has(r)||e.children.set(r,ak()),ok(e.children.get(r),t=Wm(t),n)}}function uk(e,t){if(Ym(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Cg,(function(t,n){ok(e,new qm(t),n)})),uk(e,t)}if(e.children.size>0){var r=jm(t);if(t=Wm(t),e.children.has(r))uk(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function sk(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){sk(r,new qm(t.toString()+"/"+e),n)}))}var ck,lk=function(){function e(t){(0,C.Z)(this,e),this.collection_=t,this.last_=null}return(0,Z.Z)(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&sm(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),hk=function(){function e(t,n){(0,C.Z)(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new lk(t);var r=1e4+2e4*Math.random();pm(this.reportStats_.bind(this),Math.floor(r))}return(0,Z.Z)(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;sm(t,(function(t,i){i>0&&(0,N.r3)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),pm(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function fk(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ck||(ck={}));var dk,vk=function(){function e(t,n,r){(0,C.Z)(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=ck.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,Z.Z)(e,[{key:"operationForChild",value:function(t){if(Ym(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new qm(t));return new e(Bm(),n,this.revert)}return(0,N.hu)(jm(this.path)===t,"operationForChild called for unrelated child."),new e(Wm(this.path),this.affectedTree,this.revert)}}]),e}(),pk=function(){function e(t,n){(0,C.Z)(this,e),this.source=t,this.path=n,this.type=ck.LISTEN_COMPLETE}return(0,Z.Z)(e,[{key:"operationForChild",value:function(t){return Ym(this.path)?new e(this.source,Bm()):new e(this.source,Wm(this.path))}}]),e}(),yk=function(){function e(t,n,r){(0,C.Z)(this,e),this.source=t,this.path=n,this.snap=r,this.type=ck.OVERWRITE}return(0,Z.Z)(e,[{key:"operationForChild",value:function(t){return Ym(this.path)?new e(this.source,Bm(),this.snap.getImmediateChild(t)):new e(this.source,Wm(this.path),this.snap)}}]),e}(),mk=function(){function e(t,n,r){(0,C.Z)(this,e),this.source=t,this.path=n,this.children=r,this.type=ck.MERGE}return(0,Z.Z)(e,[{key:"operationForChild",value:function(t){if(Ym(this.path)){var n=this.children.subtree(new qm(t));return n.isEmpty()?null:n.value?new yk(this.source,Bm(),n.value):new e(this.source,Bm(),n)}return(0,N.hu)(jm(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Wm(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),gk=function(){function e(t,n,r){(0,C.Z)(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return(0,Z.Z)(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Ym(e))return this.isFullyInitialized()&&!this.filtered_;var t=jm(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),kk=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function _k(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,N.g5)("Should only compare child_ events.");var r=new sg(t.childName,t.snapshotNode),i=new sg(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function wk(e,t){return{eventCache:e,serverCache:t}}function bk(e,t,n,r){return wk(new gk(t,n,r),e.serverCache)}function xk(e,t,n,r){return wk(e.eventCache,new gk(t,n,r))}function Ik(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ek(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Sk=function(){return dk||(dk=new yg(im)),dk},Tk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sk();(0,C.Z)(this,e),this.value=t,this.children=n}return(0,Z.Z)(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Bm(),value:this.value};if(Ym(e))return null;var n=jm(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Wm(e),t);return null!=i?{path:Qm(new qm(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Ym(t))return this;var n=jm(t),r=this.children.get(n);return null!==r?r.subtree(Wm(t)):new e(null)}},{key:"set",value:function(t,n){if(Ym(t))return new e(n,this.children);var r=jm(t),i=(this.children.get(r)||new e(null)).set(Wm(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Ym(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=jm(t),r=this.children.get(n);if(r){var i,a=r.remove(Wm(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Ym(e))return this.value;var t=jm(e),n=this.children.get(t);return n?n.get(Wm(e)):null}},{key:"setTree",value:function(t,n){if(Ym(t))return n;var r,i=jm(t),a=(this.children.get(i)||new e(null)).setTree(Wm(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Bm(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Qm(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Bm(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Ym(e))return null;var i=jm(e),a=this.children.get(i);return a?a.findOnPath_(Wm(e),Qm(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Bm(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Ym(t))return this;this.value&&r(n,this.value);var i=jm(t),a=this.children.get(i);return a?a.foreachOnPath_(Wm(t),Qm(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Bm(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Qm(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return sm(t,(function(e,t){n=n.set(new qm(e),t)})),n}}]),e}(),Ck=function(){function e(t){(0,C.Z)(this,e),this.writeTree_=t}return(0,Z.Z)(e,null,[{key:"empty",value:function(){return new e(new Tk(null))}}]),e}();function Zk(e,t,n){if(Ym(t))return new Ck(new Tk(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=$m(i,t);return a=a.updateChild(o,n),new Ck(e.writeTree_.set(i,a))}var u=new Tk(n),s=e.writeTree_.setTree(t,u);return new Ck(s)}function Nk(e,t,n){var r=e;return sm(n,(function(e,n){r=Zk(r,Qm(t,e),n)})),r}function Dk(e,t){if(Ym(t))return Ck.empty();var n=e.writeTree_.setTree(t,new Tk(null));return new Ck(n)}function Ak(e,t){return null!=Pk(e,t)}function Pk(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild($m(n.path,t)):null}function Rk(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Cg,(function(e,n){t.push(new sg(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new sg(e,n.value))})),t}function Ok(e,t){if(Ym(t))return e;var n=Pk(e,t);return new Ck(null!=n?new Tk(n):e.writeTree_.subtree(t))}function Lk(e){return e.writeTree_.isEmpty()}function Mk(e,t){return Fk(Bm(),e.writeTree_,t)}function Fk(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?((0,N.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Fk(Qm(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Qm(e,".priority"),r)),n}function Uk(e,t){return Jk(t,e)}function Vk(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function qk(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));(0,N.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&Bk(u,r.path)?i=!1:eg(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=zk(e.allWrites,jk,Bm()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Dk(e.visibleWrites,r.path):sm(r.children,(function(t){e.visibleWrites=Dk(e.visibleWrites,Qm(r.path,t))}));return!0}return!1}function Bk(e,t){if(e.snap)return eg(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&eg(Qm(e.path,n),t))return!0;return!1}function jk(e){return e.visible}function zk(e,t,n){for(var r=Ck.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)eg(n,o)?r=Zk(r,u=$m(n,o),a.snap):eg(o,n)&&(u=$m(o,n),r=Zk(r,Bm(),a.snap.getChild(u)));else{if(!a.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(eg(n,o))r=Nk(r,u=$m(n,o),a.children);else if(eg(o,n))if(Ym(u=$m(o,n)))r=Nk(r,Bm(),a.children);else{var s=(0,N.DV)(a.children,jm(u));if(s){var c=s.getChild(Wm(u));r=Zk(r,Bm(),c)}}}}}return r}function Wk(e,t,n,r,i){if(r||i){var a=Ok(e.visibleWrites,t);if(!i&&Lk(a))return n;if(i||null!=n||Ak(a,Bm())){return Mk(zk(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(eg(e.path,t)||eg(t,e.path))}),t),n||Rg.EMPTY_NODE)}return null}var o=Pk(e.visibleWrites,t);if(null!=o)return o;var u=Ok(e.visibleWrites,t);return Lk(u)?n:null!=n||Ak(u,Bm())?Mk(u,n||Rg.EMPTY_NODE):null}function Kk(e,t,n,r){return Wk(e.writeTree,e.treePath,t,n,r)}function Hk(e,t){return function(e,t,n){var r=Rg.EMPTY_NODE,i=Pk(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Cg,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Ok(e.visibleWrites,t);return n.forEachChild(Cg,(function(e,t){var n=Mk(Ok(a,new qm(e)),t);r=r.updateImmediateChild(e,n)})),Rk(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Rk(Ok(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Gk(e,t,n,r){return function(e,t,n,r,i){(0,N.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Qm(t,n);if(Ak(e.visibleWrites,a))return null;var o=Ok(e.visibleWrites,a);return Lk(o)?i.getChild(n):Mk(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Qk(e,t){return function(e,t){return Pk(e.visibleWrites,t)}(e.writeTree,Qm(e.treePath,t))}function Yk(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=Ok(e.visibleWrites,t),c=Pk(s,Bm());if(null!=c)u=c;else{if(null==n)return[];u=Mk(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function $k(e,t,n){return function(e,t,n,r){var i=Qm(t,n),a=Pk(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Mk(Ok(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Xk(e,t){return Jk(Qm(e.treePath,t),e.writeTree)}function Jk(e,t){return{treePath:e,writeTree:t}}var e_=function(){function e(){(0,C.Z)(this,e),this.changeMap=new Map}return(0,Z.Z)(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Hg(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Kg(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Wg(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Hg(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),t_=new(function(){function e(){(0,C.Z)(this,e)}return(0,Z.Z)(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),n_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,C.Z)(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return(0,Z.Z)(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new gk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $k(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ek(this.viewCache_),i=Yk(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function r_(e,t,n,r,i){var a,o,u=new e_;if(n.type===ck.OVERWRITE){var s=n;s.source.fromUser?a=o_(e,t,s.path,s.snap,r,i,u):((0,N.hu)(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Ym(s.path),a=a_(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===ck.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Qm(n,r);u_(t,jm(c))&&(u=o_(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Qm(n,r);u_(t,jm(c))||(u=o_(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):((0,N.hu)(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=c_(e,t,c.path,c.children,r,i,o,u))}else if(n.type===ck.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Qk(r,n))return t;var u,s=new n_(r,t,i),c=t.eventCache.getNode();if(Ym(n)||".priority"===jm(n)){var l;if(t.serverCache.isFullyInitialized())l=Kk(r,Ek(t));else{var h=t.serverCache.getNode();(0,N.hu)(h instanceof Rg,"serverChildren would be complete if leaf node"),l=Hk(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=jm(n),d=$k(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,Wm(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Rg.EMPTY_NODE,Wm(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Kk(r,Ek(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Qk(r,Bm()),bk(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=Qk(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Ym(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return a_(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Ym(n)){var c=new Tk(null);return s.getNode().forEachChild(hg,(function(e,t){c=c.set(new qm(e),t)})),c_(e,t,n,c,i,a,u,o)}return t}var l=new Tk(null);return r.foreach((function(e,t){var r=Qm(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),c_(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==ck.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=xk(t,a.getNode(),a.isFullyInitialized()||Ym(n),a.isFiltered());return i_(e,o,n,r,t_,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Ik(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(zg(Ik(t)))}}(t,a,h),{viewCache:a,changes:h}}function i_(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=Qk(r,n))return t;if(Ym(n))if((0,N.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Ek(t),l=Hk(r,c instanceof Rg?c:Rg.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Kk(r,Ek(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=jm(n);if(".priority"===f){(0,N.hu)(1===zm(n),"Can't have a priority with additional path components");var d=s.getNode(),v=Gk(r,n,d,u=t.serverCache.getNode());o=null!=v?e.filter.updatePriority(d,v):s.getNode()}else{var p,y=Wm(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=Gk(r,n,s.getNode(),u);p=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else p=$k(r,f,t.serverCache);o=null!=p?e.filter.updateChild(s.getNode(),f,p,y,i,a):s.getNode()}}return bk(t,o,s.isFullyInitialized()||Ym(n),e.filter.filtersNodes())}function a_(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Ym(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=jm(n);if(!c.isCompleteForPath(n)&&zm(n)>1)return t;var d=Wm(n),v=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),v):l.updateChild(c.getNode(),f,v,d,t_,null)}var p=xk(t,s,c.isFullyInitialized()||Ym(n),l.filtersNodes());return i_(e,p,n,i,new n_(i,p,a),u)}function o_(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new n_(i,t,a);if(Ym(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=bk(t,s,!0,e.filter.filtersNodes());else{var h=jm(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=bk(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=Wm(n),v=c.getNode().getImmediateChild(h);if(Ym(d))f=r;else{var p=l.getCompleteChild(h);f=null!=p?".priority"===Km(d)&&p.getChild(Gm(d)).isEmpty()?p:p.updateChild(d,r):Rg.EMPTY_NODE}if(v.equals(f))u=t;else u=bk(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function u_(e,t){return e.eventCache.isCompleteForChild(t)}function s_(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function c_(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Ym(n)?r:new Tk(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=s_(0,t.serverCache.getNode().getImmediateChild(n),r);c=a_(e,c,new qm(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=s_(0,t.serverCache.getNode().getImmediateChild(n),r);c=a_(e,c,new qm(n),h,i,a,o,u)}})),c}var l_,h_=function(){function e(t,n){(0,C.Z)(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Gg(i.getIndex()),o=(r=i).loadsAllData()?new Gg(r.getIndex()):r.hasLimit()?new Yg(r):new Qg(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(Rg.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(Rg.EMPTY_NODE,s.getNode(),null),h=new gk(c,u.isFullyInitialized(),a.filtersNodes()),f=new gk(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=wk(f,h),this.eventGenerator_=new kk(this.query_)}return(0,Z.Z)(e,[{key:"query",get:function(){return this.query_}}]),e}();function f_(e,t){var n=Ek(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ym(t)&&!n.getImmediateChild(jm(t)).isEmpty())?n.getChild(t):null}function d_(e){return 0===e.eventRegistrations_.length}function v_(e,t,n){var r=[];if(n){(0,N.hu)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function p_(e,t,n,r){t.type===ck.MERGE&&null!==t.source.queryId&&((0,N.hu)(Ek(e.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(Ik(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=r_(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,(0,N.hu)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,N.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,y_(e,u.changes,u.viewCache.eventCache.getNode(),null)}function y_(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),_k(e,i,"child_removed",t,r,n),_k(e,i,"child_added",t,r,n),_k(e,i,"child_moved",a,r,n),_k(e,i,"child_changed",t,r,n),_k(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var m_,g_=(0,Z.Z)((function e(){(0,C.Z)(this,e),this.views=new Map}));function k_(e){return 0===e.views.size}function __(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return(0,N.hu)(null!=a,"SyncTree gave us an op for an invalid query."),p_(a,t,n,r)}var o,u=[],s=(0,K.Z)(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(p_(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function w_(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=Kk(n,i?r:null),s=!1;u?s=!0:r instanceof Rg?(u=Hk(n,r),s=!1):(u=Rg.EMPTY_NODE,s=!1);var c=wk(new gk(u,s,!1),new gk(r,i,!1));return new h_(t,c)}return o}function b_(e,t,n,r,i,a){var o=w_(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Cg,(function(e,t){r.push(Wg(e,t))})),n.isFullyInitialized()&&r.push(zg(n.getNode())),y_(e,r,n.getNode(),t)}(o,n)}function x_(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=C_(e);if("default"===i){var s,l=(0,K.Z)(e.views.entries());try{for(l.s();!(s=l.n()).done;){var h=(0,c.Z)(s.value,2),f=h[0],d=h[1];o=o.concat(v_(d,n,r)),d_(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(p){l.e(p)}finally{l.f()}}else{var v=e.views.get(i);v&&(o=o.concat(v_(v,n,r)),d_(v)&&(e.views.delete(i),v.query._queryParams.loadsAllData()||a.push(v.query)))}return u&&!C_(e)&&a.push(new((0,N.hu)(l_,"Reference.ts has not been loaded"),l_)(t._repo,t._path)),{removed:a,events:o}}function I_(e){var t,n=[],r=(0,K.Z)(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function E_(e,t){var n,r=null,i=(0,K.Z)(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||f_(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function S_(e,t){if(t._queryParams.loadsAllData())return Z_(e);var n=t._queryIdentifier;return e.views.get(n)}function T_(e,t){return null!=S_(e,t)}function C_(e){return null!=Z_(e)}function Z_(e){var t,n=(0,K.Z)(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var N_=1,D_=(0,Z.Z)((function e(t){(0,C.Z)(this,e),this.listenProvider_=t,this.syncPointTree_=new Tk(null),this.pendingWriteTree_={visibleWrites:Ck.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function A_(e,t,n,r,i){return function(e,t,n,r,i){(0,N.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Zk(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?q_(e,new yk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function P_(e,t,n,r){!function(e,t,n,r){(0,N.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Nk(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Tk.fromObject(n);return q_(e,new mk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function R_(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Vk(e.pendingWriteTree_,t),i=qk(e.pendingWriteTree_,t);if(i){var a=new Tk(null);return null!=r.snap?a=a.set(Bm(),!0):sm(r.children,(function(e){a=a.set(new qm(e),!0)})),q_(e,new vk(r.path,a,n))}return[]}function O_(e,t,n){return q_(e,new yk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function L_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||T_(o,t))){var s=x_(o,t,n,r);k_(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return C_(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=Y_(f),v=0;v<d.length;++v){var p=d[v],y=p.query,m=z_(e,p);e.listenProvider_.startListening($_(y),W_(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening($_(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(K_(t));e.listenProvider_.stopListening($_(t),n)}))}X_(e,c)}return u}function M_(e,t,n,r){var i=H_(e,r);if(null!=i){var a=G_(i),o=a.path,u=a.queryId,s=$m(o,t);return Q_(e,o,new yk(fk(u),s,n))}return[]}function F_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=$m(e,i);a=a||E_(t,n),o=o||C_(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||C_(s),a=a||E_(s,Bm())):(s=new g_,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=Rg.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=E_(t,Bm());n&&(a=a.updateImmediateChild(e,n))}))}var l=T_(s,t);if(!l&&!t._queryParams.loadsAllData()){var h=K_(t);(0,N.hu)(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=J_();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=Uk(e.pendingWriteTree_,i),v=b_(s,t,n,d,a,u);if(!l&&!o&&!r){var p=S_(s,t);v=v.concat(ew(e,t,p))}return v}function U_(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=E_(n,$m(e,t));if(r)return r}));return Wk(r,t,i,n,!0)}function V_(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=$m(e,n);r=r||E_(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||E_(i,Bm()):(i=new g_,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new gk(r,!0,!1):null;return function(e){return Ik(e.viewCache_)}(w_(i,t,Uk(e.pendingWriteTree_,t._path),a?o.getNode():Rg.EMPTY_NODE,a))}function q_(e,t){return B_(t,e.syncPointTree_,null,Uk(e.pendingWriteTree_,Bm()))}function B_(e,t,n,r){if(Ym(e.path))return j_(e,t,n,r);var i=t.get(Bm());null==n&&null!=i&&(n=E_(i,Bm()));var a=[],o=jm(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=Xk(r,o);a=a.concat(B_(u,s,c,l))}return i&&(a=a.concat(__(i,e,r,n))),a}function j_(e,t,n,r){var i=t.get(Bm());null==n&&null!=i&&(n=E_(i,Bm()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=Xk(r,t),s=e.operationForChild(t);s&&(a=a.concat(j_(s,i,o,u)))})),i&&(a=a.concat(__(i,e,r,n))),a}function z_(e,t){var n=t.query,r=W_(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Rg.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=H_(e,n);if(r){var i=G_(r),a=i.path,o=i.queryId,u=$m(a,t);return Q_(e,a,new pk(fk(o),u))}return[]}(e,n._path,r):function(e,t){return q_(e,new pk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return L_(e,n,null,i)}}}function W_(e,t){var n=K_(t);return e.queryToTagMap.get(n)}function K_(e){return e._path.toString()+"$"+e._queryIdentifier}function H_(e,t){return e.tagToQueryMap.get(t)}function G_(e){var t=e.indexOf("$");return(0,N.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new qm(e.substr(0,t))}}function Q_(e,t,n){var r=e.syncPointTree_.get(t);return(0,N.hu)(r,"Missing sync point for query tag that we're tracking"),__(r,n,Uk(e.pendingWriteTree_,t),null)}function Y_(e){return e.fold((function(e,t,n){if(t&&C_(t))return[Z_(t)];var r=[];return t&&(r=I_(t)),sm(n,(function(e,t){r=r.concat(t)})),r}))}function $_(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,N.hu)(m_,"Reference.ts has not been loaded"),m_)(e._repo,e._path):e}function X_(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=K_(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function J_(){return N_++}function ew(e,t,n){var r=t._path,i=W_(e,t),a=z_(e,n),o=e.listenProvider_.startListening($_(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)(0,N.hu)(!C_(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!Ym(e)&&t&&C_(t))return[Z_(t).query];var r=[];return t&&(r=r.concat(I_(t).map((function(e){return e.query})))),sm(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening($_(l),W_(e,l))}return o}var tw=function(){function e(t){(0,C.Z)(this,e),this.node_=t}return(0,Z.Z)(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),nw=function(){function e(t,n){(0,C.Z)(this,e),this.syncTree_=t,this.path_=n}return(0,Z.Z)(e,[{key:"getImmediateChild",value:function(t){var n=Qm(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return U_(this.syncTree_,this.path_)}}]),e}(),rw=function(e,t,n){return e&&"object"===typeof e?((0,N.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?iw(e[".sv"],t,n):"object"===typeof e[".sv"]?aw(e[".sv"],t):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},iw=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,N.hu)(!1,"Unexpected server value: "+e)},aw=function(e,t,n){e.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&(0,N.hu)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,N.hu)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},ow=function(e,t,n,r){return sw(t,new nw(n,e),r)},uw=function(e,t,n){return sw(e,new tw(t),n)};function sw(e,t,n){var r,i=e.getPriority().val(),a=rw(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=rw(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new Ig(u,Lg(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new Ig(a))),s.forEachChild(Cg,(function(e,i){var a=sw(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var cw=(0,Z.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};(0,C.Z)(this,e),this.name=t,this.parent=n,this.node=r}));function lw(e,t){for(var n=t instanceof qm?t:new qm(t),r=e,i=jm(n);null!==i;){var a=(0,N.DV)(r.node.children,i)||{children:{},childCount:0};r=new cw(i,r,a),i=jm(n=Wm(n))}return r}function hw(e){return e.node.value}function fw(e,t){e.node.value=t,mw(e)}function dw(e){return e.node.childCount>0}function vw(e,t){sm(e.node.children,(function(n,r){t(new cw(n,e,r))}))}function pw(e,t,n,r){n&&!r&&t(e),vw(e,(function(e){pw(e,t,!0,r)})),n&&r&&t(e)}function yw(e){return new qm(null===e.parent?e.name:yw(e.parent)+"/"+e.name)}function mw(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===hw(e)&&!dw(e)}(n),i=(0,N.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,mw(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,mw(e))}(e.parent,e.name,e)}var gw=/[\[\].#$\/\u0000-\u001F\u007F]/,kw=/[\[\].#$\u0000-\u001F\u007F]/,_w=10485760,ww=function(e){return"string"===typeof e&&0!==e.length&&!gw.test(e)},bw=function(e){return"string"===typeof e&&0!==e.length&&!kw.test(e)},xw=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!em(e)||e&&"object"===typeof e&&(0,N.r3)(e,".sv")},Iw=function(e,t,n,r){r&&void 0===t||Ew((0,N.gK)(e,"value"),t,n)},Ew=function e(t,n,r){var i=r instanceof qm?new tg(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+rg(i));if("function"===typeof n)throw new Error(t+"contains a function "+rg(i)+" with contents = "+n.toString());if(em(n))throw new Error(t+"contains "+n.toString()+" "+rg(i));if("string"===typeof n&&n.length>_w/3&&(0,N.ug)(n)>_w)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+rg(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(sm(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!ww(n)))throw new Error(t+" contains an invalid key ("+n+") "+rg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=(0,N.ug)(s),ng(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=(0,N.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+rg(i)+" in addition to actual children.")}},Sw=function(e,t,n,r){if(!r||void 0!==t){var i=(0,N.gK)(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];sm(t,(function(e,t){var r=new qm(e);if(Ew(i,t,Qm(n,r)),".priority"===Km(r)&&!xw(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Hm(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!ww(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Xm);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&eg(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Tw=function(e,t,n){if(!n||void 0!==t){if(em(t))throw new Error((0,N.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xw(t))throw new Error((0,N.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cw=function(e,t,n,r){if((!r||void 0!==n)&&!ww(n))throw new Error((0,N.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Zw=function(e,t,n,r){if((!r||void 0!==n)&&!bw(n))throw new Error((0,N.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nw=function(e,t){if(".info"===jm(t))throw new Error(e+" failed = Can't modify data under /.info/")},Dw=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!ww(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),bw(e)}(n))throw new Error((0,N.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Aw=(0,Z.Z)((function e(){(0,C.Z)(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Pw(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Jm(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Rw(e,t,n){Pw(e,n),Lw(e,(function(e){return Jm(e,t)}))}function Ow(e,t,n){Pw(e,n),Lw(e,(function(e){return eg(e,t)||eg(t,e)}))}function Lw(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Mw(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Mw(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ky&&Qy("event: "+n.toString()),vm(r)}}}var Fw="repo_interrupt",Uw=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Aw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ak(),this.transactionQueueTree_=new cw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,Z.Z)(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Vw(e,t,n){if(e.stats_=Cm(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new rk(e.repoInfo_,(function(t,n,r,i){jw(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return zw(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Wl)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new og(e.repoInfo_,t,(function(t,n,r,i){jw(e,t,n,r,i)}),(function(t){zw(e,t)}),(function(t){!function(e,t){sm(t,(function(t,n){Ww(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Tm[n]||(Tm[n]=t()),Tm[n]}(e.repoInfo_,(function(){return new hk(e.stats_,e.server_)})),e.infoData_=new ik,e.infoSyncTree_=new D_({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=O_(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Ww(e,"connected",!1),e.serverSyncTree_=new D_({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Ow(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function qw(e){var t=e.infoData_.getNode(new qm(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Bw(e){return(t=(t={timestamp:qw(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function jw(e,t,n,r,i){e.dataUpdateCount++;var a=new qm(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=(0,N.UI)(n,(function(e){return Lg(e)}));o=function(e,t,n,r){var i=H_(e,r);if(i){var a=G_(i),o=a.path,u=a.queryId,s=$m(o,t),c=Tk.fromObject(n);return Q_(e,o,new mk(fk(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=Lg(n);o=M_(e.serverSyncTree_,a,s,i)}else if(r){var c=(0,N.UI)(n,(function(e){return Lg(e)}));o=function(e,t,n){var r=Tk.fromObject(n);return q_(e,new mk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Lg(n);o=O_(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=rb(e,a)),Ow(e.eventQueue_,h,o)}function zw(e,t){Ww(e,"connected",t),!1===t&&function(e){Xw(e,"onDisconnectEvents");var t=Bw(e),n=ak();sk(e.onDisconnect_,Bm(),(function(r,i){var a=ow(r,i,e.serverSyncTree_,t);ok(n,r,a)}));var r=[];sk(n,Bm(),(function(t,n){r=r.concat(O_(e.serverSyncTree_,t,n));var i=sb(e,t);rb(e,i)})),e.onDisconnect_=ak(),Ow(e.eventQueue_,Bm(),r)}(e)}function Ww(e,t,n){var r=new qm("/.info/"+t),i=Lg(n);e.infoData_.updateSnapshot(r,i);var a=O_(e.infoSyncTree_,r,i);Ow(e.eventQueue_,r,a)}function Kw(e){return e.nextWriteId_++}function Hw(e,t,n,r,i){Xw(e,"set",{path:t.toString(),value:n,priority:r});var a=Bw(e),o=Lg(n,r),u=U_(e.serverSyncTree_,t),s=uw(o,u,a),c=Kw(e),l=A_(e.serverSyncTree_,t,s,c,!0);Pw(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Jy("set at "+t+" failed: "+n);var o=R_(e.serverSyncTree_,c,!a);Ow(e.eventQueue_,t,o),Jw(e,i,n,r)}));var h=sb(e,t);rb(e,h),Ow(e.eventQueue_,h,[])}function Gw(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&uk(e.onDisconnect_,t),Jw(e,n,r,i)}))}function Qw(e,t,n,r){var i=Lg(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&ok(e.onDisconnect_,t,i),Jw(e,r,n,a)}))}function Yw(e,t,n){var r;r=".info"===jm(t._path)?L_(e.infoSyncTree_,t,n):L_(e.serverSyncTree_,t,n),Rw(e.eventQueue_,t._path,r)}function $w(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Fw)}function Xw(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Qy.apply(void 0,[t].concat(r))}function Jw(e,t,n,r){t&&vm((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function eb(e,t,n){return U_(e.serverSyncTree_,t,n)||Rg.EMPTY_NODE}function tb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ub(e,t),hw(t)){var n=ab(e,t);(0,N.hu)(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&nb(e,yw(t),n)}else dw(t)&&vw(t,(function(t){tb(e,t)}))}function nb(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=eb(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];(0,N.hu)(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=$m(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Xw(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(R_(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);ub(e,lw(e.transactionQueueTree_,t)),tb(e,e.transactionQueueTree_),Ow(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)vm(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Jy("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}rb(e,t)}}),o)}function rb(e,t){var n=ib(e,t),r=yw(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=$m(n,s.path),l=!1,h=void 0;if((0,N.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(R_(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(R_(e.serverSyncTree_,s.currentWriteId,!0));else{var f=eb(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Ew("transaction failed: Data returned ",d,s.path);var v=Lg(d);"object"===typeof d&&null!=d&&(0,N.r3)(d,".priority")||(v=v.updatePriority(f.getPriority()));var p=s.currentWriteId,y=Bw(e),m=uw(v,f,y);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=m,s.currentWriteId=Kw(e),o.splice(o.indexOf(p),1),i=(i=i.concat(A_(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(R_(e.serverSyncTree_,p,!0))}else l=!0,h="nodata",i=i.concat(R_(e.serverSyncTree_,s.currentWriteId,!0))}Ow(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);ub(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)vm(r[c]);tb(e,e.transactionQueueTree_)}(e,ab(e,n),r),r}function ib(e,t){var n,r=e.transactionQueueTree_;for(n=jm(t);null!==n&&void 0===hw(r);)r=lw(r,n),n=jm(t=Wm(t));return r}function ab(e,t){var n=[];return ob(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ob(e,t,n){var r=hw(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);vw(t,(function(t){ob(e,t,n)}))}function ub(e,t){var n=hw(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,fw(t,n.length>0?n:void 0)}vw(t,(function(t){ub(e,t)}))}function sb(e,t){var n=yw(ib(e,t)),r=lw(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){cb(e,t)})),cb(e,r),pw(r,(function(t){cb(e,t)})),n}function cb(e,t){var n=hw(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?((0,N.hu)(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):((0,N.hu)(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(R_(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?fw(t,void 0):n.length=a+1,Ow(e.eventQueue_,yw(t),i);for(var u=0;u<r.length;u++)vm(r[u])}}var lb=function(e,t){var n=hb(e),r=n.namespace;"firebase.com"===n.domain&&Xy(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Xy("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Jy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new xm(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new qm(n.pathString)}},hb=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=(0,K.Z)(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Jy("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},fb=function(){function e(t,n,r,i){(0,C.Z)(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return(0,Z.Z)(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Wl)(this.snapshot.exportVal())}}]),e}(),db=function(){function e(t,n,r){(0,C.Z)(this,e),this.eventRegistration=t,this.error=n,this.path=r}return(0,Z.Z)(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),vb=function(){function e(t,n){(0,C.Z)(this,e),this.snapshotCallback=t,this.cancelCallback=n}return(0,Z.Z)(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),pb=function(){function e(t,n){(0,C.Z)(this,e),this._repo=t,this._path=n}return(0,Z.Z)(e,[{key:"cancel",value:function(){var e=new N.BH;return Gw(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Nw("OnDisconnect.remove",this._path);var e=new N.BH;return Qw(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Nw("OnDisconnect.set",this._path),Iw("OnDisconnect.set",e,this._path,!1);var t=new N.BH;return Qw(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Nw("OnDisconnect.setWithPriority",this._path),Iw("OnDisconnect.setWithPriority",e,this._path,!1),Tw("OnDisconnect.setWithPriority",t,!1);var n=new N.BH;return function(e,t,n,r,i){var a=Lg(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&ok(e.onDisconnect_,t,a),Jw(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Nw("OnDisconnect.update",this._path),Sw("OnDisconnect.update",e,this._path,!1);var t=new N.BH;return function(e,t,n,r){if((0,N.xb)(n))return Qy("onDisconnect().update() called with empty data.  Don't do anything."),void Jw(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&sm(n,(function(n,r){var i=Lg(r);ok(e.onDisconnect_,Qm(t,n),i)})),Jw(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),yb=function(){function e(t,n,r,i){(0,C.Z)(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return(0,Z.Z)(e,[{key:"key",get:function(){return Ym(this._path)?null:Km(this._path)}},{key:"ref",get:function(){return new _b(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=nk(this._queryParams),t=om(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return nk(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=(0,N.m9)(t))instanceof e))return!1;var n=this._repo===t._repo,r=Jm(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function mb(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function gb(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===hg){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==tm)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==nm)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Cg){if(null!=t&&!xw(t)||null!=n&&!xw(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(e.getIndex()instanceof Mg||e.getIndex()===Ug,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function kb(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var _b=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){return(0,C.Z)(this,n),t.call(this,e,r,new $g,!1)}return(0,Z.Z)(n,[{key:"parent",get:function(){var e=Gm(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(yb),wb=function(){function e(t,n,r){(0,C.Z)(this,e),this._node=t,this.ref=n,this._index=r}return(0,Z.Z)(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new qm(t),r=Ib(this.ref,t);return new e(this._node.getChild(n),r,Cg)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Ib(n.ref,r),Cg))}))}},{key:"hasChild",value:function(e){var t=new qm(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function bb(e,t){return(e=(0,N.m9)(e))._checkNotDeleted("ref"),void 0!==t?Ib(e._root,t):e._root}function xb(e,t){(e=(0,N.m9)(e))._checkNotDeleted("refFromURL");var n=lb(t,e._repo.repoInfo_.nodeAdmin);Dw("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Xy("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),bb(e,n.path.toString())}function Ib(e,t){var n,r,i,a;return null===jm((e=(0,N.m9)(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Zw(n,r,i,a)):Zw("child","path",t,!1),new _b(e._repo,Qm(e._path,t))}function Eb(e,t){e=(0,N.m9)(e),Nw("push",e._path),Iw("push",t,e._path,!0);var n,r=qw(e._repo),i=qg(r),a=Ib(e,i),o=Ib(e,i);return n=null!=t?Tb(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Sb(e){return Nw("remove",e._path),Tb(e,null)}function Tb(e,t){e=(0,N.m9)(e),Nw("set",e._path),Iw("set",t,e._path,!1);var n=new N.BH;return Hw(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Cb(e,t){e=(0,N.m9)(e),Nw("setPriority",e._path),Tw("setPriority",t,!1);var n=new N.BH;return Hw(e._repo,Qm(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Zb(e,t,n){if(Nw("setWithPriority",e._path),Iw("setWithPriority",t,e._path,!1),Tw("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new N.BH;return Hw(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Nb(e,t){Sw("update",t,e._path,!1);var n=new N.BH;return function(e,t,n,r){Xw(e,"update",{path:t.toString(),value:n});var i=!0,a=Bw(e),o={};if(sm(n,(function(n,r){i=!1,o[n]=ow(Qm(t,n),Lg(r),e.serverSyncTree_,a)})),i)Qy("update() called with empty data.  Don't do anything."),Jw(0,r,"ok",void 0);else{var u=Kw(e),s=P_(e.serverSyncTree_,t,o,u);Pw(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Jy("update at "+t+" failed: "+n);var o=R_(e.serverSyncTree_,u,!a),s=o.length>0?rb(e,t):t;Ow(e.eventQueue_,s,o),Jw(0,r,n,i)})),sm(n,(function(n){var r=sb(e,Qm(t,n));rb(e,r)})),Ow(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Db(e){e=(0,N.m9)(e);var t=new vb((function(){})),n=new Ab(t);return function(e,t,n){var r=V_(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Lg(r).withIndex(t._queryParams.getIndex());if(F_(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=O_(e.serverSyncTree_,t._path,a);else{var o=W_(e.serverSyncTree_,t);i=M_(e.serverSyncTree_,t._path,a,o)}return Ow(e.eventQueue_,t._path,i),L_(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Xw(e,"get for query "+(0,N.Wl)(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new wb(t,new _b(e._repo,e._path),e._queryParams.getIndex())}))}var Ab=function(){function e(t){(0,C.Z)(this,e),this.callbackContext=t}return(0,Z.Z)(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new fb("value",this,new wb(e.snapshotNode,new _b(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new db(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Pb=function(){function e(t,n){(0,C.Z)(this,e),this.eventType=t,this.callbackContext=n}return(0,Z.Z)(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new db(this,e,t):null}},{key:"createEvent",value:function(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");var n=Ib(new _b(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new fb(e.type,this,new wb(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Rb(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){Yw(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new vb(n,a||void 0),c="value"===t?new Ab(s):new Pb(t,s);return function(e,t,n){var r;r=".info"===jm(t._path)?F_(e.infoSyncTree_,t,n):F_(e.serverSyncTree_,t,n),Rw(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Yw(e._repo,e,c)}}function Ob(e,t,n,r){return Rb(e,"value",t,n,r)}function Lb(e,t,n,r){return Rb(e,"child_added",t,n,r)}function Mb(e,t,n,r){return Rb(e,"child_changed",t,n,r)}function Fb(e,t,n,r){return Rb(e,"child_moved",t,n,r)}function Ub(e,t,n,r){return Rb(e,"child_removed",t,n,r)}function Vb(e,t,n){var r=null,i=n?new vb(n):null;"value"===t?r=new Ab(i):t&&(r=new Pb(t,i)),Yw(e._repo,e,r)}var qb=(0,Z.Z)((function e(){(0,C.Z)(this,e)})),Bb=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Z.Z)(n,[{key:"_apply",value:function(e){Iw("endAt",this._value,e._path,!0);var t=Jg(e._queryParams,this._value,this._key);if(kb(t),gb(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yb(e._repo,e._path,t,e._orderByCalled)}}]),n}(qb);function jb(e,t){return Cw("endAt","key",t,!0),new Bb(e,t)}var zb=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Z.Z)(n,[{key:"_apply",value:function(e){Iw("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===hg?("string"===typeof t&&(t=jg(t)),r=Jg(e,t,n)):r=Jg(e,t,null==n?tm:jg(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(kb(t),gb(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yb(e._repo,e._path,t,e._orderByCalled)}}]),n}(qb);function Wb(e,t){return Cw("endBefore","key",t,!0),new zb(e,t)}var Kb=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Z.Z)(n,[{key:"_apply",value:function(e){Iw("startAt",this._value,e._path,!0);var t=Xg(e._queryParams,this._value,this._key);if(kb(t),gb(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yb(e._repo,e._path,t,e._orderByCalled)}}]),n}(qb);function Hb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Cw("startAt","key",t,!0),new Kb(e,t)}var Gb=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Z.Z)(n,[{key:"_apply",value:function(e){Iw("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===hg?("string"===typeof t&&(t=Bg(t)),r=Xg(e,t,n)):r=Xg(e,t,null==n?nm:Bg(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(kb(t),gb(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new yb(e._repo,e._path,t,e._orderByCalled)}}]),n}(qb);function Qb(e,t){return Cw("startAfter","key",t,!0),new Gb(e,t)}var Yb=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this))._limit=e,r}return(0,Z.Z)(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new yb(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(qb);function $b(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Yb(e)}var Xb=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this))._limit=e,r}return(0,Z.Z)(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yb(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(qb);function Jb(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xb(e)}var ex=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e){var r;return(0,C.Z)(this,n),(r=t.call(this))._path=e,r}return(0,Z.Z)(n,[{key:"_apply",value:function(e){mb(e,"orderByChild");var t=new qm(this._path);if(Ym(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Mg(t),r=ek(e._queryParams,n);return gb(r),new yb(e._repo,e._path,r,!0)}}]),n}(qb);function tx(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Zw("orderByChild","path",e,!1),new ex(e)}var nx=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"_apply",value:function(e){mb(e,"orderByKey");var t=ek(e._queryParams,hg);return gb(t),new yb(e._repo,e._path,t,!0)}}]),n}(qb);function rx(){return new nx}var ix=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"_apply",value:function(e){mb(e,"orderByPriority");var t=ek(e._queryParams,Cg);return gb(t),new yb(e._repo,e._path,t,!0)}}]),n}(qb);function ax(){return new ix}var ox=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return(0,Z.Z)(n,[{key:"_apply",value:function(e){mb(e,"orderByValue");var t=ek(e._queryParams,Ug);return gb(t),new yb(e._repo,e._path,t,!0)}}]),n}(qb);function ux(){return new ox}var sx=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,Z.Z)(n,[{key:"_apply",value:function(e){if(Iw("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Bb(this._value,this._key)._apply(new Kb(this._value,this._key)._apply(e))}}]),n}(qb);function cx(e,t){return Cw("equalTo","key",t,!0),new sx(e,t)}function lx(e){for(var t=(0,N.m9)(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){(0,N.hu)(!l_,"__referenceConstructor has already been defined"),l_=e}(_b),function(e){(0,N.hu)(!m_,"__referenceConstructor has already been defined"),m_=e}(_b);var hx={},fx=!1;function dx(e,t,n,r){e.repoInfo_=new xm("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function vx(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Xy("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qy("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=lb(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Business-management-appl",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=lb(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new gm(gm.OWNER):new mm(e.name,e.options,t);Dw("Invalid Firebase Database URL",u),Ym(u.path)||Xy("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=hx[t.name];i||(i={},hx[t.name]=i);var a=i[e.toURLString()];a&&Xy("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Uw(e,fx,n,r),i[e.toURLString()]=a,a}(s,e,l,new ym(e.name,n));return new px(h,e)}var px=function(){function e(t,n){(0,C.Z)(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return(0,Z.Z)(e,[{key:"_repo",get:function(){return this._instanceStarted||(Vw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new _b(this._repo,Bm())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=hx[t];n&&n[e.key]===e||Xy("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),$w(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Xy("Cannot call "+e+" on a deleted database.")}}]),e}();function yx(){Lm.IS_TRANSPORT_INITIALIZED&&Jy("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function mx(){yx(),Am.forceDisallow()}function gx(){yx(),Om.forceDisallow(),Am.forceAllow()}function kx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=(0,N.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Xy("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xy('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new gm(gm.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:(0,N.Sg)(r.mockUserToken,e.app.options.projectId);a=new gm(o)}dx(i,t,n,a)}function _x(e){(e=(0,N.m9)(e))._checkNotDeleted("goOffline"),$w(e._repo)}function wx(e){var t;(e=(0,N.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Fw)}function bx(e,t){Gy(e,t)}var xx={".sv":"timestamp"};var Ix=function(){function e(t,n){(0,C.Z)(this,e),this.committed=t,this.snapshot=n}return(0,Z.Z)(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Ex(e,t,n){var r;if(e=(0,N.m9)(e),Nw("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new N.BH,o=Ob(e,(function(){}));return function(e,t,n,r,i,a){Xw(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:jy(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=eb(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ew("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=lw(e.transactionQueueTree_,t),h=hw(l)||[];h.push(o),fw(l,h),"object"===typeof s&&null!==s&&(0,N.r3)(s,".priority")?(c=(0,N.DV)(s,".priority"),(0,N.hu)(xw(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(U_(e.serverSyncTree_,t)||Rg.EMPTY_NODE).getPriority().val();var f=Bw(e),d=Lg(s,c),v=uw(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=v,o.currentWriteId=Kw(e);var p=A_(e.serverSyncTree_,t,v,o.currentWriteId,o.applyLocally);Ow(e.eventQueue_,t,p),tb(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new wb(r,new _b(e._repo,e._path),Cg),a.resolve(new Ix(n,i)))}),o,i),a.promise}og.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},og.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Ly(A.SDK_VERSION),(0,A._registerComponent)(new D.wA("database",(function(e,t){var n=t.instanceIdentifier;return vx(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),(0,A.registerVersion)(Py,Ry,e),(0,A.registerVersion)(Py,Ry,"esm2017")}();var Sx=new P.Yd("@firebase/database-compat"),Tx=function(e){var t="FIREBASE WARNING: "+e;Sx.warn(t)},Cx=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,N.gK)(e,t)+"must be a boolean.")},Zx=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Nx=function(){function e(t){(0,C.Z)(this,e),this._delegate=t}return(0,Z.Z)(e,[{key:"cancel",value:function(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Tx("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Dx=function(){function e(t,n){(0,C.Z)(this,e),this.committed=t,this.snapshot=n}return(0,Z.Z)(e,[{key:"toJSON",value:function(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Ax=function(){function e(t,n){(0,C.Z)(this,e),this._database=t,this._delegate=n}return(0,Z.Z)(e,[{key:"val",value:function(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Zw("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Zw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Rx(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Px=function(){function e(t,n){(0,C.Z)(this,e),this.database=t,this._delegate=n}return(0,Z.Z)(e,[{key:"on",value:function(t,n,r,i){var a,o=this;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new Ax(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return Ob(this._delegate,s,c),n;case"child_added":return Lb(this._delegate,s,c),n;case"child_removed":return Ub(this._delegate,s,c),n;case"child_changed":return Mb(this._delegate,s,c),n;case"child_moved":return Fb(this._delegate,s,c),n;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if((0,N.Dv)("Query.off",0,3,arguments.length),Zx("Query.off",e,!0),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Vb(this._delegate,e,r)}else Vb(this._delegate,e)}},{key:"get",value:function(){var e=this;return Db(this._delegate).then((function(t){return new Ax(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new N.BH,s=function(e,t){var r=new Ax(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":Ob(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":Lb(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":Ub(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":Mb(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":Fb(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new e(this.database,lx(this._delegate,$b(t)))}},{key:"limitToLast",value:function(t){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new e(this.database,lx(this._delegate,Jb(t)))}},{key:"orderByChild",value:function(t){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new e(this.database,lx(this._delegate,tx(t)))}},{key:"orderByKey",value:function(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new e(this.database,lx(this._delegate,rx()))}},{key:"orderByPriority",value:function(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new e(this.database,lx(this._delegate,ax()))}},{key:"orderByValue",value:function(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new e(this.database,lx(this._delegate,ux()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return(0,N.Dv)("Query.startAt",0,2,arguments.length),new e(this.database,lx(this._delegate,Hb(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new e(this.database,lx(this._delegate,Qb(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return(0,N.Dv)("Query.endAt",0,2,arguments.length),new e(this.database,lx(this._delegate,jb(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new e(this.database,lx(this._delegate,Wb(t,n)))}},{key:"equalTo",value:function(t,n){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new e(this.database,lx(this._delegate,cx(t,n)))}},{key:"toString",value:function(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Rx(this.database,new _b(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,N.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,N.lb)(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Rx=function(e){(0,z.Z)(n,e);var t=(0,W.Z)(n);function n(e,r){var i;return(0,C.Z)(this,n),(i=t.call(this,e,new yb(r._repo,r._path,new $g,!1))).database=e,i._delegate=r,i}return(0,Z.Z)(n,[{key:"getKey",value:function(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Ib(this._delegate,e))}},{key:"getParent",value:function(){(0,N.Dv)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);var n=Tb(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Tx("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nw("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);var i=Nb(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Zb(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);var t=Sb(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),Cx("Reference.transaction","applyLocally",n,!0);var i=Ex(this._delegate,e,{applyLocally:n}).then((function(e){return new Dx(e.committed,new Ax(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);var n=Cb(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);var i=Eb(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Nw("Reference.onDisconnect",this._delegate._path),new Nx(new pb(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Px),Ox=function(){function e(t,n){var r=this;(0,C.Z)(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:mx,forceLongPolling:gx}}return(0,Z.Z)(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kx(this._delegate,e,t,n)}},{key:"ref",value:function(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof Rx){var t=xb(this._delegate,e.toString());return new Rx(this,t)}var n=bb(this._delegate,e);return new Rx(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";(0,N.Dv)(t,1,1,arguments.length);var n=xb(this._delegate,e);return new Rx(this,n)}},{key:"goOffline",value:function(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),_x(this._delegate)}},{key:"goOnline",value:function(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),wx(this._delegate)}}]),e}();Ox.ServerValue={TIMESTAMP:xx,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Lx=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;Ly(r);var s=new D.zt("auth-internal",new D.H0("database-standalone"));return s.setComponent(new D.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Ox(vx(t,s,void 0,n,u),t),namespace:a}}}),Mx=Ox.ServerValue;!function(e){e.INTERNAL.registerComponent(new D.wA("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Ox(i,r)}),"PUBLIC").setServiceProps({Reference:Rx,Query:Px,Database:Ox,DataSnapshot:Ax,enableLogging:bx,INTERNAL:Lx,ServerValue:Mx}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.9")}(q);q.initializeApp({apiKey:"AIzaSyBR2r-ldd5zmlryuOsJaIyP_4G2BBWDNz8",authDomain:"fir-test-auto.firebaseapp.com",databaseURL:"https://fir-test-auto-default-rtdb.europe-west1.firebasedatabase.app",projectId:"fir-test-auto",storageBucket:"fir-test-auto.appspot.com",messagingSenderId:"20856425954",appId:"1:20856425954:web:b345d4a500d834acf07dbb"}),i.createRoot(document.getElementById("root")).render((0,f.jsx)(T,{}));var Fx=q.database()},5854:function(e,t,n){n.d(t,{BH:function(){return F},DV:function(){return Y},Dv:function(){return se},G6:function(){return N},GJ:function(){return G},L:function(){return k},LL:function(){return q},Pz:function(){return M},Sg:function(){return U},UI:function(){return X},US:function(){return m},Wj:function(){return le},Wl:function(){return W},Yr:function(){return Z},ZB:function(){return b},ZR:function(){return V},aH:function(){return L},b$:function(){return T},cI:function(){return z},dS:function(){return fe},eu:function(){return A},g5:function(){return p},gK:function(){return ce},gQ:function(){return ie},h$:function(){return g},hl:function(){return D},hu:function(){return v},jU:function(){return E},lb:function(){return he},m9:function(){return ve},ne:function(){return ae},p$:function(){return w},pd:function(){return re},q4:function(){return O},r3:function(){return Q},ru:function(){return S},tV:function(){return _},uI:function(){return I},ug:function(){return de},vZ:function(){return J},w1:function(){return C},w9:function(){return H},xO:function(){return te},xb:function(){return $},z$:function(){return x},zd:function(){return ne}});var r=n(7762),i=n(885),a=n(7326),o=n(136),u=n(9388),s=n(8664),c=n(5671),l=n(3144),h=!1,f=!1,d="${JSCORE_VERSION}",v=function(e,t){if(!e)throw p(t)},p=function(e){return new Error("Firebase Database ("+d+") INTERNAL ASSERT FAILED: "+e)},y=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},g=function(e){var t=y(e);return m.encodeByteArray(t,!0)},k=function(e){return g(e).replace(/\./g,"")},_=function(e){try{return m.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function w(e){return b(void 0,e)}function b(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=b(e[n],t[n]));return e}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function I(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function E(){return"object"===typeof self&&self.self===self}function S(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function T(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function C(){var e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Z(){return!0===h||!0===f}function N(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D(){return"object"===typeof indexedDB}function A(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}var P=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},R=function(){try{return P()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Business-management-appl",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&_(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},O=function(e){var t,n;return null===(n=null===(t=R())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},L=function(){var e;return null===(e=R())||void 0===e?void 0:e.config},M=function(e){var t;return null===(t=R())||void 0===t?void 0:t["_".concat(e)]},F=function(){function e(){var t=this;(0,c.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,l.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function U(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[k(JSON.stringify({alg:"none",type:"JWT"})),k(JSON.stringify(a)),""].join(".")}var V=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i){var o;return(0,c.Z)(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf((0,a.Z)(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,a.Z)(o),q.prototype.create),o}return(0,l.Z)(n)}((0,s.Z)(Error)),q=function(){function e(t,n,r){(0,c.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,l.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?B(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new V(n,a,t);return o}}]),e}();function B(e,t){return e.replace(j,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var j=/\{\$([^}]+)}/g;function z(e){return JSON.parse(e)}function W(e){return JSON.stringify(e)}var K=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=z(_(a[0])||""),n=z(_(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},H=function(e){var t=K(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},G=function(e){var t=K(e).claims;return"object"===typeof t&&!0===t.admin};function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function X(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function J(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ee(u)&&ee(s)){if(!J(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function ee(e){return null!==e&&"object"===typeof e}function te(e){for(var t=[],n=function(){var e=(0,i.Z)(a[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function ne(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,i.Z)(n,2),a=r[0],o=r[1];t[decodeURIComponent(a)]=decodeURIComponent(o)}})),t}function re(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ie=function(){function e(){(0,c.Z)(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return(0,l.Z)(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],v=0;v<80;v++){v<40?v<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):v<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var p=(c<<5|c>>>27)+u+d+s+n[v]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=p}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ae(e,t){var n=new oe(e,t);return n.subscribe.bind(n)}var oe=function(){function e(t,n){var r=this;(0,c.Z)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,l.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var i,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!==typeof e||null===e)return!1;var n,i=(0,r.Z)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in e&&"function"===typeof e[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(i.next=ue),void 0===i.error&&(i.error=ue),void 0===i.complete&&(i.complete=ue);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?i.error(a.finalError):i.complete()}catch(e){}})),this.observers.push(i),o}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ue(){}var se=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ce(e,t){return"".concat(e," failed: ").concat(t," argument ")}function le(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ce(e,t)+"must be a valid function.")}function he(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ce(e,t)+"must be a valid context object.")}var fe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,v(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},de=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ve(e){return e&&e._delegate?e._delegate:e}},8278:function(e,t,n){n.d(t,{Ep:function(){return m},LX:function(){return S},RQ:function(){return A},WK:function(){return F},X3:function(){return L},Zn:function(){return T},aU:function(){return r},cP:function(){return g},fp:function(){return _},kG:function(){return C},pC:function(){return D},q_:function(){return d}});var r,i=n(3144),a=n(5671),o=n(136),u=n(9388),s=n(8664),c=n(885);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var h,f="popstate";function d(e){return void 0===e&&(e={}),k((function(e,t){var n=g(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return y("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:m(t))}),(function(e,t){v("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function v(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e){return{usr:e.state,key:e.key}}function y(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function k(e,t,n,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,h=r.Pop,d=null;function v(){h=r.Pop,d&&d({action:h,location:m.location})}var m={get action(){return h},get location(){return e(u,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return u.addEventListener(f,v),d=e,function(){u.removeEventListener(f,v),d=null}},createHref:function(e){return t(u,e)},push:function(e,t){h=r.Push;var i=y(m.location,e,t);n&&n(i,e);var a=p(i),o=m.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&d&&d({action:h,location:i})},replace:function(e,t){h=r.Replace;var i=y(m.location,e,t);n&&n(i,e);var a=p(i),o=m.createHref(i);l.replaceState(a,"",o),c&&d&&d({action:h,location:i})},go:function(e){return l.go(e)}};return m}function _(e,t,n){void 0===n&&(n="/");var r=T(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=w(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=E(i[o],r);return a}function w(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(C(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=A([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(C(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(h||(h={}));var b=/^:\w+$/,x=function(e){return"*"===e};function I(e,t){var n=e.split("/"),r=n.length;return n.some(x)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!x(e)})).reduce((function(e,t){return e+(b.test(t)?3:""===t?1:10)}),r)}function E(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=S({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:A([i,l.pathname]),pathnameBase:P(A([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=A([i,l.pathnameBase]))}return a}function S(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Z("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,c.Z)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Z(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function T(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function C(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Z(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(C(!(i=l({},e)).pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),C(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),C(!i.search||!i.search.includes("#"),N("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var h=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:R(a),hash:O(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),d=(o||"."===u)&&n.endsWith("/");return h.pathname.endsWith("/")||!f&&!d||(h.pathname+="/"),h}var A=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},R=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},O=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},L=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}((0,s.Z)(Error));var M=(0,i.Z)((function e(t,n,r){(0,a.Z)(this,e),this.status=t,this.statusText=n||"",this.data=r}));function F(e){return e instanceof M}},6905:function(e,t,n){n.d(t,{hJ:function(){return It},Xb:function(){return zt},v0:function(){return Vr},Aj:function(){return Qt},LS:function(){return Bt},e5:function(){return Kt},rh:function(){return jn},w7:function(){return Yt}});var r=n(1752),i=n(1120),a=n(7326),o=n(136),u=n(9388),s=n(7762),c=n(4165),l=n(885),h=n(5861),f=n(5671),d=n(3144),v=n(2982),p=n(4942),y=n(5854),m=n(3450),g=n(6781);function k(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var _,w=n(3258);function b(){return(0,p.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var x=b,I=new y.LL("auth","Firebase",b()),E=new g.Yd("@firebase/auth");function S(e){if(E.logLevel<=g.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];E.error.apply(E,["Auth (".concat(m.SDK_VERSION,"): ").concat(e)].concat(n))}}function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw D.apply(void 0,[e].concat(n))}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D.apply(void 0,[e].concat(n))}function Z(e,t,n){var r=Object.assign(Object.assign({},x()),(0,p.Z)({},t,n));return new y.LL("auth","Firebase",r).create(t,{appName:e.name})}function N(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&T(e,"argument-error"),Z(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=(0,v.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat((0,v.Z)(o)))}return I.create.apply(I,[e].concat(n))}function A(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw D.apply(void 0,[t].concat(r))}}function P(e){var t="INTERNAL ASSERTION FAILED: "+e;throw S(t),new Error(t)}function R(e,t){e||P(t)}var O=new Map;function L(e){R(e instanceof Function,"Expected a class definition");var t=O.get(e);return t?(R(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,O.set(e,t),t)}function M(e,t){var n=(0,m._getProvider)(e,"auth");if(n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if((0,y.vZ)(i,null!==t&&void 0!==t?t:{}))return r;T(r,"already-initialized")}return n.initialize({options:t})}function F(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function U(){return"http:"===V()||"https:"===V()}function V(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var q=function(){function e(t,n){(0,f.Z)(this,e),this.shortDelay=t,this.longDelay=n,R(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,y.uI)()||(0,y.b$)()}return(0,d.Z)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(U()||(0,y.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function B(e,t){R(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var j=function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void P("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void P("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void P("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),z=(_={},(0,p.Z)(_,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,p.Z)(_,"MISSING_CUSTOM_TOKEN","internal-error"),(0,p.Z)(_,"INVALID_IDENTIFIER","invalid-email"),(0,p.Z)(_,"MISSING_CONTINUE_URI","internal-error"),(0,p.Z)(_,"INVALID_PASSWORD","wrong-password"),(0,p.Z)(_,"MISSING_PASSWORD","internal-error"),(0,p.Z)(_,"EMAIL_EXISTS","email-already-in-use"),(0,p.Z)(_,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,p.Z)(_,"INVALID_IDP_RESPONSE","invalid-credential"),(0,p.Z)(_,"INVALID_PENDING_TOKEN","invalid-credential"),(0,p.Z)(_,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,p.Z)(_,"MISSING_REQ_TYPE","internal-error"),(0,p.Z)(_,"EMAIL_NOT_FOUND","user-not-found"),(0,p.Z)(_,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,p.Z)(_,"EXPIRED_OOB_CODE","expired-action-code"),(0,p.Z)(_,"INVALID_OOB_CODE","invalid-action-code"),(0,p.Z)(_,"MISSING_OOB_CODE","internal-error"),(0,p.Z)(_,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,p.Z)(_,"INVALID_ID_TOKEN","invalid-user-token"),(0,p.Z)(_,"TOKEN_EXPIRED","user-token-expired"),(0,p.Z)(_,"USER_NOT_FOUND","user-token-expired"),(0,p.Z)(_,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,p.Z)(_,"INVALID_CODE","invalid-verification-code"),(0,p.Z)(_,"INVALID_SESSION_INFO","invalid-verification-id"),(0,p.Z)(_,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,p.Z)(_,"MISSING_SESSION_INFO","missing-verification-id"),(0,p.Z)(_,"SESSION_EXPIRED","code-expired"),(0,p.Z)(_,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,p.Z)(_,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,p.Z)(_,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,p.Z)(_,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,p.Z)(_,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,p.Z)(_,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,p.Z)(_,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,p.Z)(_,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,p.Z)(_,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,p.Z)(_,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,p.Z)(_,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),_),W=new q(3e4,6e4);function K(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function H(e,t,n,r){return G.apply(this,arguments)}function G(){return G=(0,h.Z)((0,c.Z)().mark((function e(t,n,r,i){var a,o=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Q(t,a,(0,h.Z)((0,c.Z)().mark((function e(){var a,o,u,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=(0,y.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",j.fetch()(J(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function Q(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=(0,h.Z)((0,c.Z)().mark((function e(t,n,r){var i,a,o,u,s,h,f,d,v,p;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},z),n),e.prev=2,a=new ee(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw te(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,h=s.split(" : "),f=(0,l.Z)(h,2),d=f[0],v=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw te(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw te(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw te(t,"user-disabled",u);case 29:if(p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!v){e.next=34;break}throw Z(t,p,v);case 34:T(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof y.ZR)){e.next=41;break}throw e.t0;case 41:T(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function $(e,t,n,r){return X.apply(this,arguments)}function X(){return X=(0,h.Z)((0,c.Z)().mark((function e(t,n,r,i){var a,o,u=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,H(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&T(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function J(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?B(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ee=function(){function e(t){var n=this;(0,f.Z)(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(C(n.auth,"network-request-failed"))}),W.get())}))}return(0,d.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function te(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=C(e,t,r);return i.customData._tokenResponse=n,i}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ue(){return ue=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o,u,s=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=(0,y.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,A((a=ce(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:oe(se(a.auth_time)),issuedAtTime:oe(se(a.iat)),expirationTime:oe(se(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function se(e){return 1e3*Number(e)}function ce(e){var t,n=e.split("."),r=(0,l.Z)(n,3),i=r[0],a=r[1],o=r[2];if(void 0===i||void 0===a||void 0===o)return S("JWT malformed, contained fewer than 3 sections"),null;try{var u=(0,y.tV)(a);return u?JSON.parse(u):(S("Failed to decode base64 JWT payload"),null)}catch(s){return S("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function le(e,t){return he.apply(this,arguments)}function he(){return he=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof y.ZR&&fe(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),he.apply(this,arguments)}function fe(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var de=function(){function e(t){(0,f.Z)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,d.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout((0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ve=function(){function e(t,n){(0,f.Z)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,d.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=oe(this.lastLoginAt),this.creationTime=oe(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function pe(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o,u,s,l,h,f,d;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,le(t,ie(r,{idToken:i}));case 6:A(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ke(o.providerUserInfo):[],s=ge(t.providerData,u),l=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!l&&h,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ve(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,y.m9)(t),e.next=3,pe(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,v.Z)(n),(0,v.Z)(t))}function ke(e){return e.map((function(e){var t=e.providerId,n=k(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function _e(e,t){return we.apply(this,arguments)}function we(){return(we=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,{},(0,h.Z)((0,c.Z)().mark((function e(){var r,i,a,o,u,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,y.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=J(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",j.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=function(){function e(){(0,f.Z)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,d.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){A(e.idToken,"internal-error"),A("undefined"!==typeof e.idToken,"internal-error"),A("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ce(e);return A(t,"internal-error"),A("undefined"!==typeof t.exp,"internal-error"),A("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],A(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return P("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(A("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(A("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(A("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function xe(e,t){A("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ie=function(){function e(t){(0,f.Z)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=k(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new de(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?(0,v.Z)(a.providerData):[],this.metadata=new ve(a.createdAt||void 0,a.lastLoginAt||void 0)}return(0,d.Z)(e,[{key:"getIdToken",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(A(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ue.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return me.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(A(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,pe(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,le(this,ne(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,v=null!==(o=n.photoURL)&&void 0!==o?o:void 0,p=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;A(k&&x,t,"internal-error");var I=be.fromJSON(this.name,x);A("string"===typeof k,t,"internal-error"),xe(h,t.name),xe(f,t.name),A("boolean"===typeof _,t,"internal-error"),A("boolean"===typeof w,t,"internal-error"),xe(d,t.name),xe(v,t.name),xe(p,t.name),xe(y,t.name),xe(m,t.name),xe(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:v,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n,r){var i,a,o,u=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new be).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,pe(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ee=function(){function e(){(0,f.Z)(this,e),this.type="NONE",this.storage={}}return(0,d.Z)(e,[{key:"_isAvailable",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ee.type="NONE";var Se=Ee;function Te(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ce=function(){function e(t,n,r){(0,f.Z)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Te(this.userKey,a.apiKey,o),this.fullPersistenceKey=Te("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,d.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ie._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n,r){var i,a,o,u,l,f,d,v,p,y,m,g=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=g.length>2&&void 0!==g[2]?g[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(L(Se),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||L(Se),u=Te(i,n.config.apiKey,n.name),l=null,f=(0,s.Z)(r),t.prev=10,f.s();case 12:if((d=f.n()).done){t.next=29;break}return v=d.value,t.prev=14,t.next=17,v._get(u);case 17:if(!(p=t.sent)){t.next=23;break}return y=Ie._fromJSON(n,p),v!==o&&(l=y),o=v,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(m=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=m[0],!l){t.next=44;break}return t.next=44,o._set(u,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ze(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Oe(t))return"Blackberry";if(Le(t))return"Webos";if(De(t))return"Safari";if((t.includes("chrome/")||Ae(t))&&!t.includes("edge/"))return"Chrome";if(Re(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/firefox\//i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/crios\//i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/iemobile/i.test(e)}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/android/i.test(e)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/blackberry/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/webos/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fe(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return Me(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ue(){return(0,y.w1)()&&10===document.documentMode}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.z$)();return Me(e)||Re(e)||Le(e)||Oe(e)||/windows phone/i.test(e)||Pe(e)}function qe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ze((0,y.z$)());break;case"Worker":t="".concat(Ze((0,y.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(m.SDK_VERSION,"/").concat(r)}var Be=function(){function e(t){(0,f.Z)(this,e),this.auth=t,this.queue=[]}return(0,d.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o,u,l,h;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=(0,s.Z)(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=(0,s.Z)(r);try{for(u.s();!(l=u.n()).done;){h=l.value;try{h()}catch(c){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),je=function(){function e(t,n,r){(0,f.Z)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new We(this),this.idTokenSubscription=new We(this),this.beforeStateQueue=new Be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return(0,d.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=L(t)),this._initializationPromise=this.queue((0,h.Z)((0,c.Z)().mark((function r(){var i,a;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ce.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o,u,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return A(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?(0,y.m9)(t):null)&&A(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r=this,i=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&A(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,h.Z)((0,c.Z)().mark((function n(){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(L(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new y.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return A(n=t&&L(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ce.create(this,[L(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return A(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return A(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qe(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ze(e){return(0,y.m9)(e)}var We=function(){function e(t){var n=this;(0,f.Z)(this,e),this.auth=t,this.observer=null,this.addObserver=(0,y.ne)((function(e){return n.observer=e}))}return(0,d.Z)(e,[{key:"next",get:function(){return A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Ke(e,t,n){var r=ze(e);A(r._canInitEmulator,r,"emulator-config-failed"),A(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=He(t),o=function(e){var t=He(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ge(r.substr(a.length+1))}}var o=r.split(":"),u=(0,l.Z)(o,2);return{host:u[0],port:Ge(u[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function He(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ge(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Qe=function(){function e(t,n){(0,f.Z)(this,e),this.providerId=t,this.signInMethod=n}return(0,d.Z)(e,[{key:"toJSON",value:function(){return P("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return P("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return P("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return P("not implemented")}}]),e}();function Ye(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPassword",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:sendOobCode",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t){return at.apply(this,arguments)}function at(){return(at=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var st=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,f.Z)(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return(0,d.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Xe(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",it(t,{email:this._email,oobCode:this._password}));case 5:T(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ye(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ot(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:T(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Qe);function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithIdp",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ht=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,d.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ct(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ct(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ct(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,y.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):T("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=k(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Qe);function ft(e,t){return dt.apply(this,arguments)}function dt(){return(dt=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:sendVerificationCode",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(){return(vt=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(){return(pt=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw te(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yt=(0,p.Z)({},"USER_NOT_FOUND","user-not-found");function mt(){return(mt=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,r),yt));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gt=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,d.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return vt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return pt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return mt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Qe);var kt=function(){function e(t){var n,r,i,a,o,u;(0,f.Z)(this,e);var s=(0,y.zd)((0,y.pd)(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);A(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return(0,d.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,y.zd)((0,y.pd)(e)).link,n=t?(0,y.zd)((0,y.pd)(t)).deep_link_id:null,r=(0,y.zd)((0,y.pd)(e)).deep_link_id;return(r?(0,y.zd)((0,y.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var _t=function(){function e(){(0,f.Z)(this,e),this.providerId=e.PROVIDER_ID}return(0,d.Z)(e,null,[{key:"credential",value:function(e,t){return st._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=kt.parseLink(t);return A(n,"argument-error"),st._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();_t.PROVIDER_ID="password",_t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var wt=function(){function e(t){(0,f.Z)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,d.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),bt=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,d.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,v.Z)(this.scopes)}}]),n}(wt),xt=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,"facebook.com")}return(0,d.Z)(n,null,[{key:"credential",value:function(e){return ht._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(bt);xt.FACEBOOK_SIGN_IN_METHOD="facebook.com",xt.PROVIDER_ID="facebook.com";var It=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,d.Z)(n,null,[{key:"credential",value:function(e,t){return ht._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(bt);It.GOOGLE_SIGN_IN_METHOD="google.com",It.PROVIDER_ID="google.com";var Et=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,"github.com")}return(0,d.Z)(n,null,[{key:"credential",value:function(e){return ht._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(bt);Et.GITHUB_SIGN_IN_METHOD="github.com",Et.PROVIDER_ID="github.com";var St=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,"twitter.com")}return(0,d.Z)(n,null,[{key:"credential",value:function(e,t){return ht._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(bt);function Tt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signUp",K(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}St.TWITTER_SIGN_IN_METHOD="twitter.com",St.PROVIDER_ID="twitter.com";var Zt=function(){function e(t){(0,f.Z)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,d.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n,r,i){var a,o,u,s,l=arguments;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Ie._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Nt(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n,r,i){var a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Nt(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Nt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Dt=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o){var u,s;return(0,f.Z)(this,n),(u=t.call(this,r.code,r.message)).operationType=i,u.user=o,Object.setPrototypeOf((0,a.Z)(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},u}return(0,d.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(y.ZR);function At(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Dt._fromErrorAndOperation(e,n,t,r);throw n}))}function Pt(e,t){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=le,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Zt._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function Ot(e,t){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a,o,u,s,l,h=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,le(t,At(a,o,n,t),r);case 6:return A((u=e.sent).idToken,a,"internal-error"),A(s=ce(u.idToken),a,"internal-error"),l=s.sub,A(t.uid===l,a,"user-mismatch"),e.abrupt("return",Zt._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&T(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Lt.apply(this,arguments)}function Mt(e,t){return Ft.apply(this,arguments)}function Ft(){return Ft=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a,o,u=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,At(t,i,n);case 4:return a=e.sent,e.next=7,Zt._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ft.apply(this,arguments)}function Ut(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mt(ze(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t,n){var r;A((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),A("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(A(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(A(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Bt(e,t,n){return jt.apply(this,arguments)}function jt(){return(jt=(0,h.Z)((0,c.Z)().mark((function e(t,n,r){var i,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,y.m9)(t),a={requestType:"PASSWORD_RESET",email:n},r&&qt(i,a,r),e.next=5,nt(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t,n){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)((0,c.Z)().mark((function e(t,n,r){var i,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),e.next=3,Tt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Zt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e,t,n){return Ut((0,y.m9)(e),_t.credential(t,n))}function Ht(e,t,n,r){return(0,y.m9)(e).onIdTokenChanged(t,n,r)}function Gt(e,t,n){return(0,y.m9)(e).beforeAuthStateChanged(t,n)}function Qt(e,t,n,r){return(0,y.m9)(e).onAuthStateChanged(t,n,r)}function Yt(e){return(0,y.m9)(e).signOut()}function $t(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:start",K(e,t))}new WeakMap;var Xt="__sak",Jt=function(){function e(t,n){(0,f.Z)(this,e),this.storageRetriever=t,this.type=n}return(0,d.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Xt,"1"),this.storage.removeItem(Xt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var en=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=(0,y.z$)();return De(e)||Me(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ve(),e._shouldAllowMigration=!0,e}return(0,d.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ue()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,a){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.Z)((0,i.Z)(n.prototype),"_set",this).call(this,t,a);case 2:this.localCache[t]=JSON.stringify(a);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.Z)((0,i.Z)(n.prototype),"_get",this).call(this,t);case 2:return a=e.sent,this.localCache[t]=JSON.stringify(a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.Z)((0,i.Z)(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Jt);en.type="LOCAL";var tn=en,nn=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,f.Z)(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,d.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Jt);nn.type="SESSION";var rn=nn;function an(e){return Promise.all(e.map(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var on=function(){function e(t){(0,f.Z)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,d.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o,u,s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,an(s);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function un(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}on.receivers=[];var sn=function(){function e(t){(0,f.Z)(this,e),this.target=t,this.handlers=new Set}return(0,d.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=un("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function cn(){return window}function ln(){return"undefined"!==typeof cn().WorkerGlobalScope&&"function"===typeof cn().importScripts}function hn(){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function dn(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var vn="firebaseLocalStorageDb",pn="firebaseLocalStorage",yn="fbase_key",mn=function(){function e(t){(0,f.Z)(this,e),this.request=t}return(0,d.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function gn(e,t){return e.transaction([pn],t?"readwrite":"readonly").objectStore(pn)}function kn(){var e=indexedDB.deleteDatabase(vn);return new mn(e).toPromise()}function _n(){var e=indexedDB.open(vn,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(pn,{keyPath:yn})}catch(r){n(r)}})),e.addEventListener("success",(0,h.Z)((0,c.Z)().mark((function n(){var r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(pn)){n.next=12;break}return r.close(),n.next=5,kn();case 5:return n.t0=t,n.next=8,_n();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function wn(e,t,n){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)((0,c.Z)().mark((function e(t,n,r){var i,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gn(t,!0).put((i={},(0,p.Z)(i,yn,n),(0,p.Z)(i,"value",r),i)),e.abrupt("return",new mn(a).toPromise());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e,t){return In.apply(this,arguments)}function In(){return(In=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gn(t,!1).get(n),e.next=3,new mn(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function En(e,t){var n=gn(e,!0).delete(t);return new mn(n).toPromise()}var Sn=function(){function e(){(0,f.Z)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,d.Z)(e,[{key:"_openDb",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,_n();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=on._getInstance(ln()?self:null),this.receiver._subscribe("keyChanged",function(){var e=(0,h.Z)((0,c.Z)().mark((function e(n,r){var i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new sn(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&dn()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,_n();case 5:return t=e.sent,e.next=8,wn(t,Xt,"1");case 8:return e.next=10,En(t,Xt);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return wn(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return xn(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite((0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return En(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t,n,r,i,a,o,u,l,h,f,d;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=gn(e,!1).getAll();return new mn(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=(0,s.Z)(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,l=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(l)&&(this.notifyListeners(u,l),n.push(u))}catch(c){i.e(c)}finally{i.f()}for(h=0,f=Object.keys(this.localCache);h<f.length;h++)d=f[h],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Sn.type="LOCAL";var Tn=Sn;function Cn(e,t){return H(e,"POST","/v2/accounts/mfaSignIn:start",K(e,t))}function Zn(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=C("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Nn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Nn("rcb"),new q(3e4,6e4);var Dn="recaptcha";function An(e,t,n){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)((0,c.Z)().mark((function e(t,n,r){var i,a,o,u,s,l,h,f,d;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,A("string"===typeof a,t,"argument-error"),A(r.type===Dn,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return A("enroll"===u.type,t,"internal-error"),e.next=13,$t(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return A("signin"===u.type,t,"internal-error"),A(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Cn(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return h=e.sent,e.abrupt("return",h.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ft(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}var Rn=function(){function e(t){(0,f.Z)(this,e),this.providerId=e.PROVIDER_ID,this.auth=ze(t)}return(0,d.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return An(this.auth,e,(0,y.m9)(t))}}],[{key:"credential",value:function(e,t){return gt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?gt._fromTokenResponse(n,r):null}}]),e}();function On(e,t){return t?L(t):(A(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Rn.PROVIDER_ID="phone",Rn.PHONE_SIGN_IN_METHOD="phone";var Ln=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,d.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return ct(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ct(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ct(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Qe);function Mn(e){return Mt(e.auth,new Ln(e),e.bypassAuthState)}function Fn(e){var t=e.auth,n=e.user;return A(n,t,"internal-error"),Ot(n,new Ln(e),e.bypassAuthState)}function Un(e){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,A(r=t.user,n,"internal-error"),e.abrupt("return",Pt(r,new Ln(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qn=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,f.Z)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,d.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n,r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o,u,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mn;case"linkViaPopup":case"linkViaRedirect":return Un;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:T(this.auth,"internal-error")}}},{key:"resolve",value:function(e){R(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){R(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Bn=new q(2e3,1e4);function jn(e,t,n){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)((0,c.Z)().mark((function e(t,n,r){var i,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),N(t,n,wt),a=On(i,r),o=new Wn(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wn=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,u){var s;return(0,f.Z)(this,n),(s=t.call(this,e,r,o,u)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,a.Z)(s),s}return(0,d.Z)(n,[{key:"executeNotNull",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return A(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t,n=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(1===this.filter.length,"Popup operations only handle one event"),t=un(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(C(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(C(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(C(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Bn.get())}()}}]),n}(qn);Wn.currentPopupAction=null;var Kn=new Map,Hn=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,f.Z)(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return(0,d.Z)(n,[{key:"execute",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){var t,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Kn.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Gn(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,(0,r.Z)((0,i.Z)(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:a=e.t0,t=function(){return Promise.resolve(a)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Kn.set(this.auth._key(),t);case 21:return this.bypassAuthState||Kn.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",(0,r.Z)((0,i.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(a=e.sent)){e.next=16;break}return this.user=a,e.abrupt("return",(0,r.Z)((0,i.Z)(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(qn);function Gn(e,t){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xn(n),i=$n(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e,t){Kn.set(e._key(),t)}function $n(e){return L(e._redirectPersistence)}function Xn(e){return Te("pendingRedirect",e.config.apiKey,e.name)}function Jn(e,t){return er.apply(this,arguments)}function er(){return er=(0,h.Z)((0,c.Z)().mark((function e(t,n){var r,i,a,o,u,s=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ze(t),a=On(i,n),o=new Hn(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}var tr=function(){function e(t){(0,f.Z)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,d.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!rr(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(C(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nr(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(nr(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function nr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function rr(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ir(e){return ar.apply(this,arguments)}function ar(){return ar=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",H(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ar.apply(this,arguments)}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^https?/;function sr(){return(sr=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ir(t);case 4:n=e.sent,r=n.authorizedDomains,i=(0,s.Z)(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!cr(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:T(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function cr(e){var t=F(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ur.test(r))return!1;if(or.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var lr=new q(3e4,6e4);function hr(){var e=cn().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,v.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var fr=null;function dr(e){return fr=fr||function(e){return new Promise((function(t,n){var r,i,a;function o(){hr(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){hr(),n(C(e,"network-request-failed"))},timeout:lr.get()})}if(null===(i=null===(r=cn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=cn().gapi)||void 0===a?void 0:a.load)){var u=Nn("iframefcb");return cn()[u]=function(){gapi.load?o():n(C(e,"network-request-failed"))},Zn("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw fr=null,e}))}(e),fr}var vr=new q(5e3,15e3),pr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mr(e){var t=e.config;A(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?B(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:m.SDK_VERSION},i=yr.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,y.xO)(r).slice(1))}function gr(e){return kr.apply(this,arguments)}function kr(){return kr=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(t);case 2:return n=e.sent,A(r=cn().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:mr(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pr,dontclear:!0},(function(e){return new Promise(function(){var n=(0,h.Z)((0,c.Z)().mark((function n(r,i){var a,o,u;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){cn().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=C(t,"network-request-failed"),o=cn().setTimeout((function(){i(a)}),vr.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}var _r={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wr="_blank",br="http://localhost",xr=function(){function e(t){(0,f.Z)(this,e),this.window=t,this.associatedEvent=null}return(0,d.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ir(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},_r),{width:r.toString(),height:i.toString(),top:a,left:o}),c=(0,y.z$)().toLowerCase();n&&(u=Ae(c)?wr:n),Ne(c)&&(t=t||br,s.scrollbars="yes");var h=Object.entries(s).reduce((function(e,t){var n=(0,l.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Fe(c)&&"_self"!==u)return Er(t||"",u),new xr(null);var f=window.open(t||"",u,h);A(f,e,"popup-blocked");try{f.focus()}catch(d){}return new xr(f)}function Er(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Sr="__/auth/handler",Tr="emulator/auth/handler";function Cr(e,t,n,r,i,a){A(e.config.authDomain,e,"auth-domain-config-required"),A(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:m.SDK_VERSION,eventId:i};if(t instanceof wt){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",(0,y.xb)(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=(0,l.Z)(s[u],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof bt){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var v=o,p=0,g=Object.keys(v);p<g.length;p++){var k=g[p];void 0===v[k]&&delete v[k]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Sr);return B(t,Tr)}(e),"?").concat((0,y.xO)(v).slice(1))}var Zr="webStorageSupport",Nr=function(){function e(){(0,f.Z)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rn,this._completeRedirectFn=Jn,this._overrideRedirectResult=Yn}return(0,d.Z)(e,[{key:"_openPopup",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n,r,i){var a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Cr(t,n,r,F(),i),e.abrupt("return",Ir(t,o,un()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t,n,r,i){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Cr(t,n,r,F(),i),cn().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(R(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(t);case 2:return n=e.sent,r=new tr(t),n.register("authEvent",(function(e){return A(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Zr,{type:Zr},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),T(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return sr.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ve()||De()||Me()}}]),e}(),Dr=Nr,Ar=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,d.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:finalize",K(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return H(e,"POST","/v2/accounts/mfaSignIn:finalize",K(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){(0,f.Z)(this,e),this.factorId=t}return(0,d.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return P("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){(0,f.Z)(this,e)}return(0,d.Z)(e,null,[{key:"assertion",value:function(e){return Ar._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Pr="@firebase/auth",Rr="0.20.10",Or=function(){function e(t){(0,f.Z)(this,e),this.auth=t,this.internalListeners=new Map}return(0,d.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=(0,h.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Lr,Mr=(0,y.Pz)("authIdTokenMaxAge")||300,Fr=null,Ur=function(e){return function(){var t=(0,h.Z)((0,c.Z)().mark((function t(n){var r,i,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Mr)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,Fr!==a){t.next=12;break}return t.abrupt("return");case 12:return Fr=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.getApp)(),t=(0,m._getProvider)(e,"auth");if(t.isInitialized())return t.getImmediate();var n=M(e,{popupRedirectResolver:Dr,persistence:[Tn,tn,rn]}),r=(0,y.Pz)("authTokenSyncURL");if(r){var i=Ur(r);Gt(n,i,(function(){return i(n.currentUser)})),Ht(n,(function(e){return i(e)}))}var a=(0,y.q4)("auth");return a&&Ke(n,"http://".concat(a)),n}Lr="Browser",(0,m._registerComponent)(new w.wA("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){A(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),A(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Lr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qe(Lr)},i=new je(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(L);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),(0,m._registerComponent)(new w.wA("auth-internal",(function(e){return function(e){return new Or(e)}(ze(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,m.registerVersion)(Pr,Rr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Lr)),(0,m.registerVersion)(Pr,Rr,"esm2017")},4463:function(e,t,n){var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(v,e)||!h.call(d,e)&&(f.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case I:return"StrictMode";case Z:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ze(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ie)&&(Ze(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Pe=!1}function Oe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function qe(e,t,n,r,i,a,o,u,s){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ze(i),e;if(o===r)return ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,Et,St=!1,Tt=[],Ct=null,Zt=null,Nt=null,Dt=new Map,At=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=je(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Zt&&Ft(Zt)&&(Zt=null),null!==Nt&&Ft(Nt)&&(Nt=null),Dt.forEach(Ut),At.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Zt&&qt(Zt,e),null!==Nt&&qt(Nt,e),Dt.forEach(t),At.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var jt=_.ReactCurrentBatchConfig,zt=!0;function Wt(e,t,n,r){var i=kt,a=jt.transition;jt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,jt.transition=a}}function Kt(e,t,n,r){var i=kt,a=jt.transition;jt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,jt.transition=a}}function Ht(e,t,n,r){if(zt){var i=Qt(e,t,n,r);if(null===i)zr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Zt=Lt(Zt,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Qt(e,t,n,r))&&zr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=je(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(M({},dn,{dataTransfer:0})),yn=an(M({},hn,{relatedTarget:0})),mn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Zn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Dn),Pn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Ln=l&&"TextEvent"in window&&!On,Mn=l&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Hn=null;function Gn(e){Fr(e,0)}function Qn(e){if(H(_i(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Hn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];Wn(t,Hn,e,we(e)),De(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Zr=Er("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Nr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Rr=Dr[Pr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(Sr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Cr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Zr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Zn;break;case Sr:case Tr:case Cr:s=mn;break;case Zr:s=Nn;break;case"scroll":s=fn;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==f&&(null!=(p=Ae(v,f))&&l.push(Wr(v,p,d)))),h)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",f="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",f="onPointerEnter",v="pointer"),h=null==s?u:_i(s),d=null==c?u:_i(c),(u=new l(p,v+"leave",s,n,i)).target=h,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(f,v+"enter",c,n,i)).target=d,l.relatedTarget=h,p=l),h=p,s&&c)e:{for(f=c,v=0,d=l=s;d;d=Hr(d))v++;for(d=0,p=f;p;p=Hr(p))d++;for(;0<v-d;)l=Hr(l),v--;for(;0<d-v;)f=Hr(f),d--;for(;v--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==s&&Gr(o,u,s,l,!1),null!==c&&null!==h&&Gr(o,h,c,l,!0)}if("select"===(s=(u=r?_i(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(zn(u))if($n)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?_i(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(m=Kr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Jt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ae(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Ae(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,vi="__reactContainer$"+hi,pi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Si(e,t){xi++,bi[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Zi=Ii(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Zi),Ei(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Zi,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,j(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Si(Ci,e),Si(Zi,Zi.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Oi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Zi),Ei(Ci),Si(Ci,e)):Ei(Zi),Si(Zi,n)}var Fi=null,Ui=!1,Vi=!1;function qi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Je,Bi),i}finally{kt=t,Vi=!1}}return null}var ji=[],zi=0,Wi=null,Ki=0,Hi=[],Gi=0,Qi=null,Yi=1,$i="";function Xi(e,t){ji[zi++]=Ki,ji[zi++]=Wi,Wi=e,Ki=t}function Ji(e,t,n){Hi[Gi++]=Yi,Hi[Gi++]=$i,Hi[Gi++]=Qi,Qi=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Yi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ta(e){for(;e===Wi;)Wi=ji[--zi],ji[zi]=null,Ki=ji[--zi],ji[zi]=null;for(;e===Qi;)Qi=Hi[--Gi],Hi[Gi]=null,$i=Hi[--Gi],Hi[Gi]=null,Yi=Hi[--Gi],Hi[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=_.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,_a=null;function wa(){_a=ka=ga=null}function ba(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_u=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Za(e,r)}function Za(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Za(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Za(e,n)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(f=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){h=v.call(d,h,f);break e}h=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(f="function"===typeof(v=p.payload)?v.call(d,h,f):v)||void 0===f)break e;h=M({},h,f);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ls|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),Oa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(nc(t,e,r,n),Oa(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function ja(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ai(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ai(t)?Ni:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case b:return(t=Fc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Ha(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,h=a,p=a=0,y=null;null!==h&&p<u.length;p++){h.index>p?(y=h,h=null):y=h.sibling;var m=d(i,h,u[p],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,h=y}if(p===u.length)return n(i,h),ia&&Xi(i,p),c;if(null===h){for(;p<u.length;p++)null!==(h=f(i,u[p],s))&&(a=o(h,a,p),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,p),c}for(h=r(i,h);p<u.length;p++)null!==(y=v(h,i,p,u[p],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,p),c}function y(i,u,s,c){var l=O(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,p=m}if(g.done)return n(i,p),ia&&Xi(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case A:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(O(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=Qa(!0),$a=Qa(!1),Xa={},Ja=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Ja,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ja),Si(Ja,t)}function io(){Ei(Ja),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Ja.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Ja,n))}function oo(e){eo.current===e&&(Ei(Ja),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,_o=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==_o;return _o=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Zo(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((vo&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,po.lanes|=h,Ls|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(_u=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Ls|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(_u=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ao(e,t){var n=po,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,_u=!0),r=r.queue,zo(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Zs)throw Error(a(349));0!==(30&vo)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function Oo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Za(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function qo(e,t,n,r){var i=So();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function jo(e,t){return qo(8390656,8,e,t)}function zo(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,_u=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Ls|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Qo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Zs)throw Error(a(349));0!==(30&vo)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Zs.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Zo,useRef:Vo,useState:function(){return Zo(Co)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[Zo(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ao,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ao,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zs||(zs=!0,Ws=r),fu(0,t)},n}function pu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=_.ReactCurrentOwner,_u=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ya(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||_u?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return zu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(_u=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zu(e,t,i);0!==(131072&e.flags)&&(_u=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ps,As),As|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ps,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ps,As),As|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ps,As),As|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ai(n)?Ni:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||_u?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zu(e,t,i))}function Cu(e,t,n,r,i){if(Ai(n)){var a=!0;Li(t)}else a=!1;if(Ia(t,i),null===t.stateNode)ju(e,t),ja(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Ai(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&za(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Ma(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Zi.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||Ba(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Ai(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&za(t,o,r,s),Na=!1,f=t.memoizedState,o.state=f,Ma(t,r,o,i);var v=t.memoizedState;u!==h||f!==v||Zi.current||Na?("function"===typeof d&&(Va(t,n,d,r),v=t.memoizedState),(c=Na||Ba(t,n,c,r,f,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Zu(e,t,n,r,a,i)}function Zu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),zu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Au,Pu,Ru,Ou={dehydrated:null,treeContext:null,retryLane:0};function Lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Lc(s,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Lu(n),t.memoizedState=Ou,e):Fu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Oc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Lu(u),t.memoizedState=Ou,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),_u||s){if(null!==(r=Zs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Za(e,i),nc(r,e,i,-1))}return pc(),Uu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Gi++]=Yi,Hi[Gi++]=$i,Hi[Gi++]=Qi,Yi=e.id,$i=e.overflow,Qi=t),(t=Fu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Oc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Lu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Ou,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&va(r),Ya(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ju(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ls|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Ai(t.type)&&Pi(),Ku(t),null;case 3:return r=t.stateNode,io(),Ei(Zi),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no(Ja.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":K(r),J(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Au(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),J(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Ru(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Rs&&(Rs=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Ku(t),null;case 10:return ba(t.type._context),Ku(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Bs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*$e()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&As)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Gu(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Zi),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Au=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ru=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qu=!1,Yu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Ju(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,hs=!1;function fs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Ju(n,t);case 6:var r=ls,i=hs;ls=null,fs(e,t,n),hs=i,null!==(ls=r)&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=hs,ls=n.stateNode.containerInfo,hs=!0,fs(e,t,n),ls=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!Yu&&(Ju(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,fs(e,t,n),Yu=r):fs(e,t,n);break;default:fs(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ps(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,hs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ps(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:ps(t,e),ms(e),512&r&&null!==n&&Ju(n,n.return);break;case 5:if(ps(t,e),ms(e),512&r&&null!==n&&Ju(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(ps(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(ps(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:ps(t,e),ms(e);break;case 13:ps(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=$e())),4&r&&vs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||h,ps(t,e),Yu=l):ps(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xu=e,h=e.child;null!==h;){for(f=Xu=h;null!==Xu;){switch(v=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Ju(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Ju(d,d.return);break;case 22:if(null!==d.memoizedState){ws(f);continue}}null!==v?(v.return=d,Xu=v):ws(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ps(t,e),ms(e),4&r&&vs(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=Qu;var c=Yu;if(Qu=o,(Yu=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?bs(i):null!==s?(s.return=o,Xu=s):bs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,Qu=u,Yu=c}_s(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):_s(e)}}function _s(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Es=_.ReactCurrentDispatcher,Ss=_.ReactCurrentOwner,Ts=_.ReactCurrentBatchConfig,Cs=0,Zs=null,Ns=null,Ds=0,As=0,Ps=Ii(0),Rs=0,Os=null,Ls=0,Ms=0,Fs=0,Us=null,Vs=null,qs=0,Bs=1/0,js=null,zs=!1,Ws=null,Ks=null,Hs=!1,Gs=null,Qs=0,Ys=0,$s=null,Xs=-1,Js=0;function ec(){return 0!==(6&Cs)?$e():-1!==Xs?Xs:Xs=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==pa.transition?(0===Js&&(Js=pt()),Js):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,$s=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Zs||(e===Zs&&(0===(2&Cs)&&(Ms|=n),4===Rs&&uc(e,Ds)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=$e()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Zs?Ds:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Zc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Js=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=ft(e,e===Zs?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(Zs===e&&Ds===t||(js=null,Bs=$e()+500,fc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==Ns?t=0:(Zs=null,Ds=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Os,fc(e,0),uc(e,r),rc(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=vt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Os,fc(e,0),uc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,js);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-$e())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,js),t);break}wc(e,Vs,js);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,js),r);break}wc(e,Vs,js);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Fs,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));bc();var t=ft(e,0);if(0===(1&t))return rc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Os,fc(e,0),uc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,js),rc(e,$e()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=$e()+500,Ui&&Bi())}}function lc(e){null!==Gs&&0===Gs.tag&&0===(6&Cs)&&bc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&Bi()}}function hc(){As=Ps.current,Ei(Ps)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Zi),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:ba(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Zs=e,Ns=e=Pc(e.current,null),Ds=As=t,Rs=0,Os=null,Fs=Ms=Ls=0,Vs=Us=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(wa(),ho.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,_o=0,Ss.current=null,null===n||null===n.return){Rs=1,Os=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),pc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Rs&&(Rs=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(_){t=_,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function pc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Zs||0===(268435455&Ls)&&0===(268435455&Ms)||uc(Zs,Ds)}function yc(e,t){var n=Cs;Cs|=2;var r=vc();for(Zs===e&&Ds===t||(js=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==Ns)throw Error(a(261));return Zs=null,Ds=0,Rs}function mc(){for(;null!==Ns;)kc(Ns)}function gc(){for(;null!==Ns&&!Qe();)kc(Ns)}function kc(e){var t=xs(e.alternate,e,As);e.memoizedProps=e.pendingProps,null===t?_c(e):Ns=t,Ss.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,As)))return void(Ns=n)}else{if(null!==(n=Gu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Rs=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Rs&&(Rs=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{bc()}while(null!==Gs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Zs&&(Ns=Zs=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Zc(tt,(function(){return bc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var v;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(v=f.firstChild);)d=f,f=v;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(v=f.nextSibling))break;d=(f=d).parentNode}f=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}p=ts,ts=!1}(e,n),ys(n,e),vr(ti),zt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Gs=e,Qs=i),0===(o=e.pendingLanes)&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(zs)throw zs=!1,e=Ws,Ws=null,e;0!==(1&Qs)&&0!==e.tag&&bc(),0!==(1&(o=e.pendingLanes))?e===$s?Ys++:(Ys=0,$s=e):Ys=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function bc(){if(null!==Gs){var e=_t(Qs),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Gs)var r=!1;else{if(e=Gs,Gs=null,Qs=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var h=Xu;switch(h.tag){case 0:case 11:case 15:ns(8,h,o)}var f=h.child;if(null!==f)f.return=h,Xu=f;else for(;null!==Xu;){var d=(h=Xu).sibling,v=h.return;if(as(h),h===l){Xu=null;break}if(null!==d){d.return=v,Xu=d;break}Xu=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var _=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==_)_.return=u,Xu=_;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(b){Ic(s,s.return,b)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Ra(e,t=vu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=Ra(t,e=pu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Zs===e&&(Ds&n)===n&&(4===Rs||3===Rs&&(130023424&Ds)===Ds&&500>$e()-qs?fc(e,0):Fs|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Za(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Zc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Nc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Ac(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case Z:return(e=Dc(13,n,t,i)).elementType=Z,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case A:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Oi(e,n,t)}return t}function jc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(nc(e,i,o,a),Oa(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Zi.current)_u=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _u=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Si(uo,1&uo.current),null!==(e=zu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return zu(e,t,n)}(e,t,n);_u=0!==(131072&e.flags)}else _u=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ju(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Zu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ju(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=zu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Zi.current){t=zu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),ju(e,t),t.tag=1,Ai(r)?(e=!0,Li(t)):e=!1,Ia(t,n),ja(t,r,i),Wa(t,r,i,n),Zu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=jc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[vi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[vi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){zc(null,e,null,null)})),t[vi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Cs)&&(Bs=$e()+500,Bi()))}break;case 13:lc((function(){var t=Za(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},bt=function(e){if(13===e.tag){var t=Za(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Za(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ze=lc;var tl={usingClientEntryPoint:!1,Events:[ki,_i,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=jc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1087:function(e,t,n){n.d(t,{OL:function(){return d},UT:function(){return h}});var r=n(885),i=n(2791),a=n(7689),o=n(8278);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],l=["aria-current","caseSensitive","className","end","style","to","children"];function h(e){var t=e.basename,n=e.children,u=e.window,s=i.useRef();null==s.current&&(s.current=(0,o.q_)({window:u,v5Compat:!0}));var c=s.current,l=i.useState({action:c.action,location:c.location}),h=(0,r.Z)(l,2),f=h[0],d=h[1];return i.useLayoutEffect((function(){return c.listen(d)}),[c]),i.createElement(a.F0,{basename:t,children:n,location:f.location,navigationType:f.action,navigator:c})}var f=i.forwardRef((function(e,t){var n=e.onClick,r=e.relative,l=e.reloadDocument,h=e.replace,f=e.state,d=e.target,v=e.to,p=e.preventScrollReset,y=s(e,c),m=(0,a.oQ)(v,{relative:r}),g=function(e,t){var n=void 0===t?{}:t,r=n.target,u=n.replace,s=n.state,c=n.preventScrollReset,l=n.relative,h=(0,a.s0)(),f=(0,a.TH)(),d=(0,a.WU)(e,{relative:l});return i.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==u?u:(0,o.Ep)(f)===(0,o.Ep)(d);h(e,{replace:n,state:s,preventScrollReset:c,relative:l})}}),[f,h,d,u,s,r,e,c,l])}(v,{replace:h,state:f,target:d,preventScrollReset:p,relative:r});return i.createElement("a",u({},y,{href:m,onClick:l?n:function(e){n&&n(e),e.defaultPrevented||g(e)},ref:t,target:d}))}));var d=i.forwardRef((function(e,t){var n,r=e["aria-current"],c=void 0===r?"page":r,h=e.caseSensitive,d=void 0!==h&&h,v=e.className,p=void 0===v?"":v,y=e.end,m=void 0!==y&&y,g=e.style,k=e.to,_=e.children,w=s(e,l),b=(0,a.WU)(k),x=(0,a.bS)({path:b.pathname,end:m,caseSensitive:d}),I=i.useContext(a.FR),E=null==I?void 0:I.navigation.location,S=(0,a.WU)(E||""),T=null!=i.useMemo((function(){return E?(0,o.LX)({path:b.pathname,end:m,caseSensitive:d},S.pathname):null}),[E,b.pathname,d,m,S.pathname]),C=null!=x,Z=C?c:void 0;n="function"===typeof p?p({isActive:C,isPending:T}):[p,C?"active":null,T?"pending":null].filter(Boolean).join(" ");var N="function"===typeof g?g({isActive:C,isPending:T}):g;return i.createElement(f,u({},w,{"aria-current":Z,className:n,ref:t,style:N,to:k}),"function"===typeof _?_({isActive:C,isPending:T}):_)}));var v,p;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(v||(v={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(p||(p={}))},7689:function(e,t,n){var r;n.d(t,{AW:function(){return B},F0:function(){return j},FR:function(){return w},TH:function(){return Z},WU:function(){return P},Z5:function(){return z},bS:function(){return N},oQ:function(){return T},s0:function(){return A}});var i=n(2982),a=n(5671),o=n(3144),u=n(136),s=n(9388),c=n(885),l=n(8278),h=n(2791);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}var d="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},v=h.useState,p=h.useEffect,y=h.useLayoutEffect,m=h.useDebugValue;function g(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!d(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,(r||(r=n.t(h,2))).useSyncExternalStore;var k=h.createContext(null);var _=h.createContext(null);var w=h.createContext(null);var b=h.createContext(null);var x=h.createContext(null);var I=h.createContext(null);var E=h.createContext({outlet:null,matches:[]});var S=h.createContext(null);function T(e,t){var n=(void 0===t?{}:t).relative;C()||(0,l.kG)(!1);var r=h.useContext(x),i=r.basename,a=r.navigator,o=P(e,{relative:n}),u=o.hash,s=o.pathname,c=o.search,f=s;return"/"!==i&&(f="/"===s?i:(0,l.RQ)([i,s])),a.createHref({pathname:f,search:c,hash:u})}function C(){return null!=h.useContext(I)}function Z(){return C()||(0,l.kG)(!1),h.useContext(I).location}function N(e){C()||(0,l.kG)(!1);var t=Z().pathname;return h.useMemo((function(){return(0,l.LX)(e,t)}),[t,e])}function D(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function A(){C()||(0,l.kG)(!1);var e=h.useContext(x),t=e.basename,n=e.navigator,r=h.useContext(E).matches,i=Z().pathname,a=JSON.stringify(D(r).map((function(e){return e.pathnameBase}))),o=h.useRef(!1);return h.useEffect((function(){o.current=!0})),h.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var u=(0,l.pC)(e,JSON.parse(a),i,"path"===r.relative);"/"!==t&&(u.pathname="/"===u.pathname?t:(0,l.RQ)([t,u.pathname])),(r.replace?n.replace:n.push)(u,r.state,r)}else n.go(e)}),[t,n,a,i])}function P(e,t){var n=(void 0===t?{}:t).relative,r=h.useContext(E).matches,i=Z().pathname,a=JSON.stringify(D(r).map((function(e){return e.pathnameBase})));return h.useMemo((function(){return(0,l.pC)(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function R(){var e=function(){var e,t=h.useContext(S),n=V(L.UseRouteError),r=h.useContext(E),i=r.matches[r.matches.length-1];if(t)return t;return r||(0,l.kG)(!1),!i.route.id&&(0,l.kG)(!1),null==(e=n.errors)?void 0:e[i.route.id]}(),t=(0,l.WK)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unhandled Thrown Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:i},n):null,h.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",h.createElement("code",{style:a},"errorElement")," props on\xa0",h.createElement("code",{style:a},"<Route>")))}var O,L,M=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return(0,o.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?h.createElement(S.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(h.Component);function F(e){var t=e.routeContext,n=e.match,r=e.children,i=h.useContext(k);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),h.createElement(E.Provider,{value:t},r)}function U(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,i=null==n?void 0:n.errors;if(null!=i){var a=r.findIndex((function(e){return e.route.id&&(null==i?void 0:i[e.route.id])}));a>=0||(0,l.kG)(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight((function(e,a,o){var u=a.route.id?null==i?void 0:i[a.route.id]:null,s=n?a.route.errorElement||h.createElement(R,null):null,c=function(){return h.createElement(F,{match:a,routeContext:{outlet:e,matches:t.concat(r.slice(0,o+1))}},u?s:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===o)?h.createElement(M,{location:n.location,component:s,error:u,children:c()}):c()}),null)}function V(e){var t=h.useContext(w);return t||(0,l.kG)(!1),t}!function(e){e.UseRevalidator="useRevalidator"}(O||(O={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(L||(L={}));var q;function B(e){(0,l.kG)(!1)}function j(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,u=void 0===o?l.aU.Pop:o,s=e.navigator,c=e.static,f=void 0!==c&&c;C()&&(0,l.kG)(!1);var d=n.replace(/^\/*/,"/"),v=h.useMemo((function(){return{basename:d,navigator:s,static:f}}),[d,s,f]);"string"===typeof a&&(a=(0,l.cP)(a));var p=a,y=p.pathname,m=void 0===y?"/":y,g=p.search,k=void 0===g?"":g,_=p.hash,w=void 0===_?"":_,b=p.state,E=void 0===b?null:b,S=p.key,T=void 0===S?"default":S,Z=h.useMemo((function(){var e=(0,l.Zn)(m,d);return null==e?null:{pathname:e,search:k,hash:w,state:E,key:T}}),[d,m,k,w,E,T]);return null==Z?null:h.createElement(x.Provider,{value:v},h.createElement(I.Provider,{children:i,value:{location:Z,navigationType:u}}))}function z(e){var t=e.children,n=e.location,r=h.useContext(_);return function(e,t){C()||(0,l.kG)(!1);var n,r=h.useContext(w),i=h.useContext(E).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,Z());if(t){var c,d="string"===typeof t?(0,l.cP)(t):t;"/"===u||(null==(c=d.pathname)?void 0:c.startsWith(u))||(0,l.kG)(!1),n=d}else n=s;var v=n.pathname||"/",p="/"===u?v:v.slice(u.length)||"/",y=(0,l.fp)(e,{pathname:p}),m=U(y&&y.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:(0,l.RQ)([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:(0,l.RQ)([u,e.pathnameBase])})})),i,r||void 0);return t?h.createElement(I.Provider,{value:{location:f({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:l.aU.Pop}},m):m}(r&&!t?r.router.routes:K(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(q||(q={}));var W=new Promise((function(){}));h.Component;function K(e,t){void 0===t&&(t=[]);var n=[];return h.Children.forEach(e,(function(e,r){if(h.isValidElement(e))if(e.type!==h.Fragment){e.type!==B&&(0,l.kG)(!1),e.props.index&&e.props.children&&(0,l.kG)(!1);var a=[].concat((0,i.Z)(t),[r]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=K(e.props.children,a)),n.push(o)}else n.push.apply(n,K(e.props.children,t))})),n}},6374:function(e,t,n){var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var _=k.prototype=new g;_.constructor=k,p(_,m.prototype),_.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function Z(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),Z(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=Z(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=Z(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return Z(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},P={transition:null},R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){e.exports=n(9117)},184:function(e,t,n){e.exports=n(6374)},6813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,_(e),!p)if(null!==r(c))p=!0,P(b);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function b(e,n){p=!1,y&&(y=!1,g(S),S=-1),v=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!Z());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&R(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function Z(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,A=D.port2;D.port1.onmessage=N,x=function(){A.postMessage(null)}}else x=function(){m(N,0)};function P(e){E=e,I||(I=!0,x())}function R(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,P(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,P(b))),e},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){e.exports=n(6813)},907:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(9611),i=n(8814);function a(e,t,n){return a=(0,i.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&(0,r.Z)(a,n.prototype),a},a.apply(null,arguments)}},3144:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},9388:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1120),i=n(8814),a=n(2963);function o(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return(0,a.Z)(this,n)}}},4942:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1752:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(1120);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=i(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},a.apply(this,arguments)}},1120:function(e,t,n){function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},2963:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(1002),i=n(7326);function a(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},4165:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(N){l=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),u=new T(r||[]);return a(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=h;var d={};function v(){}function p(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,u)&&(m=k);var _=y.prototype=v.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(a,o,u,s){var c=f(e[a],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==(0,r.Z)(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(h).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return Z()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return p.prototype=y,a(_,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:p,configurable:!0}),p.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(h(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(_),l(_,c,"Generator"),l(_,u,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}},9611:function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},885:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(907);var i=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1120),i=n(9611);var a=n(5647);function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return(0,a.Z)(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},o(e)}},3450:function(e,t,n){n.r(t),n.d(t,{FirebaseError:function(){return v.ZR},SDK_VERSION:function(){return Q},_DEFAULT_ENTRY_NAME:function(){return L},_addComponent:function(){return V},_addOrOverwriteComponent:function(){return q},_apps:function(){return F},_clearComponents:function(){return W},_components:function(){return U},_getProvider:function(){return j},_registerComponent:function(){return B},_removeServiceInstance:function(){return z},deleteApp:function(){return J},getApp:function(){return $},getApps:function(){return X},initializeApp:function(){return Y},onLog:function(){return ne},registerVersion:function(){return te},setLogLevel:function(){return re}});var r,i,a=n(2982),o=n(4165),u=n(5861),s=n(7762),c=n(4942),l=n(5671),h=n(3144),f=n(3258),d=n(6781),v=n(5854),p=n(1413);var y=new WeakMap,m=new WeakMap,g=new WeakMap,k=new WeakMap,_=new WeakMap;var w={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return m.get(e);if("objectStoreNames"===t)return e.objectStoreNames||g.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return I(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function b(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(E(this),n),I(y.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return I(e.apply(E(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[E(this),t].concat(r));return g.set(a,t.sort?t.sort():[t]),I(a)}}function x(e){return"function"===typeof e?b(e):(e instanceof IDBTransaction&&function(e){if(!m.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));m.set(e,t)}}(e),t=e,(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,w):e);var t}function I(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(I(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&y.set(t,e)})).catch((function(){})),_.set(t,e),t}(e);if(k.has(e))return k.get(e);var t=x(e);return t!==e&&(k.set(e,t),_.set(t,e)),t}var E=function(e){return _.get(e)};var S,T,C=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],N=new Map;function D(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(N.get(t))return N.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Z.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||C.includes(n))){var a=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var a,u,s,c,l,h,f=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=f.length,l=new Array(c>1?c-1:0),h=1;h<c;h++)l[h-1]=f[h];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return N.set(t,a),a}}}w=function(e){return(0,p.Z)((0,p.Z)({},e),{},{get:function(t,n,r){return D(t,n)||e.get(t,n,r)},has:function(t,n){return!!D(t,n)||e.has(t,n)}})}(w);var A=function(){function e(t){(0,l.Z)(this,e),this.container=t}return(0,h.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var P="@firebase/app",R="0.8.2",O=new d.Yd("@firebase/app"),L="[DEFAULT]",M=(S={},(0,c.Z)(S,P,"fire-core"),(0,c.Z)(S,"@firebase/app-compat","fire-core-compat"),(0,c.Z)(S,"@firebase/analytics","fire-analytics"),(0,c.Z)(S,"@firebase/analytics-compat","fire-analytics-compat"),(0,c.Z)(S,"@firebase/app-check","fire-app-check"),(0,c.Z)(S,"@firebase/app-check-compat","fire-app-check-compat"),(0,c.Z)(S,"@firebase/auth","fire-auth"),(0,c.Z)(S,"@firebase/auth-compat","fire-auth-compat"),(0,c.Z)(S,"@firebase/database","fire-rtdb"),(0,c.Z)(S,"@firebase/database-compat","fire-rtdb-compat"),(0,c.Z)(S,"@firebase/functions","fire-fn"),(0,c.Z)(S,"@firebase/functions-compat","fire-fn-compat"),(0,c.Z)(S,"@firebase/installations","fire-iid"),(0,c.Z)(S,"@firebase/installations-compat","fire-iid-compat"),(0,c.Z)(S,"@firebase/messaging","fire-fcm"),(0,c.Z)(S,"@firebase/messaging-compat","fire-fcm-compat"),(0,c.Z)(S,"@firebase/performance","fire-perf"),(0,c.Z)(S,"@firebase/performance-compat","fire-perf-compat"),(0,c.Z)(S,"@firebase/remote-config","fire-rc"),(0,c.Z)(S,"@firebase/remote-config-compat","fire-rc-compat"),(0,c.Z)(S,"@firebase/storage","fire-gcs"),(0,c.Z)(S,"@firebase/storage-compat","fire-gcs-compat"),(0,c.Z)(S,"@firebase/firestore","fire-fst"),(0,c.Z)(S,"@firebase/firestore-compat","fire-fst-compat"),(0,c.Z)(S,"fire-js","fire-js"),(0,c.Z)(S,"firebase","fire-js-all"),S),F=new Map,U=new Map;function V(e,t){try{e.container.addComponent(t)}catch(n){O.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function q(e,t){e.container.addOrOverwriteComponent(t)}function B(e){var t=e.name;if(U.has(t))return O.debug("There were multiple attempts to register component ".concat(t,".")),!1;U.set(t,e);var n,r=(0,s.Z)(F.values());try{for(r.s();!(n=r.n()).done;){V(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function j(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;j(e,t).clearInstance(n)}function W(){U.clear()}var K=(T={},(0,c.Z)(T,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,c.Z)(T,"bad-app-name","Illegal App name: '{$appName}"),(0,c.Z)(T,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,c.Z)(T,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,c.Z)(T,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,c.Z)(T,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,c.Z)(T,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,c.Z)(T,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(T,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(T,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,c.Z)(T,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),T),H=new v.LL("app","Firebase",K),G=function(){function e(t,n,r){var i=this;(0,l.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new f.wA("app",(function(){return i}),"PUBLIC"))}return(0,h.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw H.create("app-deleted",{appName:this._name})}}]),e}(),Q="9.12.1";function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:L,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw H.create("bad-app-name",{appName:String(a)});if(n||(n=(0,v.aH)()),!n)throw H.create("no-options");var o=F.get(a);if(o){if((0,v.vZ)(n,o.options)&&(0,v.vZ)(i,o.config))return o;throw H.create("duplicate-app",{appName:a})}var u,c=new f.H0(a),l=(0,s.Z)(U.values());try{for(l.s();!(u=l.n()).done;){var h=u.value;c.addComponent(h)}}catch(p){l.e(p)}finally{l.f()}var d=new G(n,i,c);return F.set(a,d),d}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=F.get(e);if(!t&&e===L)return Y();if(!t)throw H.create("no-app",{appName:e});return t}function X(){return Array.from(F.values())}function J(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,u.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!F.has(n)){e.next=6;break}return F.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,n){var r,i=null!==(r=M[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void O.warn(u.join(" "))}B(new f.wA("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ne(e,t){if(null!==e&&"function"!==typeof e)throw H.create("invalid-log-argument");(0,d.Am)(e,t)}function re(e){(0,d.Ub)(e)}var ie="firebase-heartbeat-store",ae=null;function oe(){return ae||(ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=I(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(I(u.result),e.oldVersion,e.newVersion,I(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(ie)}}).catch((function(e){throw H.create("idb-open",{originalErrorMessage:e.message})}))),ae}function ue(e){return se.apply(this,arguments)}function se(){return(se=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:return r=e.sent,e.abrupt("return",r.transaction(ie).objectStore(ie).get(he(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof v.ZR?O.warn(e.t0.message):(i=H.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),O.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=(0,u.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,u,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe();case 3:return i=e.sent,a=i.transaction(ie,"readwrite"),u=a.objectStore(ie),e.next=8,u.put(n,he(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof v.ZR?O.warn(e.t0.message):(s=H.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),O.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function he(e){return"".concat(e.name,"!").concat(e.options.appId)}var fe=function(){function e(t){var n=this;(0,l.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ye(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,h.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=de(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=de(),n=ve(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=(0,v.L)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function de(){return(new Date).toISOString().substring(0,10)}function ve(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=(0,s.Z)(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),me(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),me(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(c){a.e(c)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var pe,ye=function(){function e(t){(0,l.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,h.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,v.hl)()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",(0,v.eu)().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ue(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ce(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ce(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,a.Z)(r.heartbeats),(0,a.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function me(e){return(0,v.L)(JSON.stringify({version:2,heartbeats:e})).length}pe="",B(new f.wA("platform-logger",(function(e){return new A(e)}),"PRIVATE")),B(new f.wA("heartbeat",(function(e){return new fe(e)}),"PRIVATE")),te(P,R,pe),te(P,R,"esm2017"),te("fire-js","")},3258:function(e,t,n){n.d(t,{H0:function(){return v},wA:function(){return h},zt:function(){return d}});var r=n(4165),i=n(2982),a=n(5861),o=n(885),u=n(7762),s=n(5671),c=n(3144),l=n(5854),h=function(){function e(t,n,r){(0,s.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,c.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),f="[DEFAULT]",d=function(){function e(t,n){(0,s.Z)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,c.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new l.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:f})}catch(l){}var t,n=(0,u.Z)(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,o.Z)(t.value,2),i=r[0],a=r[1],s=this.normalizeInstanceIdentifier(i);try{var c=this.getOrInitializeService({instanceIdentifier:s});a.resolve(c)}catch(l){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,i.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,i.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=(0,u.Z)(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var c=(0,o.Z)(i.value,2),l=c[0],h=c[1],f=this.normalizeInstanceIdentifier(l);r===f&&h.resolve(a)}}catch(d){s.e(d)}finally{s.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=(0,u.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===f?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return this.component?this.component.multipleInstances?e:f:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var v=function(){function e(t){(0,s.Z)(this,e),this.name=t,this.providers=new Map}return(0,c.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new d(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},6781:function(e,t,n){n.d(t,{Am:function(){return y},Ub:function(){return p},Yd:function(){return v},in:function(){return i}});var r,i,a=n(7762),o=n(5671),u=n(3144),s=n(4942),c=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var l={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},h=i.INFO,f=(r={},(0,s.Z)(r,i.DEBUG,"log"),(0,s.Z)(r,i.VERBOSE,"log"),(0,s.Z)(r,i.INFO,"info"),(0,s.Z)(r,i.WARN,"warn"),(0,s.Z)(r,i.ERROR,"error"),r),d=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=f[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},v=function(){function e(t){(0,o.Z)(this,e),this.name=t,this._logLevel=h,this._logHandler=d,this._userLogHandler=null,c.push(this)}return(0,u.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?l[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.DEBUG].concat(t)),this._logHandler.apply(this,[this,i.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.VERBOSE].concat(t)),this._logHandler.apply(this,[this,i.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.INFO].concat(t)),this._logHandler.apply(this,[this,i.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.WARN].concat(t)),this._logHandler.apply(this,[this,i.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.ERROR].concat(t)),this._logHandler.apply(this,[this,i.ERROR].concat(t))}}]),e}();function p(e){c.forEach((function(t){t.setLogLevel(e)}))}function y(e,t){var n,r=(0,a.Z)(c);try{var o=function(){var r=n.value,a=null;t&&t.level&&(a=l[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];var s=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==a&&void 0!==a?a:t.logLevel)&&e({level:i[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{42:"9ae645e8",48:"de38b8b8",51:"4248c765",52:"40af7373",171:"32ff7c0c",250:"0f139fa6",258:"beb1274e",293:"f4db8d4f",379:"daf750e4",420:"305e99e1",444:"a06a113b",449:"6e29ce8c",479:"1e0eb4ff",486:"2b0e99e8",498:"82daae73",513:"0fe5c399",549:"878c3a53",577:"ad76b68a",608:"6313f174",634:"192635e0",703:"85a0f792",706:"cda05199",723:"e9c68085",769:"8dd7e9a8",794:"dc607915",878:"1465eca9",884:"df5985aa",915:"90b3516e",923:"062304eb"}[e]+".chunk.js"},n.miniCssF=function(e){return"static/css/"+e+"."+{51:"03fb73d2",171:"073e5970",250:"6d66ad72",293:"be52e30c",379:"86867af4",420:"3d7bd300",444:"a189cddf",449:"403e2428",479:"6d66ad72",486:"d6a1ef76",577:"4f1da2e9",878:"91842f06",915:"d40f07b7"}[e]+".chunk.css"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="firebase-test:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Business-management-appl/",function(){var e=function(e){return new Promise((function(t,r){var i=n.miniCssF(e),a=n.p+i;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var a=document.getElementsByTagName("style");for(r=0;r<a.length;r++){var o;if((i=(o=a[r]).getAttribute("data-href"))===e||i===t)return o}}(i,a))return t();!function(e,t,n,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(a){if(i.onerror=i.onload=null,"load"===a.type)n();else{var o=a&&("load"===a.type?"missing":a.type),u=a&&a.target&&a.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+u+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=u,i.parentNode.removeChild(i),r(s)}},i.href=t,document.head.appendChild(i)}(e,a,t,r)}))},t={179:0};n.f.miniCss=function(n,r){t[n]?r.push(t[n]):0!==t[n]&&{51:1,171:1,250:1,293:1,379:1,420:1,444:1,449:1,479:1,486:1,577:1,878:1,915:1}[n]&&r.push(t[n]=e(n).then((function(){t[n]=0}),(function(e){throw delete t[n],e})))}}(),function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfirebase_test=self.webpackChunkfirebase_test||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();n(4778)}();
//# sourceMappingURL=main.5ae028ac.js.map