{"version":3,"file":"static/js/258.beb1274e.chunk.js","mappings":"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","sources":["components/user-components/forms/sortPanelLoans.js"],"sourcesContent":["import '../../../styles/components/loan-page.scss'\r\nimport DatalistInput from 'react-datalist-input';\r\nimport { useEffect } from \"react\";\r\n\r\nimport { db } from \"../../..\";\r\n\r\nfunction SortPanelLoans({\r\n    finalSort, setSortRegime, userData, category, \r\n    setCategory, nameOfParty, setNameOfParty, currency, \r\n    setCurrency, setLoans, paidOutStatus, setPaidOutStatus\r\n}) {\r\n\r\n    let sortedArr = []\r\n\r\n    db.ref('loans').child(userData.id).on('value', elem => {\r\n        let obj = elem.val()\r\n\r\n        for (let key in obj) {\r\n            if (key !== '1') {\r\n                sortedArr.push({id: key, ...obj[key]})\r\n            }\r\n        }\r\n\r\n        sortedArr = finalSort(sortedArr)\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (category) {\r\n            sortedArr = sortedArr.filter(item => item.Type === category)\r\n        }\r\n\r\n        if (nameOfParty) {\r\n            sortedArr = sortedArr.filter(item => item.Name.trim().toLowerCase().includes(nameOfParty.trim().toLowerCase()))\r\n        }\r\n\r\n        if (currency) {\r\n            sortedArr = sortedArr.filter(item => item.Currency === currency)\r\n        }\r\n\r\n        if (paidOutStatus) {\r\n            if (paidOutStatus === 'Сплачено') {\r\n                sortedArr = sortedArr.filter(item => item.PaidOut === true)\r\n            } else {\r\n                sortedArr = sortedArr.filter(item => item.PaidOut === false)\r\n            }\r\n        }\r\n\r\n        setLoans(sortedArr)\r\n\r\n    }, [category, nameOfParty, currency, paidOutStatus])\r\n\r\n    function sortFinance(param, direction) {\r\n        return [...sortedArr].sort(function(a, b) {\r\n            if (param === 'sum') {\r\n                let value1 = 0\r\n                let value2 = 0\r\n\r\n                let aType = a.Currency\r\n                let bType = b.Currency\r\n\r\n                switch (aType) {\r\n                    case \"USD\":\r\n                        value1 = parseFloat(a.Value) * 40;\r\n                        break;\r\n                    case \"EUR\":\r\n                        value1 = parseFloat(a.Value) * 40;\r\n                        break;\r\n                    case \"GBP\":\r\n                        value1 = parseFloat(a.Value) * 44;\r\n                        break;\r\n                    case \"JPY\":\r\n                        value1 = parseFloat(a.Value) * 0.3;\r\n                        break;\r\n                    case \"CNY\":\r\n                        value1 = parseFloat(a.Value) * 5.4;\r\n                        break;\r\n                    default:\r\n                        value1 = parseFloat(a.Value);\r\n                }\r\n    \r\n                switch (bType) {\r\n                    case \"USD\":\r\n                        value2 = parseFloat(b.Value) * 40;\r\n                        break;\r\n                    case \"EUR\":\r\n                        value2 = parseFloat(b.Value) * 40;\r\n                        break;\r\n                    case \"GBP\":\r\n                        value2 = parseFloat(b.Value) * 44;\r\n                        break;\r\n                    case \"JPY\":\r\n                        value2 = parseFloat(b.Value) * 0.3;\r\n                        break;\r\n                    case \"CNY\":\r\n                        value2 = parseFloat(b.Value) * 5.4;\r\n                        break;\r\n                    default:\r\n                        value2 = parseFloat(b.Value);\r\n                }\r\n\r\n                if (direction === 'top') {\r\n                    setSortRegime('sum/top')\r\n                    if (value1 > value2) {\r\n                        return 1\r\n                    } else {\r\n                        if (value1 < value2) {\r\n                            return -1\r\n                        } else {\r\n                            return 0\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    setSortRegime('sum/bottom')\r\n                    if (value1 < value2) {\r\n                        return 1\r\n                    } else {\r\n                        if (value1 > value2) {\r\n                            return -1\r\n                        } else {\r\n                            return 0\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (param === 'date') {\r\n                    let date1 = +a.Date.split('-').reverse().join('')\r\n                    let date2 = +b.Date.split('-').reverse().join('')\r\n\r\n                    if (direction === 'top') {\r\n                        setSortRegime('date/top')\r\n                        if (date1 > date2) {\r\n                            return 1\r\n                        } else {\r\n                            if (date1 < date2) {\r\n                                return -1\r\n                            } else {\r\n                                return 0\r\n                            }\r\n                        }\r\n                    } else {\r\n                        setSortRegime('date/bottom')\r\n                        if (date1 < date2) {\r\n                            return 1\r\n                        } else {\r\n                            if (date1 > date2) {\r\n                                return -1\r\n                            } else {\r\n                                return 0\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }) \r\n    }\r\n\r\n    function handleSortFinance(param, direction) {\r\n        if (nameOfParty) {\r\n            sortedArr = sortedArr.filter(item => item.Name.trim().toLowerCase().includes(nameOfParty))\r\n        }\r\n\r\n        if (category) {\r\n            sortedArr = sortedArr.filter(item => item.Type === category)\r\n        }\r\n\r\n        setLoans(sortFinance(param, direction))\r\n    }\r\n\r\n    function resetFilter() {\r\n        setSortRegime('')\r\n        setNameOfParty('')\r\n        setCategory('')\r\n        setCurrency('')\r\n        setPaidOutStatus('')\r\n\r\n        document.querySelector('.project_input').value = ''\r\n    }\r\n\r\n    return (\r\n        <div className='sort_panel_loans'>\r\n            <h2>Сортування</h2>\r\n\r\n            <div className='sort__date sort_con_flex'>\r\n                <h4 className='sort__date_title'>Дата:</h4>\r\n                <div className='sort_btns'>\r\n                    <button onClick={() => handleSortFinance('date', 'top')}>Зростання&nbsp;<span>&#129041;</span></button>\r\n                    <button onClick={() => handleSortFinance('date', 'bottom')}>Спадання&nbsp;<span>&#129043;</span></button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='sort__sum sort_con_flex'>\r\n                <h4 className='sort__sum_title'>Сума:</h4>\r\n                <div className='sort_btns'>\r\n                    <button onClick={() => handleSortFinance('sum', 'top')}>Зростання&nbsp;<span>&#129041;</span></button>\r\n                    <button onClick={() => handleSortFinance('sum', 'bottom')}>Спадання&nbsp;<span>&#129043;</span></button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='sort__currency'>\r\n                <h4>Валюта: </h4>\r\n                <DatalistInput\r\n                    value={currency}\r\n                    setValue={setCurrency}\r\n                    placeholder=\"UAH\"\r\n                    items={[\r\n                        { id: 'UAH', value: 'UAH' },\r\n                        { id: 'USD', value: 'USD' },\r\n                        { id: 'EUR', value: 'EUR' },\r\n                        { id: 'GBP', value: 'GBP' },\r\n                        { id: 'JPY', value: 'JPY' },\r\n                        { id: 'CNY', value: 'CNY' },\r\n                    ]}\r\n                />\r\n            </div>\r\n\r\n            <div className='sort__category'>\r\n                <h4>Вид позики: </h4>\r\n                <DatalistInput\r\n                    value={category}\r\n                    setValue={setCategory}\r\n                    placeholder=\"Дебет\"\r\n                    items={[\r\n                        {id: 'In', value: 'Дебет'},\r\n                        {id: 'Out', value: 'Кредит'},\r\n                    ]}\r\n                />\r\n            </div>\r\n\r\n            <div className='sort__category'>\r\n                <h4>Статус: </h4>\r\n                <DatalistInput\r\n                    value={paidOutStatus}\r\n                    setValue={setPaidOutStatus}\r\n                    placeholder=\"Дебет\"\r\n                    items={[\r\n                        {id: 'True', value: 'Сплачено'},\r\n                        {id: 'False', value: 'Не сплачено'},\r\n                    ]}\r\n                />\r\n            </div>\r\n\r\n            <div className='sort__project'>\r\n                <h4>Ім'я \\ компанія: </h4>\r\n                <div className='sort__project_search'>\r\n                    <input type=\"text\" className='project_input' placeholder='Проєкт...'/>\r\n                    <button onClick={() => setNameOfParty(document.querySelector('.project_input').value)}>Пошук</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className='reset_btn__container'>\r\n                <button onClick={resetFilter} className='reset_btn'>Скинути фільтри</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SortPanelLoans;"],"names":["finalSort","setSortRegime","userData","category","setCategory","nameOfParty","setNameOfParty","currency","setCurrency","setLoans","paidOutStatus","setPaidOutStatus","sortedArr","handleSortFinance","param","direction","filter","item","Name","trim","toLowerCase","includes","Type","sort","a","b","value1","value2","aType","Currency","bType","parseFloat","Value","date1","Date","split","reverse","join","date2","sortFinance","db","child","id","on","elem","obj","val","key","push","useEffect","PaidOut","className","onClick","value","setValue","placeholder","items","type","document","querySelector"],"sourceRoot":""}